"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@humeai";
exports.ids = ["vendor-chunks/@humeai"];
exports.modules = {

/***/ "(ssr)/./node_modules/@humeai/voice-react/dist/index.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/@humeai/voice-react/dist/index.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AudioEncoding: () => (/* reexport safe */ _humeai_voice__WEBPACK_IMPORTED_MODULE_0__.AudioEncoding),\n/* harmony export */   Channels: () => (/* reexport safe */ _humeai_voice__WEBPACK_IMPORTED_MODULE_0__.Channels),\n/* harmony export */   LanguageModelOption: () => (/* reexport safe */ _humeai_voice__WEBPACK_IMPORTED_MODULE_0__.LanguageModelOption),\n/* harmony export */   TTSService: () => (/* reexport safe */ _humeai_voice__WEBPACK_IMPORTED_MODULE_0__.TTSService),\n/* harmony export */   VoiceProvider: () => (/* binding */ VoiceProvider),\n/* harmony export */   VoiceReadyState: () => (/* binding */ VoiceReadyState),\n/* harmony export */   useMicrophone: () => (/* binding */ useMicrophone),\n/* harmony export */   useSoundPlayer: () => (/* binding */ useSoundPlayer),\n/* harmony export */   useVoice: () => (/* binding */ useVoice),\n/* harmony export */   useVoiceClient: () => (/* binding */ useVoiceClient)\n/* harmony export */ });\n/* harmony import */ var _humeai_voice__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @humeai/voice */ \"(ssr)/./node_modules/@humeai/voice/dist/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var meyda__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! meyda */ \"(ssr)/./node_modules/meyda/dist/node/main.js\");\n/* harmony import */ var _barrel_optimize_names_intervalToDuration_date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! __barrel_optimize__?names=intervalToDuration!=!date-fns */ \"(ssr)/./node_modules/date-fns/intervalToDuration.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* __next_internal_client_entry_do_not_use__ AudioEncoding,Channels,LanguageModelOption,TTSService,VoiceProvider,VoiceReadyState,useMicrophone,useSoundPlayer,useVoice,useVoiceClient auto */ // src/lib/useSoundPlayer.ts\n\n\n// src/lib/convertFrequencyScale.ts\nvar barkCenterFrequencies = [\n    50,\n    150,\n    250,\n    350,\n    450,\n    570,\n    700,\n    840,\n    1e3,\n    1170,\n    1370,\n    1600,\n    1850,\n    2150,\n    2500,\n    2900,\n    3400,\n    4e3,\n    4800,\n    5800,\n    7e3,\n    8500,\n    10500,\n    13500\n];\nvar minValue = 0;\nvar maxValue = 255;\nfunction convertLinearFrequenciesToBark(linearData, sampleRate) {\n    const maxFrequency = sampleRate / 2;\n    const frequencyResolution = maxFrequency / linearData.length;\n    const barkFrequencies = barkCenterFrequencies.map((barkFreq)=>{\n        const linearDataIndex = Math.round(barkFreq / frequencyResolution);\n        if (linearDataIndex >= 0 && linearDataIndex < linearData.length) {\n            return ((linearData[linearDataIndex] ?? 0) - minValue) / (maxValue - minValue) * 2;\n        } else {\n            return 0;\n        }\n    });\n    return barkFrequencies;\n}\n// src/lib/generateEmptyFft.ts\nfunction generateEmptyFft() {\n    return Array.from({\n        length: 24\n    }).map(()=>0);\n}\n// src/lib/useSoundPlayer.ts\nvar useSoundPlayer = (props)=>{\n    const [isPlaying, setIsPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isAudioMuted, setIsAudioMuted] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [fft, setFft] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(generateEmptyFft());\n    const audioContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const analyserNode = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const gainNode = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const isInitialized = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const clipQueue = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    const isProcessing = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const currentlyPlayingAudioBuffer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const frequencyDataIntervalId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const onPlayAudio = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(props.onPlayAudio);\n    onPlayAudio.current = props.onPlayAudio;\n    const onError = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(props.onError);\n    onError.current = props.onError;\n    const playNextClip = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (analyserNode.current === null || audioContext.current === null) {\n            onError.current(\"Audio environment is not initialized\");\n            return;\n        }\n        if (clipQueue.current.length === 0 || isProcessing.current) {\n            return;\n        }\n        const nextClip = clipQueue.current.shift();\n        if (!nextClip) return;\n        isProcessing.current = true;\n        setIsPlaying(true);\n        const bufferSource = audioContext.current.createBufferSource();\n        bufferSource.buffer = nextClip.buffer;\n        bufferSource.connect(analyserNode.current);\n        currentlyPlayingAudioBuffer.current = bufferSource;\n        const updateFrequencyData = ()=>{\n            try {\n                const bufferSampleRate = bufferSource.buffer?.sampleRate;\n                if (!analyserNode.current || typeof bufferSampleRate === \"undefined\") return;\n                const dataArray = new Uint8Array(analyserNode.current.frequencyBinCount);\n                analyserNode.current.getByteFrequencyData(dataArray);\n                const barkFrequencies = convertLinearFrequenciesToBark(dataArray, bufferSampleRate);\n                setFft(()=>barkFrequencies);\n            } catch (e) {\n                setFft(generateEmptyFft());\n            }\n        };\n        frequencyDataIntervalId.current = window.setInterval(updateFrequencyData, 5);\n        bufferSource.start(0);\n        onPlayAudio.current(nextClip.id);\n        bufferSource.onended = ()=>{\n            if (frequencyDataIntervalId.current) {\n                clearInterval(frequencyDataIntervalId.current);\n            }\n            setFft(generateEmptyFft());\n            bufferSource.disconnect();\n            isProcessing.current = false;\n            setIsPlaying(false);\n            currentlyPlayingAudioBuffer.current = null;\n            playNextClip();\n        };\n    }, []);\n    const initPlayer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        const initAudioContext = new AudioContext();\n        audioContext.current = initAudioContext;\n        const analyser = initAudioContext.createAnalyser();\n        const gain = initAudioContext.createGain();\n        analyser.fftSize = 2048;\n        analyser.connect(gain);\n        gain.connect(initAudioContext.destination);\n        analyserNode.current = analyser;\n        gainNode.current = gain;\n        isInitialized.current = true;\n    }, []);\n    const addToQueue = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (message)=>{\n        if (!isInitialized.current || !audioContext.current) {\n            onError.current(\"Audio player has not been initialized\");\n            return;\n        }\n        try {\n            const blob = (0,_humeai_voice__WEBPACK_IMPORTED_MODULE_0__.base64ToBlob)(message.data, \"audio/mp3\");\n            const arrayBuffer = await blob.arrayBuffer();\n            const audioBuffer = await audioContext.current.decodeAudioData(arrayBuffer);\n            clipQueue.current.push({\n                id: message.id,\n                buffer: audioBuffer\n            });\n            if (clipQueue.current.length === 1) {\n                playNextClip();\n            }\n        } catch (e) {\n            const eMessage = e instanceof Error ? e.message : \"Unknown error\";\n            onError.current(`Failed to add clip to queue: ${eMessage}`);\n        }\n    }, [\n        playNextClip\n    ]);\n    const stopAll = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        isInitialized.current = false;\n        isProcessing.current = false;\n        setIsPlaying(false);\n        if (frequencyDataIntervalId.current) {\n            window.clearInterval(frequencyDataIntervalId.current);\n        }\n        if (currentlyPlayingAudioBuffer.current) {\n            currentlyPlayingAudioBuffer.current.disconnect();\n            currentlyPlayingAudioBuffer.current = null;\n        }\n        if (analyserNode.current) {\n            analyserNode.current.disconnect();\n            analyserNode.current = null;\n        }\n        if (audioContext.current) {\n            void audioContext.current.close().then(()=>{\n                audioContext.current = null;\n            }).catch(()=>{\n                return null;\n            });\n        }\n        clipQueue.current = [];\n        setFft(generateEmptyFft());\n    }, []);\n    const clearQueue = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (currentlyPlayingAudioBuffer.current) {\n            currentlyPlayingAudioBuffer.current.stop();\n            currentlyPlayingAudioBuffer.current = null;\n        }\n        clipQueue.current = [];\n        isProcessing.current = false;\n        setIsPlaying(false);\n        setFft(generateEmptyFft());\n    }, []);\n    const muteAudio = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (gainNode.current && audioContext.current) {\n            gainNode.current.gain.setValueAtTime(0, audioContext.current.currentTime);\n            setIsAudioMuted(true);\n        }\n    }, []);\n    const unmuteAudio = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (gainNode.current && audioContext.current) {\n            gainNode.current.gain.setValueAtTime(1, audioContext.current.currentTime);\n            setIsAudioMuted(false);\n        }\n    }, []);\n    return {\n        addToQueue,\n        fft,\n        initPlayer,\n        isPlaying,\n        isAudioMuted,\n        muteAudio,\n        unmuteAudio,\n        stopAll,\n        clearQueue\n    };\n};\n// src/lib/useMicrophone.ts\n\n\n\nvar useMicrophone = (props)=>{\n    const { streamRef, onAudioCaptured, onError } = props;\n    const [isMuted, setIsMuted] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const isMutedRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(isMuted);\n    const [fft, setFft] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(generateEmptyFft());\n    const currentAnalyzer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const mimeTypeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const recorder = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const sendAudio = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(onAudioCaptured);\n    sendAudio.current = onAudioCaptured;\n    const dataHandler = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((event)=>{\n        const blob = event.data;\n        blob.arrayBuffer().then((buffer)=>{\n            if (buffer.byteLength > 0) {\n                sendAudio.current?.(buffer);\n            }\n        }).catch((err)=>{\n            console.log(err);\n        });\n    }, []);\n    const start = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        const stream = streamRef.current;\n        if (!stream) {\n            throw new Error(\"No stream connected\");\n        }\n        const context = new AudioContext();\n        audioContext.current = context;\n        const input = context.createMediaStreamSource(stream);\n        try {\n            currentAnalyzer.current = meyda__WEBPACK_IMPORTED_MODULE_2__.createMeydaAnalyzer({\n                audioContext: context,\n                source: input,\n                featureExtractors: [\n                    \"loudness\"\n                ],\n                callback: (features)=>{\n                    const newFft = features.loudness.specific || [];\n                    setFft(()=>Array.from(newFft));\n                }\n            });\n            currentAnalyzer.current.start();\n        } catch (e) {\n            const message = e instanceof Error ? e.message : \"Unknown error\";\n            console.error(`Failed to start mic analyzer: ${message}`);\n        }\n        const mimeType = mimeTypeRef.current;\n        if (!mimeType) {\n            throw new Error(\"No MimeType specified\");\n        }\n        recorder.current = new MediaRecorder(stream, {\n            mimeType\n        });\n        recorder.current.addEventListener(\"dataavailable\", dataHandler);\n        recorder.current.start(100);\n    }, [\n        dataHandler,\n        streamRef,\n        mimeTypeRef\n    ]);\n    const stop = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        try {\n            if (currentAnalyzer.current) {\n                currentAnalyzer.current.stop();\n                currentAnalyzer.current = null;\n            }\n            if (audioContext.current) {\n                void audioContext.current.close().then(()=>{\n                    audioContext.current = null;\n                }).catch(()=>{\n                    return null;\n                });\n            }\n            recorder.current?.stop();\n            recorder.current?.removeEventListener(\"dataavailable\", dataHandler);\n            recorder.current = null;\n            streamRef.current?.getTracks().forEach((track)=>track.stop());\n            setIsMuted(false);\n        } catch (e) {\n            const message = e instanceof Error ? e.message : \"Unknown error\";\n            onError(`Error stopping microphone: ${message}`);\n            console.log(e);\n        }\n    }, [\n        dataHandler,\n        onError,\n        streamRef\n    ]);\n    const mute = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (currentAnalyzer.current) {\n            currentAnalyzer.current.stop();\n            setFft(generateEmptyFft());\n        }\n        streamRef.current?.getTracks().forEach((track)=>{\n            track.enabled = false;\n        });\n        isMutedRef.current = true;\n        setIsMuted(true);\n    }, [\n        streamRef\n    ]);\n    const unmute = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (currentAnalyzer.current) {\n            currentAnalyzer.current.start();\n        }\n        streamRef.current?.getTracks().forEach((track)=>{\n            track.enabled = true;\n        });\n        isMutedRef.current = false;\n        setIsMuted(false);\n    }, [\n        streamRef\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        return ()=>{\n            try {\n                recorder.current?.stop();\n                recorder.current?.removeEventListener(\"dataavailable\", dataHandler);\n                if (currentAnalyzer.current) {\n                    currentAnalyzer.current.stop();\n                    currentAnalyzer.current = null;\n                }\n                streamRef.current?.getTracks().forEach((track)=>track.stop());\n                streamRef.current = null;\n            } catch (e) {\n                console.log(e);\n            }\n        };\n    }, [\n        dataHandler,\n        streamRef\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const mimeTypeResult = (0,_humeai_voice__WEBPACK_IMPORTED_MODULE_0__.getSupportedMimeType)();\n        if (mimeTypeResult.success) {\n            mimeTypeRef.current = mimeTypeResult.mimeType;\n        } else {\n            onError(mimeTypeResult.error.message);\n        }\n    }, [\n        onError\n    ]);\n    return {\n        start,\n        stop,\n        mute,\n        unmute,\n        isMuted,\n        fft\n    };\n};\n// src/lib/VoiceProvider.tsx\n\n\n// src/lib/noop.ts\nvar noop = ()=>{};\n// src/lib/useCallDuration.ts\n\n\nvar useCallDuration = ()=>{\n    const interval = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const startTime = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [timestamp, setTimestamp] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const start = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        startTime.current = Date.now();\n        setTimestamp(\"00:00:00\");\n        interval.current = window.setInterval(()=>{\n            if (startTime.current) {\n                const duration = (0,_barrel_optimize_names_intervalToDuration_date_fns__WEBPACK_IMPORTED_MODULE_3__.intervalToDuration)({\n                    start: startTime.current,\n                    end: Date.now()\n                });\n                const hours = (duration.hours ?? 0).toString().padStart(2, \"0\");\n                const minutes = (duration.minutes ?? 0).toString().padStart(2, \"0\");\n                const seconds = (duration.seconds ?? 0).toString().padStart(2, \"0\");\n                setTimestamp(`${hours}:${minutes}:${seconds}`);\n            }\n        }, 500);\n    }, []);\n    const stop = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (interval.current) {\n            window.clearInterval(interval.current);\n            interval.current = null;\n        }\n    }, []);\n    const reset = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        setTimestamp(null);\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        return ()=>{\n            if (interval.current) {\n                window.clearInterval(interval.current);\n                interval.current = null;\n            }\n        };\n    }, []);\n    return {\n        timestamp,\n        start,\n        stop,\n        reset\n    };\n};\n// src/lib/useEncoding.ts\n\n\nvar useEncoding = ()=>{\n    const [permission, setPermission] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"prompt\");\n    const streamRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const getStream = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        try {\n            const stream = await (0,_humeai_voice__WEBPACK_IMPORTED_MODULE_0__.getAudioStream)();\n            setPermission(\"granted\");\n            streamRef.current = stream;\n            (0,_humeai_voice__WEBPACK_IMPORTED_MODULE_0__.checkForAudioTracks)(stream);\n            return \"granted\";\n        } catch (e) {\n            setPermission(\"denied\");\n            return \"denied\";\n        }\n    }, []);\n    return {\n        streamRef,\n        getStream,\n        permission\n    };\n};\n// src/lib/useMessages.ts\n\n// src/utils/index.ts\nvar keepLastN = (n, arr)=>{\n    if (arr.length <= n) {\n        return arr;\n    }\n    return arr.slice(arr.length - n);\n};\n// src/lib/useMessages.ts\nvar useMessages = ({ sendMessageToParent, messageHistoryLimit })=>{\n    const [voiceMessageMap, setVoiceMessageMap] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [lastVoiceMessage, setLastVoiceMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [lastUserMessage, setLastUserMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [chatMetadata, setChatMetadata] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const createConnectMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        setMessages((prev)=>prev.concat([\n                {\n                    type: \"socket_connected\",\n                    receivedAt: /* @__PURE__ */ new Date()\n                }\n            ]));\n    }, []);\n    const createDisconnectMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        setMessages((prev)=>prev.concat([\n                {\n                    type: \"socket_disconnected\",\n                    receivedAt: /* @__PURE__ */ new Date()\n                }\n            ]));\n    }, []);\n    const onMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((message)=>{\n        switch(message.type){\n            case \"assistant_message\":\n                setVoiceMessageMap((prev)=>({\n                        ...prev,\n                        [message.id]: message\n                    }));\n                break;\n            case \"user_message\":\n                sendMessageToParent?.(message);\n                setLastUserMessage(message);\n                setMessages((prev)=>{\n                    return keepLastN(messageHistoryLimit, prev.concat([\n                        message\n                    ]));\n                });\n                break;\n            case \"user_interruption\":\n            case \"error\":\n            case \"tool_call\":\n            case \"tool_response\":\n            case \"tool_error\":\n                sendMessageToParent?.(message);\n                setMessages((prev)=>{\n                    return keepLastN(messageHistoryLimit, prev.concat([\n                        message\n                    ]));\n                });\n                break;\n            case \"chat_metadata\":\n                sendMessageToParent?.(message);\n                setMessages((prev)=>{\n                    return keepLastN(messageHistoryLimit, prev.concat([\n                        message\n                    ]));\n                });\n                setChatMetadata(message);\n                break;\n            default:\n                break;\n        }\n    }, []);\n    const onPlayAudio = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id)=>{\n        const matchingTranscript = voiceMessageMap[id];\n        if (matchingTranscript) {\n            sendMessageToParent?.(matchingTranscript);\n            setLastVoiceMessage(matchingTranscript);\n            setMessages((prev)=>{\n                return keepLastN(messageHistoryLimit, prev.concat([\n                    matchingTranscript\n                ]));\n            });\n            setVoiceMessageMap((prev)=>{\n                const newMap = {\n                    ...prev\n                };\n                delete newMap[id];\n                return newMap;\n            });\n        }\n    }, [\n        voiceMessageMap,\n        sendMessageToParent,\n        messageHistoryLimit\n    ]);\n    const clearMessages = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        setMessages([]);\n        setLastVoiceMessage(null);\n        setLastUserMessage(null);\n        setVoiceMessageMap({});\n    }, []);\n    return {\n        createConnectMessage,\n        createDisconnectMessage,\n        onMessage,\n        onPlayAudio,\n        clearMessages,\n        messages,\n        lastVoiceMessage,\n        lastUserMessage,\n        chatMetadata\n    };\n};\n// src/lib/useToolStatus.ts\n\nvar useToolStatus = ()=>{\n    const [store, setStore] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const addToStore = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((message)=>{\n        setStore((prev)=>{\n            const entry = {\n                ...prev[message.tool_call_id]\n            };\n            if (message.type === \"tool_call\") {\n                entry.call = message;\n            }\n            if (message.type === \"tool_response\" || message.type === \"tool_error\") {\n                entry.resolved = message;\n            }\n            return {\n                ...prev,\n                [message.tool_call_id]: entry\n            };\n        });\n    }, []);\n    const clearStore = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        setStore({});\n    }, []);\n    return {\n        store,\n        addToStore,\n        clearStore\n    };\n};\n// src/lib/useVoiceClient.ts\n\n\n\nvar VoiceReadyState = /* @__PURE__ */ ((VoiceReadyState2)=>{\n    VoiceReadyState2[\"IDLE\"] = \"idle\";\n    VoiceReadyState2[\"CONNECTING\"] = \"connecting\";\n    VoiceReadyState2[\"OPEN\"] = \"open\";\n    VoiceReadyState2[\"CLOSED\"] = \"closed\";\n    return VoiceReadyState2;\n})(VoiceReadyState || {});\nvar useVoiceClient = (props)=>{\n    const client = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [readyState, setReadyState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"idle\" /* IDLE */ );\n    const onAudioMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(props.onAudioMessage);\n    onAudioMessage.current = props.onAudioMessage;\n    const onMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(props.onMessage);\n    onMessage.current = props.onMessage;\n    const onToolCall = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(props.onToolCall);\n    onToolCall.current = props.onToolCall;\n    const onError = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(props.onError);\n    onError.current = props.onError;\n    const onOpen = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(props.onOpen);\n    onOpen.current = props.onOpen;\n    const onClose = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(props.onClose);\n    onClose.current = props.onClose;\n    const connect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((config)=>{\n        return new Promise((resolve, reject)=>{\n            client.current = _humeai_voice__WEBPACK_IMPORTED_MODULE_0__.VoiceClient.create(config);\n            client.current.on(\"open\", ()=>{\n                onOpen.current?.();\n                setReadyState(\"open\" /* OPEN */ );\n                resolve(\"open\" /* OPEN */ );\n            });\n            client.current.on(\"message\", (message)=>{\n                if (message.type === \"audio_output\") {\n                    onAudioMessage.current?.(message);\n                }\n                if (message.type === \"assistant_message\" || message.type === \"user_message\" || message.type === \"user_interruption\" || message.type === \"error\" || message.type === \"tool_response\" || message.type === \"tool_error\" || message.type === \"chat_metadata\") {\n                    onMessage.current?.(message);\n                }\n                if (message.type === \"tool_call\") {\n                    onMessage.current?.(message);\n                    void onToolCall.current?.(message, {\n                        success: (content)=>({\n                                type: \"tool_response\",\n                                tool_call_id: message.tool_call_id,\n                                content: JSON.stringify(content)\n                            }),\n                        error: ({ error, code, level, content })=>({\n                                type: \"tool_error\",\n                                tool_call_id: message.tool_call_id,\n                                error,\n                                code,\n                                level,\n                                content\n                            })\n                    }).then((response)=>{\n                        const parsed = zod__WEBPACK_IMPORTED_MODULE_4__.z.union([\n                            _humeai_voice__WEBPACK_IMPORTED_MODULE_0__.ToolResponseSchema,\n                            _humeai_voice__WEBPACK_IMPORTED_MODULE_0__.ToolErrorSchema\n                        ]).safeParse(response);\n                        if (parsed.success) {\n                            client.current?.sendToolMessage(parsed.data);\n                        } else {\n                            onError.current?.(\"Invalid response from tool call\");\n                        }\n                    });\n                }\n            });\n            client.current.on(\"close\", (event)=>{\n                onClose.current?.(event);\n                setReadyState(\"closed\" /* CLOSED */ );\n            });\n            client.current.on(\"error\", (e)=>{\n                const message = e instanceof Error ? e.message : \"Unknown error\";\n                onError.current?.(message, e instanceof Error ? e : void 0);\n                reject(e);\n            });\n            setReadyState(\"connecting\" /* CONNECTING */ );\n            client.current.connect();\n        });\n    }, []);\n    const disconnect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        setReadyState(\"idle\" /* IDLE */ );\n        client.current?.disconnect();\n    }, []);\n    const sendSessionSettings = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((sessionSettings)=>{\n        client.current?.sendSessionSettings(sessionSettings);\n    }, []);\n    const sendAudio = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((arrayBuffer)=>{\n        client.current?.sendAudio(arrayBuffer);\n    }, []);\n    const sendUserInput = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((text)=>{\n        client.current?.sendUserInput(text);\n    }, []);\n    const sendAssistantInput = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((text)=>{\n        client.current?.sendAssistantInput(text);\n    }, []);\n    const sendToolMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((toolMessage)=>{\n        client.current?.sendToolMessage(toolMessage);\n    }, []);\n    const sendPauseAssistantMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        client.current?.sendPauseAssistantMessage();\n    }, []);\n    const sendResumeAssistantMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        client.current?.sendResumeAssistantMessage();\n    }, []);\n    return {\n        readyState,\n        sendSessionSettings,\n        sendAudio,\n        connect,\n        disconnect,\n        sendUserInput,\n        sendAssistantInput,\n        sendToolMessage,\n        sendPauseAssistantMessage,\n        sendResumeAssistantMessage\n    };\n};\n// src/lib/VoiceProvider.tsx\n\nvar VoiceContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\nvar useVoice = ()=>{\n    const ctx = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(VoiceContext);\n    if (!ctx) {\n        throw new Error(\"useVoice must be used within an VoiceProvider\");\n    }\n    return ctx;\n};\nvar VoiceProvider = ({ children, clearMessagesOnDisconnect = true, messageHistoryLimit = 100, sessionSettings, ...props })=>{\n    const { timestamp: callDurationTimestamp, start: startTimer, stop: stopTimer } = useCallDuration();\n    const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        value: \"disconnected\"\n    });\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const isError = error !== null;\n    const isMicrophoneError = error?.type === \"mic_error\";\n    const isSocketError = error?.type === \"socket_error\";\n    const isAudioError = error?.type === \"audio_error\";\n    const onError = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(props.onError ?? noop);\n    onError.current = props.onError ?? noop;\n    const onClose = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(props.onClose ?? noop);\n    onClose.current = props.onClose ?? noop;\n    const toolStatus = useToolStatus();\n    const messageStore = useMessages({\n        sendMessageToParent: props.onMessage,\n        messageHistoryLimit\n    });\n    const updateError = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((err)=>{\n        setError(err);\n        if (err !== null) {\n            onError.current?.(err);\n        }\n    }, []);\n    const onClientError = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((message, err)=>{\n        stopTimer();\n        updateError({\n            type: \"socket_error\",\n            message,\n            error: err\n        });\n    }, [\n        stopTimer,\n        updateError\n    ]);\n    const config = (0,_humeai_voice__WEBPACK_IMPORTED_MODULE_0__.createSocketConfig)(props);\n    const player = useSoundPlayer({\n        onError: (message)=>{\n            updateError({\n                type: \"audio_error\",\n                message\n            });\n        },\n        onPlayAudio: (id)=>{\n            messageStore.onPlayAudio(id);\n        }\n    });\n    const { streamRef, getStream, permission: micPermission } = useEncoding();\n    const client = useVoiceClient({\n        onAudioMessage: (message)=>{\n            player.addToQueue(message);\n        },\n        onMessage: (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((message)=>{\n            messageStore.onMessage(message);\n            if (message.type === \"user_interruption\" || message.type === \"user_message\") {\n                player.clearQueue();\n            }\n            if (message.type === \"tool_call\" || message.type === \"tool_response\" || message.type === \"tool_error\") {\n                toolStatus.addToStore(message);\n            }\n        }, [\n            messageStore,\n            player,\n            toolStatus\n        ]),\n        onError: onClientError,\n        onOpen: (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n            startTimer();\n            messageStore.createConnectMessage();\n            props.onOpen?.();\n        }, [\n            messageStore,\n            props,\n            startTimer\n        ]),\n        onClose: (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((event)=>{\n            stopTimer();\n            messageStore.createDisconnectMessage();\n            onClose.current?.(event);\n        }, [\n            messageStore,\n            stopTimer\n        ]),\n        onToolCall: props.onToolCall\n    });\n    const mic = useMicrophone({\n        streamRef,\n        onAudioCaptured: (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((arrayBuffer)=>{\n            try {\n                client.sendAudio(arrayBuffer);\n            } catch (e) {\n                const message = e instanceof Error ? e.message : \"Unknown error\";\n                updateError({\n                    type: \"socket_error\",\n                    message\n                });\n            }\n        }, []),\n        onError: (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((message)=>{\n            updateError({\n                type: \"mic_error\",\n                message\n            });\n        }, [\n            updateError\n        ])\n    });\n    const connect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        updateError(null);\n        setStatus({\n            value: \"connecting\"\n        });\n        const permission = await getStream();\n        if (permission === \"denied\") {\n            const error2 = {\n                type: \"mic_error\",\n                message: \"Microphone permission denied\"\n            };\n            updateError(error2);\n            return Promise.reject(error2);\n        }\n        try {\n            await client.connect({\n                ...config\n            }).then(()=>{\n                if (sessionSettings !== void 0 && Object.keys(sessionSettings).length > 0) {\n                    client.sendSessionSettings(sessionSettings);\n                }\n            });\n        } catch (e) {\n            const error2 = {\n                type: \"socket_error\",\n                message: \"We could not connect to the voice. Please try again.\"\n            };\n            updateError(error2);\n            return Promise.reject(error2);\n        }\n        try {\n            const [micPromise, playerPromise] = await Promise.allSettled([\n                mic.start(),\n                player.initPlayer()\n            ]);\n            if (micPromise.status === \"fulfilled\" && playerPromise.status === \"fulfilled\") {\n                setStatus({\n                    value: \"connected\"\n                });\n            }\n        } catch (e) {\n            const error2 = {\n                type: \"audio_error\",\n                message: e instanceof Error ? e.message : \"We could not connect to audio. Please try again.\"\n            };\n            updateError(error2);\n        }\n    }, [\n        client,\n        config,\n        getStream,\n        mic,\n        player,\n        sessionSettings,\n        updateError\n    ]);\n    const disconnectFromVoice = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        client.disconnect();\n        player.stopAll();\n        mic.stop();\n        if (clearMessagesOnDisconnect) {\n            messageStore.clearMessages();\n        }\n        toolStatus.clearStore();\n    }, [\n        client,\n        player,\n        mic,\n        clearMessagesOnDisconnect,\n        toolStatus,\n        messageStore\n    ]);\n    const disconnect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((disconnectOnError)=>{\n        if (micPermission === \"denied\") {\n            setStatus({\n                value: \"error\",\n                reason: \"Microphone permission denied\"\n            });\n        }\n        stopTimer();\n        disconnectFromVoice();\n        if (status.value !== \"error\" && !disconnectOnError) {\n            setStatus({\n                value: \"disconnected\"\n            });\n        }\n    }, [\n        micPermission,\n        stopTimer,\n        disconnectFromVoice,\n        status.value\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (error !== null && status.value !== \"error\" && status.value !== \"disconnected\") {\n            setStatus({\n                value: \"error\",\n                reason: error.message\n            });\n            disconnectFromVoice();\n        }\n    }, [\n        status.value,\n        disconnect,\n        disconnectFromVoice,\n        error\n    ]);\n    const ctx = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>({\n            connect,\n            disconnect,\n            fft: player.fft,\n            micFft: mic.fft,\n            isMuted: mic.isMuted,\n            isAudioMuted: player.isAudioMuted,\n            isPlaying: player.isPlaying,\n            messages: messageStore.messages,\n            lastVoiceMessage: messageStore.lastVoiceMessage,\n            lastUserMessage: messageStore.lastUserMessage,\n            clearMessages: messageStore.clearMessages,\n            mute: mic.mute,\n            muteAudio: player.muteAudio,\n            readyState: client.readyState,\n            sendUserInput: client.sendUserInput,\n            sendAssistantInput: client.sendAssistantInput,\n            sendSessionSettings: client.sendSessionSettings,\n            sendToolMessage: client.sendToolMessage,\n            sendPauseAssistantMessage: client.sendPauseAssistantMessage,\n            sendResumeAssistantMessage: client.sendResumeAssistantMessage,\n            status,\n            unmute: mic.unmute,\n            unmuteAudio: player.unmuteAudio,\n            error,\n            isAudioError,\n            isError,\n            isMicrophoneError,\n            isSocketError,\n            callDurationTimestamp,\n            toolStatusStore: toolStatus.store,\n            chatMetadata: messageStore.chatMetadata\n        }), [\n        connect,\n        disconnect,\n        player.fft,\n        player.isPlaying,\n        player.isAudioMuted,\n        player.muteAudio,\n        player.unmuteAudio,\n        mic.fft,\n        mic.isMuted,\n        mic.mute,\n        mic.unmute,\n        messageStore.messages,\n        messageStore.lastVoiceMessage,\n        messageStore.lastUserMessage,\n        messageStore.clearMessages,\n        client.readyState,\n        client.sendUserInput,\n        client.sendAssistantInput,\n        client.sendSessionSettings,\n        client.sendToolMessage,\n        client.sendPauseAssistantMessage,\n        client.sendResumeAssistantMessage,\n        status,\n        error,\n        isAudioError,\n        isError,\n        isMicrophoneError,\n        isSocketError,\n        callDurationTimestamp,\n        toolStatus,\n        messageStore.chatMetadata\n    ]);\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(VoiceContext.Provider, {\n        value: ctx,\n        children\n    });\n};\n// src/index.ts\n\n //# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1bWVhaS92b2ljZS1yZWFjdC9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRDtBQUNSOztBQ0U5QyxJQUFNSSx3QkFBd0I7SUFDNUI7SUFBSTtJQUFLO0lBQUs7SUFBSztJQUFLO0lBQUs7SUFBSztJQUFLO0lBQU07SUFBTTtJQUFNO0lBQU07SUFBTTtJQUNyRTtJQUFNO0lBQU07SUFBTTtJQUFNO0lBQU07SUFBTTtJQUFNO0lBQU07SUFBTztDQUN6RDtBQUdBLElBQU1DLFdBQVc7QUFDakIsSUFBTUMsV0FBVztBQUVWLFNBQVNDLCtCQUNkQyxVQUFBLEVBQ0FDLFVBQUE7SUFFQSxNQUFNQyxlQUFlRCxhQUFhO0lBQ2xDLE1BQU1FLHNCQUFzQkQsZUFBZUYsV0FBV0ksTUFBQTtJQUV0RCxNQUFNQyxrQkFBa0JULHNCQUFzQlUsR0FBQSxDQUFJLENBQUNDO1FBQ2pELE1BQU1DLGtCQUFrQkMsS0FBS0MsS0FBQSxDQUFNSCxXQUFXSjtRQUM5QyxJQUFJSyxtQkFBbUIsS0FBS0Esa0JBQWtCUixXQUFXSSxNQUFBLEVBQVE7WUFDL0QsU0FDS0osVUFBQSxDQUFXUSxnQkFBZSxJQUFLLEtBQUtYLFFBQUEsSUFDcENDLENBQUFBLFdBQVdELFFBQUEsSUFDZDtRQUVKLE9BQU87WUFDTCxPQUFPO1FBQ1Q7SUFDRjtJQUVBLE9BQU9RO0FBQ1Q7O0FDakNPLFNBQVNNO0lBQ2QsT0FBT0MsTUFBTUMsSUFBQSxDQUFLO1FBQUVULFFBQVE7SUFBRyxHQUFHRSxHQUFBLENBQUksSUFBTTtBQUM5Qzs7QUZJTyxJQUFNUSxpQkFBaUIsQ0FBQ0M7SUFJN0IsTUFBTSxDQUFDQyxXQUFXQyxhQUFZLEdBQUl0QiwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUN1QixjQUFjQyxnQkFBZSxHQUFJeEIsK0NBQVFBLENBQUM7SUFDakQsTUFBTSxDQUFDeUIsS0FBS0MsT0FBTSxHQUFJMUIsK0NBQVFBLENB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QUE7S0FDZjtJQUdGLE9BQU8sZ0JBQUEwRCxzREFBQUEsQ0FBQ0MsYUFBYWtDLFFBQUEsRUFBYjtRQUFzQnZCLE9BQU9UO1FBQU1FO0lBQUE7QUFDN0M7O0FRemFPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktdGhlcmFwaXN0Ly4uL3NyYy9saWIvdXNlU291bmRQbGF5ZXIudHM/MzM1NSIsIndlYnBhY2s6Ly9haS10aGVyYXBpc3QvLi4vc3JjL2xpYi9jb252ZXJ0RnJlcXVlbmN5U2NhbGUudHM/NjAzZiIsIndlYnBhY2s6Ly9haS10aGVyYXBpc3QvLi4vc3JjL2xpYi9nZW5lcmF0ZUVtcHR5RmZ0LnRzPzg3MGYiLCJ3ZWJwYWNrOi8vYWktdGhlcmFwaXN0Ly4uL3NyYy9saWIvdXNlTWljcm9waG9uZS50cz9iZmQ1Iiwid2VicGFjazovL2FpLXRoZXJhcGlzdC8uLi9zcmMvbGliL1ZvaWNlUHJvdmlkZXIudHN4P2FkM2YiLCJ3ZWJwYWNrOi8vYWktdGhlcmFwaXN0Ly4uL3NyYy9saWIvbm9vcC50cz9jY2RmIiwid2VicGFjazovL2FpLXRoZXJhcGlzdC8uLi9zcmMvbGliL3VzZUNhbGxEdXJhdGlvbi50cz85YzQ0Iiwid2VicGFjazovL2FpLXRoZXJhcGlzdC8uLi9zcmMvbGliL3VzZUVuY29kaW5nLnRzP2I2YTciLCJ3ZWJwYWNrOi8vYWktdGhlcmFwaXN0Ly4uL3NyYy9saWIvdXNlTWVzc2FnZXMudHM/ZWY2MiIsIndlYnBhY2s6Ly9haS10aGVyYXBpc3QvLi4vc3JjL3V0aWxzL2luZGV4LnRzP2E3OWQiLCJ3ZWJwYWNrOi8vYWktdGhlcmFwaXN0Ly4uL3NyYy9saWIvdXNlVG9vbFN0YXR1cy50cz8yNzJkIiwid2VicGFjazovL2FpLXRoZXJhcGlzdC8uLi9zcmMvbGliL3VzZVZvaWNlQ2xpZW50LnRzP2NjNDUiLCJ3ZWJwYWNrOi8vYWktdGhlcmFwaXN0Ly4uL3NyYy9pbmRleC50cz81MmQ1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgQXVkaW9PdXRwdXRNZXNzYWdlLCBiYXNlNjRUb0Jsb2IgfSBmcm9tICdAaHVtZWFpL3ZvaWNlJztcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBjb252ZXJ0TGluZWFyRnJlcXVlbmNpZXNUb0JhcmsgfSBmcm9tICcuL2NvbnZlcnRGcmVxdWVuY3lTY2FsZSc7XG5pbXBvcnQgeyBnZW5lcmF0ZUVtcHR5RmZ0IH0gZnJvbSAnLi9nZW5lcmF0ZUVtcHR5RmZ0JztcblxuZXhwb3J0IGNvbnN0IHVzZVNvdW5kUGxheWVyID0gKHByb3BzOiB7XG4gIG9uRXJyb3I6IChtZXNzYWdlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIG9uUGxheUF1ZGlvOiAoaWQ6IHN0cmluZykgPT4gdm9pZDtcbn0pID0+IHtcbiAgY29uc3QgW2lzUGxheWluZywgc2V0SXNQbGF5aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzQXVkaW9NdXRlZCwgc2V0SXNBdWRpb011dGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2ZmdCwgc2V0RmZ0XSA9IHVzZVN0YXRlPG51bWJlcltdPihnZW5lcmF0ZUVtcHR5RmZ0KCkpO1xuXG4gIGNvbnN0IGF1ZGlvQ29udGV4dCA9IHVzZVJlZjxBdWRpb0NvbnRleHQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgYW5hbHlzZXJOb2RlID0gdXNlUmVmPEFuYWx5c2VyTm9kZSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBnYWluTm9kZSA9IHVzZVJlZjxHYWluTm9kZSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBpc0luaXRpYWxpemVkID0gdXNlUmVmKGZhbHNlKTtcblxuICBjb25zdCBjbGlwUXVldWUgPSB1c2VSZWY8XG4gICAgQXJyYXk8e1xuICAgICAgaWQ6IHN0cmluZztcbiAgICAgIGJ1ZmZlcjogQXVkaW9CdWZmZXI7XG4gICAgfT5cbiAgPihbXSk7XG4gIGNvbnN0IGlzUHJvY2Vzc2luZyA9IHVzZVJlZihmYWxzZSk7XG4gIGNvbnN0IGN1cnJlbnRseVBsYXlpbmdBdWRpb0J1ZmZlciA9IHVzZVJlZjxBdWRpb0J1ZmZlclNvdXJjZU5vZGUgfCBudWxsPihcbiAgICBudWxsLFxuICApO1xuICBjb25zdCBmcmVxdWVuY3lEYXRhSW50ZXJ2YWxJZCA9IHVzZVJlZjxudW1iZXIgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBvblBsYXlBdWRpbyA9IHVzZVJlZjx0eXBlb2YgcHJvcHMub25QbGF5QXVkaW8+KHByb3BzLm9uUGxheUF1ZGlvKTtcbiAgb25QbGF5QXVkaW8uY3VycmVudCA9IHByb3BzLm9uUGxheUF1ZGlvO1xuXG4gIGNvbnN0IG9uRXJyb3IgPSB1c2VSZWY8dHlwZW9mIHByb3BzLm9uRXJyb3I+KHByb3BzLm9uRXJyb3IpO1xuICBvbkVycm9yLmN1cnJlbnQgPSBwcm9wcy5vbkVycm9yO1xuXG4gIGNvbnN0IHBsYXlOZXh0Q2xpcCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoYW5hbHlzZXJOb2RlLmN1cnJlbnQgPT09IG51bGwgfHwgYXVkaW9Db250ZXh0LmN1cnJlbnQgPT09IG51bGwpIHtcbiAgICAgIG9uRXJyb3IuY3VycmVudCgnQXVkaW8gZW52aXJvbm1lbnQgaXMgbm90IGluaXRpYWxpemVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGNsaXBRdWV1ZS5jdXJyZW50Lmxlbmd0aCA9PT0gMCB8fCBpc1Byb2Nlc3NpbmcuY3VycmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5leHRDbGlwID0gY2xpcFF1ZXVlLmN1cnJlbnQuc2hpZnQoKTtcbiAgICBpZiAoIW5leHRDbGlwKSByZXR1cm47XG5cbiAgICBpc1Byb2Nlc3NpbmcuY3VycmVudCA9IHRydWU7XG4gICAgc2V0SXNQbGF5aW5nKHRydWUpO1xuXG4gICAgLy8gVXNlIEF1ZGlvQnVmZmVyU291cmNlTm9kZSBmb3IgYXVkaW8gcGxheWJhY2suXG4gICAgLy8gU2FmYXJpIHN1ZmZlcmVkIGEgdHJ1bmNhdGlvbiBpc3N1ZSB1c2luZyBIVE1MNSBhdWRpbyBwbGF5YmFja1xuICAgIGNvbnN0IGJ1ZmZlclNvdXJjZSA9IGF1ZGlvQ29udGV4dC5jdXJyZW50LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuXG4gICAgYnVmZmVyU291cmNlLmJ1ZmZlciA9IG5leHRDbGlwLmJ1ZmZlcjtcblxuICAgIGJ1ZmZlclNvdXJjZS5jb25uZWN0KGFuYWx5c2VyTm9kZS5jdXJyZW50KTtcblxuICAgIGN1cnJlbnRseVBsYXlpbmdBdWRpb0J1ZmZlci5jdXJyZW50ID0gYnVmZmVyU291cmNlO1xuXG4gICAgY29uc3QgdXBkYXRlRnJlcXVlbmN5RGF0YSA9ICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlclNhbXBsZVJhdGUgPSBidWZmZXJTb3VyY2UuYnVmZmVyPy5zYW1wbGVSYXRlO1xuXG4gICAgICAgIGlmICghYW5hbHlzZXJOb2RlLmN1cnJlbnQgfHwgdHlwZW9mIGJ1ZmZlclNhbXBsZVJhdGUgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgIHJldHVybjtcblxuICAgICAgICBjb25zdCBkYXRhQXJyYXkgPSBuZXcgVWludDhBcnJheShcbiAgICAgICAgICBhbmFseXNlck5vZGUuY3VycmVudC5mcmVxdWVuY3lCaW5Db3VudCxcbiAgICAgICAgKTsgLy8gZnJlcXVlbmN5QmluQ291bnQgaXMgMS8yIG9mIGZmdFNpemVcbiAgICAgICAgYW5hbHlzZXJOb2RlLmN1cnJlbnQuZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEoZGF0YUFycmF5KTsgLy8gVXNpbmcgZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEgZm9yIHBlcmZvcm1hbmNlXG5cbiAgICAgICAgY29uc3QgYmFya0ZyZXF1ZW5jaWVzID0gY29udmVydExpbmVhckZyZXF1ZW5jaWVzVG9CYXJrKFxuICAgICAgICAgIGRhdGFBcnJheSxcbiAgICAgICAgICBidWZmZXJTYW1wbGVSYXRlLFxuICAgICAgICApO1xuICAgICAgICBzZXRGZnQoKCkgPT4gYmFya0ZyZXF1ZW5jaWVzKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgc2V0RmZ0KGdlbmVyYXRlRW1wdHlGZnQoKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZyZXF1ZW5jeURhdGFJbnRlcnZhbElkLmN1cnJlbnQgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoXG4gICAgICB1cGRhdGVGcmVxdWVuY3lEYXRhLFxuICAgICAgNSxcbiAgICApO1xuXG4gICAgYnVmZmVyU291cmNlLnN0YXJ0KDApO1xuICAgIG9uUGxheUF1ZGlvLmN1cnJlbnQobmV4dENsaXAuaWQpO1xuXG4gICAgYnVmZmVyU291cmNlLm9uZW5kZWQgPSAoKSA9PiB7XG4gICAgICBpZiAoZnJlcXVlbmN5RGF0YUludGVydmFsSWQuY3VycmVudCkge1xuICAgICAgICBjbGVhckludGVydmFsKGZyZXF1ZW5jeURhdGFJbnRlcnZhbElkLmN1cnJlbnQpO1xuICAgICAgfVxuICAgICAgc2V0RmZ0KGdlbmVyYXRlRW1wdHlGZnQoKSk7XG4gICAgICBidWZmZXJTb3VyY2UuZGlzY29ubmVjdCgpO1xuICAgICAgaXNQcm9jZXNzaW5nLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgIHNldElzUGxheWluZyhmYWxzZSk7XG4gICAgICBjdXJyZW50bHlQbGF5aW5nQXVkaW9CdWZmZXIuY3VycmVudCA9IG51bGw7XG4gICAgICBwbGF5TmV4dENsaXAoKTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgY29uc3QgaW5pdFBsYXllciA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBpbml0QXVkaW9Db250ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xuICAgIGF1ZGlvQ29udGV4dC5jdXJyZW50ID0gaW5pdEF1ZGlvQ29udGV4dDtcblxuICAgIC8vIFVzZSBBbmFseXNlck5vZGUgdG8gZ2V0IGZmdCBmcmVxdWVuY3kgZGF0YSBmb3IgdmlzdWFsaXphdGlvbnNcbiAgICBjb25zdCBhbmFseXNlciA9IGluaXRBdWRpb0NvbnRleHQuY3JlYXRlQW5hbHlzZXIoKTtcbiAgICAvLyBVc2UgR2Fpbk5vZGUgdG8gYWRqdXN0IHZvbHVtZVxuICAgIGNvbnN0IGdhaW4gPSBpbml0QXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKTtcblxuICAgIGFuYWx5c2VyLmZmdFNpemUgPSAyMDQ4OyAvLyBNdXN0IGJlIGEgcG93ZXIgb2YgMlxuICAgIGFuYWx5c2VyLmNvbm5lY3QoZ2Fpbik7XG4gICAgZ2Fpbi5jb25uZWN0KGluaXRBdWRpb0NvbnRleHQuZGVzdGluYXRpb24pO1xuXG4gICAgYW5hbHlzZXJOb2RlLmN1cnJlbnQgPSBhbmFseXNlcjtcbiAgICBnYWluTm9kZS5jdXJyZW50ID0gZ2FpbjtcblxuICAgIGlzSW5pdGlhbGl6ZWQuY3VycmVudCA9IHRydWU7XG4gIH0sIFtdKTtcblxuICBjb25zdCBhZGRUb1F1ZXVlID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKG1lc3NhZ2U6IEF1ZGlvT3V0cHV0TWVzc2FnZSkgPT4ge1xuICAgICAgaWYgKCFpc0luaXRpYWxpemVkLmN1cnJlbnQgfHwgIWF1ZGlvQ29udGV4dC5jdXJyZW50KSB7XG4gICAgICAgIG9uRXJyb3IuY3VycmVudCgnQXVkaW8gcGxheWVyIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGJsb2IgPSBiYXNlNjRUb0Jsb2IobWVzc2FnZS5kYXRhLCAnYXVkaW8vbXAzJyk7XG4gICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpO1xuICAgICAgICBjb25zdCBhdWRpb0J1ZmZlciA9XG4gICAgICAgICAgYXdhaXQgYXVkaW9Db250ZXh0LmN1cnJlbnQuZGVjb2RlQXVkaW9EYXRhKGFycmF5QnVmZmVyKTtcblxuICAgICAgICBjbGlwUXVldWUuY3VycmVudC5wdXNoKHtcbiAgICAgICAgICBpZDogbWVzc2FnZS5pZCxcbiAgICAgICAgICBidWZmZXI6IGF1ZGlvQnVmZmVyLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBwbGF5TmV4dENsaXAgd2lsbCBpdGVyYXRlIHRoZSBjbGlwUXVldWUgdXBvbiBmaW5pc2hpbmcgdGhlIHBsYXliYWNrIG9mIHRoZSBjdXJyZW50IGF1ZGlvIGNsaXAsIHNvIHdlIGNhblxuICAgICAgICAvLyBqdXN0IGNhbGwgcGxheU5leHRDbGlwIGhlcmUgaWYgaXQncyB0aGUgb25seSBvbmUgaW4gdGhlIHF1ZXVlXG4gICAgICAgIGlmIChjbGlwUXVldWUuY3VycmVudC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBwbGF5TmV4dENsaXAoKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zdCBlTWVzc2FnZSA9IGUgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgICAgb25FcnJvci5jdXJyZW50KGBGYWlsZWQgdG8gYWRkIGNsaXAgdG8gcXVldWU6ICR7ZU1lc3NhZ2V9YCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbcGxheU5leHRDbGlwXSxcbiAgKTtcblxuICBjb25zdCBzdG9wQWxsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlzSW5pdGlhbGl6ZWQuY3VycmVudCA9IGZhbHNlO1xuICAgIGlzUHJvY2Vzc2luZy5jdXJyZW50ID0gZmFsc2U7XG4gICAgc2V0SXNQbGF5aW5nKGZhbHNlKTtcblxuICAgIGlmIChmcmVxdWVuY3lEYXRhSW50ZXJ2YWxJZC5jdXJyZW50KSB7XG4gICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChmcmVxdWVuY3lEYXRhSW50ZXJ2YWxJZC5jdXJyZW50KTtcbiAgICB9XG5cbiAgICBpZiAoY3VycmVudGx5UGxheWluZ0F1ZGlvQnVmZmVyLmN1cnJlbnQpIHtcbiAgICAgIGN1cnJlbnRseVBsYXlpbmdBdWRpb0J1ZmZlci5jdXJyZW50LmRpc2Nvbm5lY3QoKTtcbiAgICAgIGN1cnJlbnRseVBsYXlpbmdBdWRpb0J1ZmZlci5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoYW5hbHlzZXJOb2RlLmN1cnJlbnQpIHtcbiAgICAgIGFuYWx5c2VyTm9kZS5jdXJyZW50LmRpc2Nvbm5lY3QoKTtcbiAgICAgIGFuYWx5c2VyTm9kZS5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoYXVkaW9Db250ZXh0LmN1cnJlbnQpIHtcbiAgICAgIHZvaWQgYXVkaW9Db250ZXh0LmN1cnJlbnRcbiAgICAgICAgLmNsb3NlKClcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGF1ZGlvQ29udGV4dC5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAvLyAuY2xvc2UoKSByZWplY3RzIGlmIHRoZSBhdWRpbyBjb250ZXh0IGlzIGFscmVhZHkgY2xvc2VkLlxuICAgICAgICAgIC8vIFRoZXJlZm9yZSwgd2UganVzdCBuZWVkIHRvIGNhdGNoIHRoZSBlcnJvciwgYnV0IHdlIGRvbid0IG5lZWQgdG9cbiAgICAgICAgICAvLyBkbyBhbnl0aGluZyB3aXRoIGl0LlxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjbGlwUXVldWUuY3VycmVudCA9IFtdO1xuICAgIHNldEZmdChnZW5lcmF0ZUVtcHR5RmZ0KCkpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgY2xlYXJRdWV1ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoY3VycmVudGx5UGxheWluZ0F1ZGlvQnVmZmVyLmN1cnJlbnQpIHtcbiAgICAgIGN1cnJlbnRseVBsYXlpbmdBdWRpb0J1ZmZlci5jdXJyZW50LnN0b3AoKTtcbiAgICAgIGN1cnJlbnRseVBsYXlpbmdBdWRpb0J1ZmZlci5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG5cbiAgICBjbGlwUXVldWUuY3VycmVudCA9IFtdO1xuICAgIGlzUHJvY2Vzc2luZy5jdXJyZW50ID0gZmFsc2U7XG4gICAgc2V0SXNQbGF5aW5nKGZhbHNlKTtcbiAgICBzZXRGZnQoZ2VuZXJhdGVFbXB0eUZmdCgpKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IG11dGVBdWRpbyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoZ2Fpbk5vZGUuY3VycmVudCAmJiBhdWRpb0NvbnRleHQuY3VycmVudCkge1xuICAgICAgZ2Fpbk5vZGUuY3VycmVudC5nYWluLnNldFZhbHVlQXRUaW1lKDAsIGF1ZGlvQ29udGV4dC5jdXJyZW50LmN1cnJlbnRUaW1lKTtcbiAgICAgIHNldElzQXVkaW9NdXRlZCh0cnVlKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCB1bm11dGVBdWRpbyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoZ2Fpbk5vZGUuY3VycmVudCAmJiBhdWRpb0NvbnRleHQuY3VycmVudCkge1xuICAgICAgZ2Fpbk5vZGUuY3VycmVudC5nYWluLnNldFZhbHVlQXRUaW1lKDEsIGF1ZGlvQ29udGV4dC5jdXJyZW50LmN1cnJlbnRUaW1lKTtcbiAgICAgIHNldElzQXVkaW9NdXRlZChmYWxzZSk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgcmV0dXJuIHtcbiAgICBhZGRUb1F1ZXVlLFxuICAgIGZmdCxcbiAgICBpbml0UGxheWVyLFxuICAgIGlzUGxheWluZyxcbiAgICBpc0F1ZGlvTXV0ZWQsXG4gICAgbXV0ZUF1ZGlvLFxuICAgIHVubXV0ZUF1ZGlvLFxuICAgIHN0b3BBbGwsXG4gICAgY2xlYXJRdWV1ZSxcbiAgfTtcbn07XG4iLCIvLyBUaGlzIGZ1bmN0aW9uIGNvbnZlcnRzIGxpbmVhci1zY2FsZWQgZnJlcXVlbmN5IGRlY2liZWxzIGZyb20gYW4gQW5hbHlzZXJOb2RlJ3MgZnJlcXVuY3kgZGF0YSB0byBCYXJrIHNjYWxlIFtodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXJrX3NjYWxlXVxuLy8gVGhpcyBpbXBsZW1lbnRhdGlvbiB1c2VzIGEgc2ltcGxlIGFwcHJvYWNoIG9mIG1hcHBpbmcgaW5kaWNlcyBpbiB0aGUgbGluZWFyLXNjYWxlZCBhcnJheSB0byB0aGUgY2xvc2VzdFxuLy8gQmFyayBzY2FsZSBjZW50ZXIgZnJlcXVlbmN5IGFuZCBpcyBub3QgaW50ZW5kZWQgdG8gYmUgYW4gYWNjdXJhdGUgcmVwcmVzZW50YXRpb24sIGJ1dCByYXRoZXIgXCJjbG9zZS1lbm91Z2hcIiBmb3IgdmlzdWFsaXphdGlvbiBwdXJwb3Nlc1xuY29uc3QgYmFya0NlbnRlckZyZXF1ZW5jaWVzID0gW1xuICA1MCwgMTUwLCAyNTAsIDM1MCwgNDUwLCA1NzAsIDcwMCwgODQwLCAxMDAwLCAxMTcwLCAxMzcwLCAxNjAwLCAxODUwLCAyMTUwLFxuICAyNTAwLCAyOTAwLCAzNDAwLCA0MDAwLCA0ODAwLCA1ODAwLCA3MDAwLCA4NTAwLCAxMDUwMCwgMTM1MDAsXG5dOyAvLyBDZW50ZXIgZnJlcXVlbmN5IHZhbHVlIGluIEh6XG5cbi8vIE1pbi9tYXggdmFsdWVzIGZyb20gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0FuYWx5c2VyTm9kZS9nZXRCeXRlRnJlcXVlbmN5RGF0YVxuY29uc3QgbWluVmFsdWUgPSAwO1xuY29uc3QgbWF4VmFsdWUgPSAyNTU7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0TGluZWFyRnJlcXVlbmNpZXNUb0JhcmsoXG4gIGxpbmVhckRhdGE6IFVpbnQ4QXJyYXksXG4gIHNhbXBsZVJhdGU6IG51bWJlcixcbik6IG51bWJlcltdIHtcbiAgY29uc3QgbWF4RnJlcXVlbmN5ID0gc2FtcGxlUmF0ZSAvIDI7XG4gIGNvbnN0IGZyZXF1ZW5jeVJlc29sdXRpb24gPSBtYXhGcmVxdWVuY3kgLyBsaW5lYXJEYXRhLmxlbmd0aDtcblxuICBjb25zdCBiYXJrRnJlcXVlbmNpZXMgPSBiYXJrQ2VudGVyRnJlcXVlbmNpZXMubWFwKChiYXJrRnJlcSkgPT4ge1xuICAgIGNvbnN0IGxpbmVhckRhdGFJbmRleCA9IE1hdGgucm91bmQoYmFya0ZyZXEgLyBmcmVxdWVuY3lSZXNvbHV0aW9uKTtcbiAgICBpZiAobGluZWFyRGF0YUluZGV4ID49IDAgJiYgbGluZWFyRGF0YUluZGV4IDwgbGluZWFyRGF0YS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICgoKGxpbmVhckRhdGFbbGluZWFyRGF0YUluZGV4XSA/PyAwKSAtIG1pblZhbHVlKSAvXG4gICAgICAgICAgKG1heFZhbHVlIC0gbWluVmFsdWUpKSAqXG4gICAgICAgIDJcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGJhcmtGcmVxdWVuY2llcztcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUVtcHR5RmZ0KCk6IG51bWJlcltdIHtcbiAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IDI0IH0pLm1hcCgoKSA9PiAwKTtcbn1cbiIsIi8vIGNzcGVsbDppZ25vcmUgZGF0YWF2YWlsYWJsZVxuaW1wb3J0IHR5cGUgeyBNaW1lVHlwZSB9IGZyb20gJ0BodW1lYWkvdm9pY2UnO1xuaW1wb3J0IHsgZ2V0U3VwcG9ydGVkTWltZVR5cGUgfSBmcm9tICdAaHVtZWFpL3ZvaWNlJztcbmltcG9ydCBNZXlkYSBmcm9tICdtZXlkYSc7XG5pbXBvcnQgdHlwZSB7IE1leWRhRmVhdHVyZXNPYmplY3QgfSBmcm9tICdtZXlkYSc7XG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHR5cGUgeyBNdXRhYmxlUmVmT2JqZWN0IH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBnZW5lcmF0ZUVtcHR5RmZ0IH0gZnJvbSAnLi9nZW5lcmF0ZUVtcHR5RmZ0JztcblxuZXhwb3J0IHR5cGUgTWljcm9waG9uZVByb3BzID0ge1xuICBzdHJlYW1SZWY6IE11dGFibGVSZWZPYmplY3Q8TWVkaWFTdHJlYW0gfCBudWxsPjtcbiAgb25BdWRpb0NhcHR1cmVkOiAoYjogQXJyYXlCdWZmZXIpID0+IHZvaWQ7XG4gIG9uU3RhcnRSZWNvcmRpbmc/OiAoKSA9PiB2b2lkO1xuICBvblN0b3BSZWNvcmRpbmc/OiAoKSA9PiB2b2lkO1xuICBvbkVycm9yOiAobWVzc2FnZTogc3RyaW5nKSA9PiB2b2lkO1xufTtcblxuZXhwb3J0IGNvbnN0IHVzZU1pY3JvcGhvbmUgPSAocHJvcHM6IE1pY3JvcGhvbmVQcm9wcykgPT4ge1xuICBjb25zdCB7IHN0cmVhbVJlZiwgb25BdWRpb0NhcHR1cmVkLCBvbkVycm9yIH0gPSBwcm9wcztcbiAgY29uc3QgW2lzTXV0ZWQsIHNldElzTXV0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBpc011dGVkUmVmID0gdXNlUmVmKGlzTXV0ZWQpO1xuXG4gIGNvbnN0IFtmZnQsIHNldEZmdF0gPSB1c2VTdGF0ZTxudW1iZXJbXT4oZ2VuZXJhdGVFbXB0eUZmdCgpKTtcbiAgY29uc3QgY3VycmVudEFuYWx5emVyID0gdXNlUmVmPE1leWRhLk1leWRhQW5hbHl6ZXIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgbWltZVR5cGVSZWYgPSB1c2VSZWY8TWltZVR5cGUgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBhdWRpb0NvbnRleHQgPSB1c2VSZWY8QXVkaW9Db250ZXh0IHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgcmVjb3JkZXIgPSB1c2VSZWY8TWVkaWFSZWNvcmRlciB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IHNlbmRBdWRpbyA9IHVzZVJlZihvbkF1ZGlvQ2FwdHVyZWQpO1xuICBzZW5kQXVkaW8uY3VycmVudCA9IG9uQXVkaW9DYXB0dXJlZDtcblxuICBjb25zdCBkYXRhSGFuZGxlciA9IHVzZUNhbGxiYWNrKChldmVudDogQmxvYkV2ZW50KSA9PiB7XG4gICAgY29uc3QgYmxvYiA9IGV2ZW50LmRhdGE7XG5cbiAgICBibG9iXG4gICAgICAuYXJyYXlCdWZmZXIoKVxuICAgICAgLnRoZW4oKGJ1ZmZlcikgPT4ge1xuICAgICAgICBpZiAoYnVmZmVyLmJ5dGVMZW5ndGggPiAwKSB7XG4gICAgICAgICAgc2VuZEF1ZGlvLmN1cnJlbnQ/LihidWZmZXIpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgc3RhcnQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3Qgc3RyZWFtID0gc3RyZWFtUmVmLmN1cnJlbnQ7XG4gICAgaWYgKCFzdHJlYW0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gc3RyZWFtIGNvbm5lY3RlZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRleHQgPSBuZXcgQXVkaW9Db250ZXh0KCk7XG4gICAgYXVkaW9Db250ZXh0LmN1cnJlbnQgPSBjb250ZXh0O1xuICAgIGNvbnN0IGlucHV0ID0gY29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShzdHJlYW0pO1xuXG4gICAgdHJ5IHtcbiAgICAgIGN1cnJlbnRBbmFseXplci5jdXJyZW50ID0gTWV5ZGEuY3JlYXRlTWV5ZGFBbmFseXplcih7XG4gICAgICAgIGF1ZGlvQ29udGV4dDogY29udGV4dCxcbiAgICAgICAgc291cmNlOiBpbnB1dCxcbiAgICAgICAgZmVhdHVyZUV4dHJhY3RvcnM6IFsnbG91ZG5lc3MnXSxcbiAgICAgICAgY2FsbGJhY2s6IChmZWF0dXJlczogTWV5ZGFGZWF0dXJlc09iamVjdCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG5ld0ZmdCA9IGZlYXR1cmVzLmxvdWRuZXNzLnNwZWNpZmljIHx8IFtdO1xuICAgICAgICAgIHNldEZmdCgoKSA9PiBBcnJheS5mcm9tKG5ld0ZmdCkpO1xuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGN1cnJlbnRBbmFseXplci5jdXJyZW50LnN0YXJ0KCk7XG4gICAgfSBjYXRjaCAoZTogdW5rbm93bikge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGUgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBzdGFydCBtaWMgYW5hbHl6ZXI6ICR7bWVzc2FnZX1gKTtcbiAgICB9XG4gICAgY29uc3QgbWltZVR5cGUgPSBtaW1lVHlwZVJlZi5jdXJyZW50O1xuICAgIGlmICghbWltZVR5cGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gTWltZVR5cGUgc3BlY2lmaWVkJyk7XG4gICAgfVxuXG4gICAgcmVjb3JkZXIuY3VycmVudCA9IG5ldyBNZWRpYVJlY29yZGVyKHN0cmVhbSwge1xuICAgICAgbWltZVR5cGUsXG4gICAgfSk7XG4gICAgcmVjb3JkZXIuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKCdkYXRhYXZhaWxhYmxlJywgZGF0YUhhbmRsZXIpO1xuICAgIHJlY29yZGVyLmN1cnJlbnQuc3RhcnQoMTAwKTtcbiAgfSwgW2RhdGFIYW5kbGVyLCBzdHJlYW1SZWYsIG1pbWVUeXBlUmVmXSk7XG5cbiAgY29uc3Qgc3RvcCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKGN1cnJlbnRBbmFseXplci5jdXJyZW50KSB7XG4gICAgICAgIGN1cnJlbnRBbmFseXplci5jdXJyZW50LnN0b3AoKTtcbiAgICAgICAgY3VycmVudEFuYWx5emVyLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAoYXVkaW9Db250ZXh0LmN1cnJlbnQpIHtcbiAgICAgICAgdm9pZCBhdWRpb0NvbnRleHQuY3VycmVudFxuICAgICAgICAgIC5jbG9zZSgpXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgYXVkaW9Db250ZXh0LmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIC5jbG9zZSgpIHJlamVjdHMgaWYgdGhlIGF1ZGlvIGNvbnRleHQgaXMgYWxyZWFkeSBjbG9zZWQuXG4gICAgICAgICAgICAvLyBUaGVyZWZvcmUsIHdlIGp1c3QgbmVlZCB0byBjYXRjaCB0aGUgZXJyb3IsIGJ1dCB3ZSBkb24ndCBuZWVkIHRvXG4gICAgICAgICAgICAvLyBkbyBhbnl0aGluZyB3aXRoIGl0LlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJlY29yZGVyLmN1cnJlbnQ/LnN0b3AoKTtcbiAgICAgIHJlY29yZGVyLmN1cnJlbnQ/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RhdGFhdmFpbGFibGUnLCBkYXRhSGFuZGxlcik7XG4gICAgICByZWNvcmRlci5jdXJyZW50ID0gbnVsbDtcbiAgICAgIHN0cmVhbVJlZi5jdXJyZW50Py5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4gdHJhY2suc3RvcCgpKTtcblxuICAgICAgc2V0SXNNdXRlZChmYWxzZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGUgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgIG9uRXJyb3IoYEVycm9yIHN0b3BwaW5nIG1pY3JvcGhvbmU6ICR7bWVzc2FnZX1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgdm9pZCB0cnVlO1xuICAgIH1cbiAgfSwgW2RhdGFIYW5kbGVyLCBvbkVycm9yLCBzdHJlYW1SZWZdKTtcblxuICBjb25zdCBtdXRlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChjdXJyZW50QW5hbHl6ZXIuY3VycmVudCkge1xuICAgICAgY3VycmVudEFuYWx5emVyLmN1cnJlbnQuc3RvcCgpO1xuICAgICAgc2V0RmZ0KGdlbmVyYXRlRW1wdHlGZnQoKSk7XG4gICAgfVxuXG4gICAgc3RyZWFtUmVmLmN1cnJlbnQ/LmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB7XG4gICAgICB0cmFjay5lbmFibGVkID0gZmFsc2U7XG4gICAgfSk7XG5cbiAgICBpc011dGVkUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgIHNldElzTXV0ZWQodHJ1ZSk7XG4gIH0sIFtzdHJlYW1SZWZdKTtcblxuICBjb25zdCB1bm11dGUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGN1cnJlbnRBbmFseXplci5jdXJyZW50KSB7XG4gICAgICBjdXJyZW50QW5hbHl6ZXIuY3VycmVudC5zdGFydCgpO1xuICAgIH1cblxuICAgIHN0cmVhbVJlZi5jdXJyZW50Py5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4ge1xuICAgICAgdHJhY2suZW5hYmxlZCA9IHRydWU7XG4gICAgfSk7XG5cbiAgICBpc011dGVkUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICBzZXRJc011dGVkKGZhbHNlKTtcbiAgfSwgW3N0cmVhbVJlZl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlY29yZGVyLmN1cnJlbnQ/LnN0b3AoKTtcbiAgICAgICAgcmVjb3JkZXIuY3VycmVudD8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignZGF0YWF2YWlsYWJsZScsIGRhdGFIYW5kbGVyKTtcblxuICAgICAgICBpZiAoY3VycmVudEFuYWx5emVyLmN1cnJlbnQpIHtcbiAgICAgICAgICBjdXJyZW50QW5hbHl6ZXIuY3VycmVudC5zdG9wKCk7XG4gICAgICAgICAgY3VycmVudEFuYWx5emVyLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RyZWFtUmVmLmN1cnJlbnQ/LmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB0cmFjay5zdG9wKCkpO1xuICAgICAgICBzdHJlYW1SZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICB2b2lkIHRydWU7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2RhdGFIYW5kbGVyLCBzdHJlYW1SZWZdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IG1pbWVUeXBlUmVzdWx0ID0gZ2V0U3VwcG9ydGVkTWltZVR5cGUoKTtcbiAgICBpZiAobWltZVR5cGVSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgbWltZVR5cGVSZWYuY3VycmVudCA9IG1pbWVUeXBlUmVzdWx0Lm1pbWVUeXBlO1xuICAgIH0gZWxzZSB7XG4gICAgICBvbkVycm9yKG1pbWVUeXBlUmVzdWx0LmVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfSwgW29uRXJyb3JdKTtcblxuICByZXR1cm4ge1xuICAgIHN0YXJ0LFxuICAgIHN0b3AsXG4gICAgbXV0ZSxcbiAgICB1bm11dGUsXG4gICAgaXNNdXRlZCxcbiAgICBmZnQsXG4gIH07XG59O1xuIiwiaW1wb3J0IHtcbiAgQXNzaXN0YW50VHJhbnNjcmlwdE1lc3NhZ2UsXG4gIEF1ZGlvT3V0cHV0TWVzc2FnZSxcbiAgQ2hhdE1ldGFkYXRhTWVzc2FnZSxcbiAgY3JlYXRlU29ja2V0Q29uZmlnLFxuICBKU09ORXJyb3JNZXNzYWdlLFxuICBKU09OTWVzc2FnZSxcbiAgU2Vzc2lvblNldHRpbmdzLFxuICBUb29sQ2FsbCxcbiAgVG9vbEVycm9yLFxuICBUb29sUmVzcG9uc2UsXG4gIFVzZXJJbnRlcnJ1cHRpb25NZXNzYWdlLFxuICBVc2VyVHJhbnNjcmlwdE1lc3NhZ2UsXG4gIFZvaWNlQ2xpZW50LFxuICBWb2ljZUV2ZW50TWFwLFxufSBmcm9tICdAaHVtZWFpL3ZvaWNlJztcbmltcG9ydCBSZWFjdCwge1xuICBjcmVhdGVDb250ZXh0LFxuICBGQyxcbiAgUHJvcHNXaXRoQ2hpbGRyZW4sXG4gIHVzZUNhbGxiYWNrLFxuICB1c2VDb250ZXh0LFxuICB1c2VFZmZlY3QsXG4gIHVzZU1lbW8sXG4gIHVzZVJlZixcbiAgdXNlU3RhdGUsXG59IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgQ29ubmVjdGlvbk1lc3NhZ2UgfSBmcm9tICcuL2Nvbm5lY3Rpb24tbWVzc2FnZSc7XG5pbXBvcnQgeyBub29wIH0gZnJvbSAnLi9ub29wJztcbmltcG9ydCB7IHVzZUNhbGxEdXJhdGlvbiB9IGZyb20gJy4vdXNlQ2FsbER1cmF0aW9uJztcbmltcG9ydCB7IHVzZUVuY29kaW5nIH0gZnJvbSAnLi91c2VFbmNvZGluZyc7XG5pbXBvcnQgeyB1c2VNZXNzYWdlcyB9IGZyb20gJy4vdXNlTWVzc2FnZXMnO1xuaW1wb3J0IHsgdXNlTWljcm9waG9uZSB9IGZyb20gJy4vdXNlTWljcm9waG9uZSc7XG5pbXBvcnQgeyB1c2VTb3VuZFBsYXllciB9IGZyb20gJy4vdXNlU291bmRQbGF5ZXInO1xuaW1wb3J0IHsgdXNlVG9vbFN0YXR1cyB9IGZyb20gJy4vdXNlVG9vbFN0YXR1cyc7XG5pbXBvcnQge1xuICBUb29sQ2FsbEhhbmRsZXIsXG4gIHVzZVZvaWNlQ2xpZW50LFxuICB0eXBlIFZvaWNlUmVhZHlTdGF0ZSxcbn0gZnJvbSAnLi91c2VWb2ljZUNsaWVudCc7XG5cbnR5cGUgVm9pY2VFcnJvciA9XG4gIHwgeyB0eXBlOiAnc29ja2V0X2Vycm9yJzsgbWVzc2FnZTogc3RyaW5nOyBlcnJvcj86IEVycm9yIH1cbiAgfCB7IHR5cGU6ICdhdWRpb19lcnJvcic7IG1lc3NhZ2U6IHN0cmluZzsgZXJyb3I/OiBFcnJvciB9XG4gIHwgeyB0eXBlOiAnbWljX2Vycm9yJzsgbWVzc2FnZTogc3RyaW5nOyBlcnJvcj86IEVycm9yIH07XG5cbnR5cGUgVm9pY2VTdGF0dXMgPVxuICB8IHtcbiAgICAgIHZhbHVlOiAnZGlzY29ubmVjdGVkJyB8ICdjb25uZWN0aW5nJyB8ICdjb25uZWN0ZWQnO1xuICAgICAgcmVhc29uPzogbmV2ZXI7XG4gICAgfVxuICB8IHtcbiAgICAgIHZhbHVlOiAnZXJyb3InO1xuICAgICAgcmVhc29uOiBzdHJpbmc7XG4gICAgfTtcblxuZXhwb3J0IHR5cGUgVm9pY2VDb250ZXh0VHlwZSA9IHtcbiAgY29ubmVjdDogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgZGlzY29ubmVjdDogKCkgPT4gdm9pZDtcbiAgZmZ0OiBudW1iZXJbXTtcbiAgaXNNdXRlZDogYm9vbGVhbjtcbiAgaXNBdWRpb011dGVkOiBib29sZWFuO1xuICBpc1BsYXlpbmc6IGJvb2xlYW47XG4gIG1lc3NhZ2VzOiAoXG4gICAgfCBVc2VyVHJhbnNjcmlwdE1lc3NhZ2VcbiAgICB8IEFzc2lzdGFudFRyYW5zY3JpcHRNZXNzYWdlXG4gICAgfCBDb25uZWN0aW9uTWVzc2FnZVxuICAgIHwgVXNlckludGVycnVwdGlvbk1lc3NhZ2VcbiAgICB8IEpTT05FcnJvck1lc3NhZ2VcbiAgICB8IFRvb2xDYWxsXG4gICAgfCBUb29sUmVzcG9uc2VcbiAgICB8IFRvb2xFcnJvclxuICAgIHwgQ2hhdE1ldGFkYXRhTWVzc2FnZVxuICApW107XG4gIGxhc3RWb2ljZU1lc3NhZ2U6IEFzc2lzdGFudFRyYW5zY3JpcHRNZXNzYWdlIHwgbnVsbDtcbiAgbGFzdFVzZXJNZXNzYWdlOiBVc2VyVHJhbnNjcmlwdE1lc3NhZ2UgfCBudWxsO1xuICBjbGVhck1lc3NhZ2VzOiAoKSA9PiB2b2lkO1xuICBtdXRlOiAoKSA9PiB2b2lkO1xuICB1bm11dGU6ICgpID0+IHZvaWQ7XG4gIG11dGVBdWRpbzogKCkgPT4gdm9pZDtcbiAgdW5tdXRlQXVkaW86ICgpID0+IHZvaWQ7XG4gIHJlYWR5U3RhdGU6IFZvaWNlUmVhZHlTdGF0ZTtcbiAgc2VuZFVzZXJJbnB1dDogVm9pY2VDbGllbnRbJ3NlbmRVc2VySW5wdXQnXTtcbiAgc2VuZEFzc2lzdGFudElucHV0OiBWb2ljZUNsaWVudFsnc2VuZEFzc2lzdGFudElucHV0J107XG4gIHNlbmRTZXNzaW9uU2V0dGluZ3M6IFZvaWNlQ2xpZW50WydzZW5kU2Vzc2lvblNldHRpbmdzJ107XG4gIHNlbmRUb29sTWVzc2FnZTogVm9pY2VDbGllbnRbJ3NlbmRUb29sTWVzc2FnZSddO1xuICBzZW5kUGF1c2VBc3Npc3RhbnRNZXNzYWdlOiBWb2ljZUNsaWVudFsnc2VuZFBhdXNlQXNzaXN0YW50TWVzc2FnZSddO1xuICBzZW5kUmVzdW1lQXNzaXN0YW50TWVzc2FnZTogVm9pY2VDbGllbnRbJ3NlbmRSZXN1bWVBc3Npc3RhbnRNZXNzYWdlJ107XG4gIHN0YXR1czogVm9pY2VTdGF0dXM7XG4gIG1pY0ZmdDogbnVtYmVyW107XG4gIGVycm9yOiBWb2ljZUVycm9yIHwgbnVsbDtcbiAgaXNBdWRpb0Vycm9yOiBib29sZWFuO1xuICBpc0Vycm9yOiBib29sZWFuO1xuICBpc01pY3JvcGhvbmVFcnJvcjogYm9vbGVhbjtcbiAgaXNTb2NrZXRFcnJvcjogYm9vbGVhbjtcbiAgY2FsbER1cmF0aW9uVGltZXN0YW1wOiBzdHJpbmcgfCBudWxsO1xuICB0b29sU3RhdHVzU3RvcmU6IFJldHVyblR5cGU8dHlwZW9mIHVzZVRvb2xTdGF0dXM+WydzdG9yZSddO1xuICBjaGF0TWV0YWRhdGE6IENoYXRNZXRhZGF0YU1lc3NhZ2UgfCBudWxsO1xufTtcblxuY29uc3QgVm9pY2VDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxWb2ljZUNvbnRleHRUeXBlIHwgbnVsbD4obnVsbCk7XG5cbmV4cG9ydCB0eXBlIFZvaWNlUHJvdmlkZXJQcm9wcyA9IFByb3BzV2l0aENoaWxkcmVuPFxuICBQYXJhbWV0ZXJzPHR5cGVvZiBjcmVhdGVTb2NrZXRDb25maWc+WzBdXG4+ICYge1xuICBzZXNzaW9uU2V0dGluZ3M/OiBTZXNzaW9uU2V0dGluZ3M7XG4gIG9uTWVzc2FnZT86IChtZXNzYWdlOiBKU09OTWVzc2FnZSkgPT4gdm9pZDtcbiAgb25FcnJvcj86IChlcnI6IFZvaWNlRXJyb3IpID0+IHZvaWQ7XG4gIG9uT3Blbj86ICgpID0+IHZvaWQ7XG4gIG9uQ2xvc2U/OiBWb2ljZUV2ZW50TWFwWydjbG9zZSddO1xuICBvblRvb2xDYWxsPzogVG9vbENhbGxIYW5kbGVyO1xuICAvKipcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKiBAZGVzY3JpcHRpb24gQ2xlYXIgbWVzc2FnZXMgd2hlbiB0aGUgdm9pY2UgaXMgZGlzY29ubmVjdGVkLlxuICAgKi9cbiAgY2xlYXJNZXNzYWdlc09uRGlzY29ubmVjdD86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBAZGVmYXVsdCAxMDBcbiAgICogQGRlc2NyaXB0aW9uIFRoZSBtYXhpbXVtIG51bWJlciBvZiBtZXNzYWdlcyB0byBrZWVwIGluIG1lbW9yeS5cbiAgICovXG4gIG1lc3NhZ2VIaXN0b3J5TGltaXQ/OiBudW1iZXI7XG59O1xuXG5leHBvcnQgY29uc3QgdXNlVm9pY2UgPSAoKSA9PiB7XG4gIGNvbnN0IGN0eCA9IHVzZUNvbnRleHQoVm9pY2VDb250ZXh0KTtcbiAgaWYgKCFjdHgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZVZvaWNlIG11c3QgYmUgdXNlZCB3aXRoaW4gYW4gVm9pY2VQcm92aWRlcicpO1xuICB9XG4gIHJldHVybiBjdHg7XG59O1xuXG5leHBvcnQgY29uc3QgVm9pY2VQcm92aWRlcjogRkM8Vm9pY2VQcm92aWRlclByb3BzPiA9ICh7XG4gIGNoaWxkcmVuLFxuICBjbGVhck1lc3NhZ2VzT25EaXNjb25uZWN0ID0gdHJ1ZSxcbiAgbWVzc2FnZUhpc3RvcnlMaW1pdCA9IDEwMCxcbiAgc2Vzc2lvblNldHRpbmdzLFxuICAuLi5wcm9wc1xufSkgPT4ge1xuICBjb25zdCB7XG4gICAgdGltZXN0YW1wOiBjYWxsRHVyYXRpb25UaW1lc3RhbXAsXG4gICAgc3RhcnQ6IHN0YXJ0VGltZXIsXG4gICAgc3RvcDogc3RvcFRpbWVyLFxuICB9ID0gdXNlQ2FsbER1cmF0aW9uKCk7XG5cbiAgY29uc3QgW3N0YXR1cywgc2V0U3RhdHVzXSA9IHVzZVN0YXRlPFZvaWNlU3RhdHVzPih7XG4gICAgdmFsdWU6ICdkaXNjb25uZWN0ZWQnLFxuICB9KTtcblxuICAvLyBlcnJvciBoYW5kbGluZ1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPFZvaWNlRXJyb3IgfCBudWxsPihudWxsKTtcbiAgY29uc3QgaXNFcnJvciA9IGVycm9yICE9PSBudWxsO1xuICBjb25zdCBpc01pY3JvcGhvbmVFcnJvciA9IGVycm9yPy50eXBlID09PSAnbWljX2Vycm9yJztcbiAgY29uc3QgaXNTb2NrZXRFcnJvciA9IGVycm9yPy50eXBlID09PSAnc29ja2V0X2Vycm9yJztcbiAgY29uc3QgaXNBdWRpb0Vycm9yID0gZXJyb3I/LnR5cGUgPT09ICdhdWRpb19lcnJvcic7XG5cbiAgY29uc3Qgb25FcnJvciA9IHVzZVJlZihwcm9wcy5vbkVycm9yID8/IG5vb3ApO1xuICBvbkVycm9yLmN1cnJlbnQgPSBwcm9wcy5vbkVycm9yID8/IG5vb3A7XG5cbiAgY29uc3Qgb25DbG9zZSA9IHVzZVJlZihwcm9wcy5vbkNsb3NlID8/IG5vb3ApO1xuICBvbkNsb3NlLmN1cnJlbnQgPSBwcm9wcy5vbkNsb3NlID8/IG5vb3A7XG5cbiAgY29uc3QgdG9vbFN0YXR1cyA9IHVzZVRvb2xTdGF0dXMoKTtcblxuICBjb25zdCBtZXNzYWdlU3RvcmUgPSB1c2VNZXNzYWdlcyh7XG4gICAgc2VuZE1lc3NhZ2VUb1BhcmVudDogcHJvcHMub25NZXNzYWdlLFxuICAgIG1lc3NhZ2VIaXN0b3J5TGltaXQsXG4gIH0pO1xuXG4gIGNvbnN0IHVwZGF0ZUVycm9yID0gdXNlQ2FsbGJhY2soKGVycjogVm9pY2VFcnJvciB8IG51bGwpID0+IHtcbiAgICBzZXRFcnJvcihlcnIpO1xuICAgIGlmIChlcnIgIT09IG51bGwpIHtcbiAgICAgIG9uRXJyb3IuY3VycmVudD8uKGVycik7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgY29uc3Qgb25DbGllbnRFcnJvcjogTm9uTnVsbGFibGU8XG4gICAgUGFyYW1ldGVyczx0eXBlb2YgdXNlVm9pY2VDbGllbnQ+WzBdWydvbkVycm9yJ11cbiAgPiA9IHVzZUNhbGxiYWNrKFxuICAgIChtZXNzYWdlLCBlcnIpID0+IHtcbiAgICAgIHN0b3BUaW1lcigpO1xuICAgICAgdXBkYXRlRXJyb3IoeyB0eXBlOiAnc29ja2V0X2Vycm9yJywgbWVzc2FnZSwgZXJyb3I6IGVyciB9KTtcbiAgICB9LFxuICAgIFtzdG9wVGltZXIsIHVwZGF0ZUVycm9yXSxcbiAgKTtcblxuICBjb25zdCBjb25maWcgPSBjcmVhdGVTb2NrZXRDb25maWcocHJvcHMpO1xuXG4gIGNvbnN0IHBsYXllciA9IHVzZVNvdW5kUGxheWVyKHtcbiAgICBvbkVycm9yOiAobWVzc2FnZSkgPT4ge1xuICAgICAgdXBkYXRlRXJyb3IoeyB0eXBlOiAnYXVkaW9fZXJyb3InLCBtZXNzYWdlIH0pO1xuICAgIH0sXG4gICAgb25QbGF5QXVkaW86IChpZDogc3RyaW5nKSA9PiB7XG4gICAgICBtZXNzYWdlU3RvcmUub25QbGF5QXVkaW8oaWQpO1xuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IHsgc3RyZWFtUmVmLCBnZXRTdHJlYW0sIHBlcm1pc3Npb246IG1pY1Blcm1pc3Npb24gfSA9IHVzZUVuY29kaW5nKCk7XG5cbiAgY29uc3QgY2xpZW50ID0gdXNlVm9pY2VDbGllbnQoe1xuICAgIG9uQXVkaW9NZXNzYWdlOiAobWVzc2FnZTogQXVkaW9PdXRwdXRNZXNzYWdlKSA9PiB7XG4gICAgICBwbGF5ZXIuYWRkVG9RdWV1ZShtZXNzYWdlKTtcbiAgICB9LFxuICAgIG9uTWVzc2FnZTogdXNlQ2FsbGJhY2soXG4gICAgICAoXG4gICAgICAgIG1lc3NhZ2U6XG4gICAgICAgICAgfCBVc2VyVHJhbnNjcmlwdE1lc3NhZ2VcbiAgICAgICAgICB8IEFzc2lzdGFudFRyYW5zY3JpcHRNZXNzYWdlXG4gICAgICAgICAgfCBVc2VySW50ZXJydXB0aW9uTWVzc2FnZVxuICAgICAgICAgIHwgSlNPTkVycm9yTWVzc2FnZVxuICAgICAgICAgIHwgVG9vbENhbGxcbiAgICAgICAgICB8IFRvb2xSZXNwb25zZVxuICAgICAgICAgIHwgVG9vbEVycm9yXG4gICAgICAgICAgfCBDaGF0TWV0YWRhdGFNZXNzYWdlLFxuICAgICAgKSA9PiB7XG4gICAgICAgIC8vIHN0b3JlIG1lc3NhZ2VcbiAgICAgICAgbWVzc2FnZVN0b3JlLm9uTWVzc2FnZShtZXNzYWdlKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgbWVzc2FnZS50eXBlID09PSAndXNlcl9pbnRlcnJ1cHRpb24nIHx8XG4gICAgICAgICAgbWVzc2FnZS50eXBlID09PSAndXNlcl9tZXNzYWdlJ1xuICAgICAgICApIHtcbiAgICAgICAgICBwbGF5ZXIuY2xlYXJRdWV1ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIG1lc3NhZ2UudHlwZSA9PT0gJ3Rvb2xfY2FsbCcgfHxcbiAgICAgICAgICBtZXNzYWdlLnR5cGUgPT09ICd0b29sX3Jlc3BvbnNlJyB8fFxuICAgICAgICAgIG1lc3NhZ2UudHlwZSA9PT0gJ3Rvb2xfZXJyb3InXG4gICAgICAgICkge1xuICAgICAgICAgIHRvb2xTdGF0dXMuYWRkVG9TdG9yZShtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIFttZXNzYWdlU3RvcmUsIHBsYXllciwgdG9vbFN0YXR1c10sXG4gICAgKSxcbiAgICBvbkVycm9yOiBvbkNsaWVudEVycm9yLFxuICAgIG9uT3BlbjogdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgc3RhcnRUaW1lcigpO1xuICAgICAgbWVzc2FnZVN0b3JlLmNyZWF0ZUNvbm5lY3RNZXNzYWdlKCk7XG4gICAgICBwcm9wcy5vbk9wZW4/LigpO1xuICAgIH0sIFttZXNzYWdlU3RvcmUsIHByb3BzLCBzdGFydFRpbWVyXSksXG4gICAgb25DbG9zZTogdXNlQ2FsbGJhY2s8Tm9uTnVsbGFibGU8Vm9pY2VFdmVudE1hcFsnY2xvc2UnXT4+KFxuICAgICAgKGV2ZW50KSA9PiB7XG4gICAgICAgIHN0b3BUaW1lcigpO1xuICAgICAgICBtZXNzYWdlU3RvcmUuY3JlYXRlRGlzY29ubmVjdE1lc3NhZ2UoKTtcbiAgICAgICAgb25DbG9zZS5jdXJyZW50Py4oZXZlbnQpO1xuICAgICAgfSxcbiAgICAgIFttZXNzYWdlU3RvcmUsIHN0b3BUaW1lcl0sXG4gICAgKSxcbiAgICBvblRvb2xDYWxsOiBwcm9wcy5vblRvb2xDYWxsLFxuICB9KTtcblxuICBjb25zdCBtaWMgPSB1c2VNaWNyb3Bob25lKHtcbiAgICBzdHJlYW1SZWYsXG4gICAgb25BdWRpb0NhcHR1cmVkOiB1c2VDYWxsYmFjaygoYXJyYXlCdWZmZXIpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNsaWVudC5zZW5kQXVkaW8oYXJyYXlCdWZmZXIpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gZSBpbnN0YW5jZW9mIEVycm9yID8gZS5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgICB1cGRhdGVFcnJvcih7IHR5cGU6ICdzb2NrZXRfZXJyb3InLCBtZXNzYWdlIH0pO1xuICAgICAgfVxuICAgIH0sIFtdKSxcbiAgICBvbkVycm9yOiB1c2VDYWxsYmFjayhcbiAgICAgIChtZXNzYWdlKSA9PiB7XG4gICAgICAgIHVwZGF0ZUVycm9yKHsgdHlwZTogJ21pY19lcnJvcicsIG1lc3NhZ2UgfSk7XG4gICAgICB9LFxuICAgICAgW3VwZGF0ZUVycm9yXSxcbiAgICApLFxuICB9KTtcblxuICBjb25zdCBjb25uZWN0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHVwZGF0ZUVycm9yKG51bGwpO1xuICAgIHNldFN0YXR1cyh7IHZhbHVlOiAnY29ubmVjdGluZycgfSk7XG4gICAgY29uc3QgcGVybWlzc2lvbiA9IGF3YWl0IGdldFN0cmVhbSgpO1xuXG4gICAgaWYgKHBlcm1pc3Npb24gPT09ICdkZW5pZWQnKSB7XG4gICAgICBjb25zdCBlcnJvcjogVm9pY2VFcnJvciA9IHtcbiAgICAgICAgdHlwZTogJ21pY19lcnJvcicsXG4gICAgICAgIG1lc3NhZ2U6ICdNaWNyb3Bob25lIHBlcm1pc3Npb24gZGVuaWVkJyxcbiAgICAgIH07XG4gICAgICB1cGRhdGVFcnJvcihlcnJvcik7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBjbGllbnRcbiAgICAgICAgLmNvbm5lY3Qoe1xuICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHNlc3Npb25TZXR0aW5ncyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhzZXNzaW9uU2V0dGluZ3MpLmxlbmd0aCA+IDBcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNsaWVudC5zZW5kU2Vzc2lvblNldHRpbmdzKHNlc3Npb25TZXR0aW5ncyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zdCBlcnJvcjogVm9pY2VFcnJvciA9IHtcbiAgICAgICAgdHlwZTogJ3NvY2tldF9lcnJvcicsXG4gICAgICAgIG1lc3NhZ2U6ICdXZSBjb3VsZCBub3QgY29ubmVjdCB0byB0aGUgdm9pY2UuIFBsZWFzZSB0cnkgYWdhaW4uJyxcbiAgICAgIH07XG4gICAgICB1cGRhdGVFcnJvcihlcnJvcik7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBbbWljUHJvbWlzZSwgcGxheWVyUHJvbWlzZV0gPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoW1xuICAgICAgICBtaWMuc3RhcnQoKSxcbiAgICAgICAgcGxheWVyLmluaXRQbGF5ZXIoKSxcbiAgICAgIF0pO1xuXG4gICAgICBpZiAoXG4gICAgICAgIG1pY1Byb21pc2Uuc3RhdHVzID09PSAnZnVsZmlsbGVkJyAmJlxuICAgICAgICBwbGF5ZXJQcm9taXNlLnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCdcbiAgICAgICkge1xuICAgICAgICBzZXRTdGF0dXMoeyB2YWx1ZTogJ2Nvbm5lY3RlZCcgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc3QgZXJyb3I6IFZvaWNlRXJyb3IgPSB7XG4gICAgICAgIHR5cGU6ICdhdWRpb19lcnJvcicsXG4gICAgICAgIG1lc3NhZ2U6XG4gICAgICAgICAgZSBpbnN0YW5jZW9mIEVycm9yXG4gICAgICAgICAgICA/IGUubWVzc2FnZVxuICAgICAgICAgICAgOiAnV2UgY291bGQgbm90IGNvbm5lY3QgdG8gYXVkaW8uIFBsZWFzZSB0cnkgYWdhaW4uJyxcbiAgICAgIH07XG4gICAgICB1cGRhdGVFcnJvcihlcnJvcik7XG4gICAgfVxuICB9LCBbY2xpZW50LCBjb25maWcsIGdldFN0cmVhbSwgbWljLCBwbGF5ZXIsIHNlc3Npb25TZXR0aW5ncywgdXBkYXRlRXJyb3JdKTtcblxuICBjb25zdCBkaXNjb25uZWN0RnJvbVZvaWNlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNsaWVudC5kaXNjb25uZWN0KCk7XG4gICAgcGxheWVyLnN0b3BBbGwoKTtcbiAgICBtaWMuc3RvcCgpO1xuICAgIGlmIChjbGVhck1lc3NhZ2VzT25EaXNjb25uZWN0KSB7XG4gICAgICBtZXNzYWdlU3RvcmUuY2xlYXJNZXNzYWdlcygpO1xuICAgIH1cbiAgICB0b29sU3RhdHVzLmNsZWFyU3RvcmUoKTtcbiAgfSwgW1xuICAgIGNsaWVudCxcbiAgICBwbGF5ZXIsXG4gICAgbWljLFxuICAgIGNsZWFyTWVzc2FnZXNPbkRpc2Nvbm5lY3QsXG4gICAgdG9vbFN0YXR1cyxcbiAgICBtZXNzYWdlU3RvcmUsXG4gIF0pO1xuXG4gIGNvbnN0IGRpc2Nvbm5lY3QgPSB1c2VDYWxsYmFjayhcbiAgICAoZGlzY29ubmVjdE9uRXJyb3I/OiBib29sZWFuKSA9PiB7XG4gICAgICBpZiAobWljUGVybWlzc2lvbiA9PT0gJ2RlbmllZCcpIHtcbiAgICAgICAgc2V0U3RhdHVzKHsgdmFsdWU6ICdlcnJvcicsIHJlYXNvbjogJ01pY3JvcGhvbmUgcGVybWlzc2lvbiBkZW5pZWQnIH0pO1xuICAgICAgfVxuXG4gICAgICBzdG9wVGltZXIoKTtcblxuICAgICAgZGlzY29ubmVjdEZyb21Wb2ljZSgpO1xuXG4gICAgICBpZiAoc3RhdHVzLnZhbHVlICE9PSAnZXJyb3InICYmICFkaXNjb25uZWN0T25FcnJvcikge1xuICAgICAgICAvLyBpZiBzdGF0dXMgd2FzICdlcnJvcicsIGtlZXAgdGhlIGVycm9yIHN0YXR1cyBzbyB3ZSBjYW4gc2hvdyB0aGUgZXJyb3IgbWVzc2FnZSB0byB0aGUgZW5kIHVzZXIuXG4gICAgICAgIC8vIG90aGVyd2lzZSwgc2V0IHN0YXR1cyB0byAnZGlzY29ubmVjdGVkJ1xuICAgICAgICBzZXRTdGF0dXMoeyB2YWx1ZTogJ2Rpc2Nvbm5lY3RlZCcgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbbWljUGVybWlzc2lvbiwgc3RvcFRpbWVyLCBkaXNjb25uZWN0RnJvbVZvaWNlLCBzdGF0dXMudmFsdWVdLFxuICApO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKFxuICAgICAgZXJyb3IgIT09IG51bGwgJiZcbiAgICAgIHN0YXR1cy52YWx1ZSAhPT0gJ2Vycm9yJyAmJlxuICAgICAgc3RhdHVzLnZhbHVlICE9PSAnZGlzY29ubmVjdGVkJ1xuICAgICkge1xuICAgICAgLy8gSWYgdGhlIHN0YXR1cyBpcyBldmVyIHNldCB0byBgZXJyb3JgLCBkaXNjb25uZWN0IHRoZSB2b2ljZS5cbiAgICAgIHNldFN0YXR1cyh7IHZhbHVlOiAnZXJyb3InLCByZWFzb246IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICBkaXNjb25uZWN0RnJvbVZvaWNlKCk7XG4gICAgfVxuICB9LCBbc3RhdHVzLnZhbHVlLCBkaXNjb25uZWN0LCBkaXNjb25uZWN0RnJvbVZvaWNlLCBlcnJvcl0pO1xuXG4gIGNvbnN0IGN0eCA9IHVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgICh7XG4gICAgICAgIGNvbm5lY3QsXG4gICAgICAgIGRpc2Nvbm5lY3QsXG4gICAgICAgIGZmdDogcGxheWVyLmZmdCxcbiAgICAgICAgbWljRmZ0OiBtaWMuZmZ0LFxuICAgICAgICBpc011dGVkOiBtaWMuaXNNdXRlZCxcbiAgICAgICAgaXNBdWRpb011dGVkOiBwbGF5ZXIuaXNBdWRpb011dGVkLFxuICAgICAgICBpc1BsYXlpbmc6IHBsYXllci5pc1BsYXlpbmcsXG4gICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlU3RvcmUubWVzc2FnZXMsXG4gICAgICAgIGxhc3RWb2ljZU1lc3NhZ2U6IG1lc3NhZ2VTdG9yZS5sYXN0Vm9pY2VNZXNzYWdlLFxuICAgICAgICBsYXN0VXNlck1lc3NhZ2U6IG1lc3NhZ2VTdG9yZS5sYXN0VXNlck1lc3NhZ2UsXG4gICAgICAgIGNsZWFyTWVzc2FnZXM6IG1lc3NhZ2VTdG9yZS5jbGVhck1lc3NhZ2VzLFxuICAgICAgICBtdXRlOiBtaWMubXV0ZSxcbiAgICAgICAgbXV0ZUF1ZGlvOiBwbGF5ZXIubXV0ZUF1ZGlvLFxuICAgICAgICByZWFkeVN0YXRlOiBjbGllbnQucmVhZHlTdGF0ZSxcbiAgICAgICAgc2VuZFVzZXJJbnB1dDogY2xpZW50LnNlbmRVc2VySW5wdXQsXG4gICAgICAgIHNlbmRBc3Npc3RhbnRJbnB1dDogY2xpZW50LnNlbmRBc3Npc3RhbnRJbnB1dCxcbiAgICAgICAgc2VuZFNlc3Npb25TZXR0aW5nczogY2xpZW50LnNlbmRTZXNzaW9uU2V0dGluZ3MsXG4gICAgICAgIHNlbmRUb29sTWVzc2FnZTogY2xpZW50LnNlbmRUb29sTWVzc2FnZSxcbiAgICAgICAgc2VuZFBhdXNlQXNzaXN0YW50TWVzc2FnZTogY2xpZW50LnNlbmRQYXVzZUFzc2lzdGFudE1lc3NhZ2UsXG4gICAgICAgIHNlbmRSZXN1bWVBc3Npc3RhbnRNZXNzYWdlOiBjbGllbnQuc2VuZFJlc3VtZUFzc2lzdGFudE1lc3NhZ2UsXG4gICAgICAgIHN0YXR1cyxcbiAgICAgICAgdW5tdXRlOiBtaWMudW5tdXRlLFxuICAgICAgICB1bm11dGVBdWRpbzogcGxheWVyLnVubXV0ZUF1ZGlvLFxuICAgICAgICBlcnJvcixcbiAgICAgICAgaXNBdWRpb0Vycm9yLFxuICAgICAgICBpc0Vycm9yLFxuICAgICAgICBpc01pY3JvcGhvbmVFcnJvcixcbiAgICAgICAgaXNTb2NrZXRFcnJvcixcbiAgICAgICAgY2FsbER1cmF0aW9uVGltZXN0YW1wLFxuICAgICAgICB0b29sU3RhdHVzU3RvcmU6IHRvb2xTdGF0dXMuc3RvcmUsXG4gICAgICAgIGNoYXRNZXRhZGF0YTogbWVzc2FnZVN0b3JlLmNoYXRNZXRhZGF0YSxcbiAgICAgIH0pIHNhdGlzZmllcyBWb2ljZUNvbnRleHRUeXBlLFxuICAgIFtcbiAgICAgIGNvbm5lY3QsXG4gICAgICBkaXNjb25uZWN0LFxuICAgICAgcGxheWVyLmZmdCxcbiAgICAgIHBsYXllci5pc1BsYXlpbmcsXG4gICAgICBwbGF5ZXIuaXNBdWRpb011dGVkLFxuICAgICAgcGxheWVyLm11dGVBdWRpbyxcbiAgICAgIHBsYXllci51bm11dGVBdWRpbyxcbiAgICAgIG1pYy5mZnQsXG4gICAgICBtaWMuaXNNdXRlZCxcbiAgICAgIG1pYy5tdXRlLFxuICAgICAgbWljLnVubXV0ZSxcbiAgICAgIG1lc3NhZ2VTdG9yZS5tZXNzYWdlcyxcbiAgICAgIG1lc3NhZ2VTdG9yZS5sYXN0Vm9pY2VNZXNzYWdlLFxuICAgICAgbWVzc2FnZVN0b3JlLmxhc3RVc2VyTWVzc2FnZSxcbiAgICAgIG1lc3NhZ2VTdG9yZS5jbGVhck1lc3NhZ2VzLFxuICAgICAgY2xpZW50LnJlYWR5U3RhdGUsXG4gICAgICBjbGllbnQuc2VuZFVzZXJJbnB1dCxcbiAgICAgIGNsaWVudC5zZW5kQXNzaXN0YW50SW5wdXQsXG4gICAgICBjbGllbnQuc2VuZFNlc3Npb25TZXR0aW5ncyxcbiAgICAgIGNsaWVudC5zZW5kVG9vbE1lc3NhZ2UsXG4gICAgICBjbGllbnQuc2VuZFBhdXNlQXNzaXN0YW50TWVzc2FnZSxcbiAgICAgIGNsaWVudC5zZW5kUmVzdW1lQXNzaXN0YW50TWVzc2FnZSxcbiAgICAgIHN0YXR1cyxcbiAgICAgIGVycm9yLFxuICAgICAgaXNBdWRpb0Vycm9yLFxuICAgICAgaXNFcnJvcixcbiAgICAgIGlzTWljcm9waG9uZUVycm9yLFxuICAgICAgaXNTb2NrZXRFcnJvcixcbiAgICAgIGNhbGxEdXJhdGlvblRpbWVzdGFtcCxcbiAgICAgIHRvb2xTdGF0dXMsXG4gICAgICBtZXNzYWdlU3RvcmUuY2hhdE1ldGFkYXRhLFxuICAgIF0sXG4gICk7XG5cbiAgcmV0dXJuIDxWb2ljZUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2N0eH0+e2NoaWxkcmVufTwvVm9pY2VDb250ZXh0LlByb3ZpZGVyPjtcbn07XG4iLCJleHBvcnQgY29uc3Qgbm9vcCA9ICgpID0+IHt9O1xuIiwiaW1wb3J0IHsgaW50ZXJ2YWxUb0R1cmF0aW9uIH0gZnJvbSAnZGF0ZS1mbnMnO1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcblxuZXhwb3J0IGNvbnN0IHVzZUNhbGxEdXJhdGlvbiA9ICgpID0+IHtcbiAgY29uc3QgaW50ZXJ2YWwgPSB1c2VSZWY8bnVtYmVyIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IHN0YXJ0VGltZSA9IHVzZVJlZjxudW1iZXIgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBbdGltZXN0YW1wLCBzZXRUaW1lc3RhbXBdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3Qgc3RhcnQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc3RhcnRUaW1lLmN1cnJlbnQgPSBEYXRlLm5vdygpO1xuXG4gICAgc2V0VGltZXN0YW1wKCcwMDowMDowMCcpO1xuXG4gICAgaW50ZXJ2YWwuY3VycmVudCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBpZiAoc3RhcnRUaW1lLmN1cnJlbnQpIHtcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBpbnRlcnZhbFRvRHVyYXRpb24oe1xuICAgICAgICAgIHN0YXJ0OiBzdGFydFRpbWUuY3VycmVudCxcbiAgICAgICAgICBlbmQ6IERhdGUubm93KCksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGhvdXJzID0gKGR1cmF0aW9uLmhvdXJzID8/IDApLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgY29uc3QgbWludXRlcyA9IChkdXJhdGlvbi5taW51dGVzID8/IDApLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kcyA9IChkdXJhdGlvbi5zZWNvbmRzID8/IDApLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcblxuICAgICAgICBzZXRUaW1lc3RhbXAoYCR7aG91cnN9OiR7bWludXRlc306JHtzZWNvbmRzfWApO1xuICAgICAgfVxuICAgIH0sIDUwMCk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBzdG9wID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChpbnRlcnZhbC5jdXJyZW50KSB7XG4gICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChpbnRlcnZhbC5jdXJyZW50KTtcbiAgICAgIGludGVydmFsLmN1cnJlbnQgPSBudWxsO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIGNvbnN0IHJlc2V0ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFRpbWVzdGFtcChudWxsKTtcbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gY2xlYW4gdXAgb24gdW5tb3VudFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoaW50ZXJ2YWwuY3VycmVudCkge1xuICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChpbnRlcnZhbC5jdXJyZW50KTtcbiAgICAgICAgaW50ZXJ2YWwuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiB7IHRpbWVzdGFtcCwgc3RhcnQsIHN0b3AsIHJlc2V0IH07XG59O1xuIiwiLy8gY3NwZWxsOmlnbm9yZSBkYXRhYXZhaWxhYmxlXG5pbXBvcnQgeyBjaGVja0ZvckF1ZGlvVHJhY2tzLCBnZXRBdWRpb1N0cmVhbSB9IGZyb20gJ0BodW1lYWkvdm9pY2UnO1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbnR5cGUgUGVybWlzc2lvblN0YXR1cyA9ICdwcm9tcHQnIHwgJ2dyYW50ZWQnIHwgJ2RlbmllZCc7XG5cbmNvbnN0IHVzZUVuY29kaW5nID0gKCkgPT4ge1xuICBjb25zdCBbcGVybWlzc2lvbiwgc2V0UGVybWlzc2lvbl0gPSB1c2VTdGF0ZTxQZXJtaXNzaW9uU3RhdHVzPigncHJvbXB0Jyk7XG5cbiAgY29uc3Qgc3RyZWFtUmVmID0gdXNlUmVmPE1lZGlhU3RyZWFtIHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgZ2V0U3RyZWFtID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBnZXRBdWRpb1N0cmVhbSgpO1xuXG4gICAgICBzZXRQZXJtaXNzaW9uKCdncmFudGVkJyk7XG4gICAgICBzdHJlYW1SZWYuY3VycmVudCA9IHN0cmVhbTtcblxuICAgICAgY2hlY2tGb3JBdWRpb1RyYWNrcyhzdHJlYW0pO1xuXG4gICAgICByZXR1cm4gJ2dyYW50ZWQnIGFzIGNvbnN0O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHNldFBlcm1pc3Npb24oJ2RlbmllZCcpO1xuICAgICAgcmV0dXJuICdkZW5pZWQnIGFzIGNvbnN0O1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIHJldHVybiB7XG4gICAgc3RyZWFtUmVmLFxuICAgIGdldFN0cmVhbSxcbiAgICBwZXJtaXNzaW9uLFxuICB9O1xufTtcblxuZXhwb3J0IHsgdXNlRW5jb2RpbmcgfTtcbiIsImltcG9ydCB0eXBlIHtcbiAgQ2hhdE1ldGFkYXRhTWVzc2FnZSxcbiAgSlNPTkVycm9yTWVzc2FnZSxcbiAgVG9vbENhbGwsXG4gIFRvb2xFcnJvcixcbiAgVG9vbFJlc3BvbnNlLFxuICBVc2VySW50ZXJydXB0aW9uTWVzc2FnZSxcbn0gZnJvbSAnQGh1bWVhaS92b2ljZSc7XG5pbXBvcnQge1xuICB0eXBlIEFzc2lzdGFudFRyYW5zY3JpcHRNZXNzYWdlLFxuICB0eXBlIEpTT05NZXNzYWdlLFxuICB0eXBlIFVzZXJUcmFuc2NyaXB0TWVzc2FnZSxcbn0gZnJvbSAnQGh1bWVhaS92b2ljZSc7XG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB0eXBlIHsgQ29ubmVjdGlvbk1lc3NhZ2UgfSBmcm9tICcuL2Nvbm5lY3Rpb24tbWVzc2FnZSc7XG5pbXBvcnQgeyBrZWVwTGFzdE4gfSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBjb25zdCB1c2VNZXNzYWdlcyA9ICh7XG4gIHNlbmRNZXNzYWdlVG9QYXJlbnQsXG4gIG1lc3NhZ2VIaXN0b3J5TGltaXQsXG59OiB7XG4gIHNlbmRNZXNzYWdlVG9QYXJlbnQ/OiAoXG4gICAgbWVzc2FnZTpcbiAgICAgIHwgVXNlclRyYW5zY3JpcHRNZXNzYWdlXG4gICAgICB8IEFzc2lzdGFudFRyYW5zY3JpcHRNZXNzYWdlXG4gICAgICB8IFVzZXJJbnRlcnJ1cHRpb25NZXNzYWdlXG4gICAgICB8IEpTT05FcnJvck1lc3NhZ2VcbiAgICAgIHwgVG9vbENhbGxcbiAgICAgIHwgVG9vbFJlc3BvbnNlXG4gICAgICB8IFRvb2xFcnJvclxuICAgICAgfCBDaGF0TWV0YWRhdGFNZXNzYWdlLFxuICApID0+IHZvaWQ7XG4gIG1lc3NhZ2VIaXN0b3J5TGltaXQ6IG51bWJlcjtcbn0pID0+IHtcbiAgY29uc3QgW3ZvaWNlTWVzc2FnZU1hcCwgc2V0Vm9pY2VNZXNzYWdlTWFwXSA9IHVzZVN0YXRlPFxuICAgIFJlY29yZDxzdHJpbmcsIEFzc2lzdGFudFRyYW5zY3JpcHRNZXNzYWdlPlxuICA+KHt9KTtcblxuICBjb25zdCBbbWVzc2FnZXMsIHNldE1lc3NhZ2VzXSA9IHVzZVN0YXRlPFxuICAgIEFycmF5PFxuICAgICAgfCBBc3Npc3RhbnRUcmFuc2NyaXB0TWVzc2FnZVxuICAgICAgfCBVc2VyVHJhbnNjcmlwdE1lc3NhZ2VcbiAgICAgIHwgQ29ubmVjdGlvbk1lc3NhZ2VcbiAgICAgIHwgVXNlckludGVycnVwdGlvbk1lc3NhZ2VcbiAgICAgIHwgSlNPTkVycm9yTWVzc2FnZVxuICAgICAgfCBUb29sQ2FsbFxuICAgICAgfCBUb29sUmVzcG9uc2VcbiAgICAgIHwgVG9vbEVycm9yXG4gICAgICB8IENoYXRNZXRhZGF0YU1lc3NhZ2VcbiAgICA+XG4gID4oW10pO1xuXG4gIGNvbnN0IFtsYXN0Vm9pY2VNZXNzYWdlLCBzZXRMYXN0Vm9pY2VNZXNzYWdlXSA9XG4gICAgdXNlU3RhdGU8QXNzaXN0YW50VHJhbnNjcmlwdE1lc3NhZ2UgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2xhc3RVc2VyTWVzc2FnZSwgc2V0TGFzdFVzZXJNZXNzYWdlXSA9XG4gICAgdXNlU3RhdGU8VXNlclRyYW5zY3JpcHRNZXNzYWdlIHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgW2NoYXRNZXRhZGF0YSwgc2V0Q2hhdE1ldGFkYXRhXSA9IHVzZVN0YXRlPENoYXRNZXRhZGF0YU1lc3NhZ2UgfCBudWxsPihcbiAgICBudWxsLFxuICApO1xuXG4gIGNvbnN0IGNyZWF0ZUNvbm5lY3RNZXNzYWdlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PlxuICAgICAgcHJldi5jb25jYXQoW1xuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogJ3NvY2tldF9jb25uZWN0ZWQnLFxuICAgICAgICAgIHJlY2VpdmVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIH0sXG4gICAgICBdKSxcbiAgICApO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgY3JlYXRlRGlzY29ubmVjdE1lc3NhZ2UgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0TWVzc2FnZXMoKHByZXYpID0+XG4gICAgICBwcmV2LmNvbmNhdChbXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiAnc29ja2V0X2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgICAgcmVjZWl2ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgfSxcbiAgICAgIF0pLFxuICAgICk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBvbk1lc3NhZ2UgPSB1c2VDYWxsYmFjaygobWVzc2FnZTogSlNPTk1lc3NhZ2UpID0+IHtcbiAgICAvKiBcbiAgICAgIDEuIG1lc3NhZ2UgY29tZXMgaW4gZnJvbSB0aGUgYmFja2VuZFxuICAgICAgICAtIGlmIHRoZSBtZXNzYWdlIElTIE5PVCBBc3Npc3RhbnRUcmFuc2NyaXB0TWVzc2FnZSwgc3RvcmUgaW4gYG1lc3NhZ2VzYCBpbW1lZGlhdGVseSAgXG4gICAgICAgIC0gaWYgdGhlIG1lc3NhZ2UgaXMgYW4gQXNzaXN0YW50VHJhbnNjcmlwdE1lc3NhZ2UsIHN0b3JlZCBpbiBgdm9pY2VNZXNzYWdlTWFwYFxuICAgICAgMi4gYXVkaW8gY2xpcCBwbGF5c1xuICAgICAgICAtIGZpbmQgdGhlIEFzc2lzdGFudFRyYW5zY3JpcHRNZXNzYWdlIHdpdGggYSBtYXRjaGluZyBJRCwgYW5kIHN0b3JlIGl0IGluIGBtZXNzYWdlc2BcbiAgICAgICAgLSByZW1vdmUgdGhlIEFzc2lzdGFudFRyYW5zY3JpcHRNZXNzYWdlIGZyb20gYHZvaWNlTWVzc2FnZU1hcGBcbiAgICAqL1xuICAgIHN3aXRjaCAobWVzc2FnZS50eXBlKSB7XG4gICAgICBjYXNlICdhc3Npc3RhbnRfbWVzc2FnZSc6XG4gICAgICAgIC8vIGZvciBhc3Npc3RhbnQgbWVzc2FnZXMsIGBzZW5kTWVzc2FnZVRvUGFyZW50YCBpcyBjYWxsZWQgaW4gYG9uUGxheUF1ZGlvYFxuICAgICAgICAvLyBpbiBvcmRlciB0byBsaW5lIHVwIHRoZSB0cmFuc2NyaXB0IGV2ZW50IHdpdGggdGhlIGNvcnJlY3QgYXVkaW8gY2xpcFxuICAgICAgICBzZXRWb2ljZU1lc3NhZ2VNYXAoKHByZXYpID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBbbWVzc2FnZS5pZF06IG1lc3NhZ2UsXG4gICAgICAgIH0pKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd1c2VyX21lc3NhZ2UnOlxuICAgICAgICBzZW5kTWVzc2FnZVRvUGFyZW50Py4obWVzc2FnZSk7XG4gICAgICAgIHNldExhc3RVc2VyTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IHtcbiAgICAgICAgICByZXR1cm4ga2VlcExhc3ROKG1lc3NhZ2VIaXN0b3J5TGltaXQsIHByZXYuY29uY2F0KFttZXNzYWdlXSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd1c2VyX2ludGVycnVwdGlvbic6XG4gICAgICBjYXNlICdlcnJvcic6XG4gICAgICBjYXNlICd0b29sX2NhbGwnOlxuICAgICAgY2FzZSAndG9vbF9yZXNwb25zZSc6XG4gICAgICBjYXNlICd0b29sX2Vycm9yJzpcbiAgICAgICAgc2VuZE1lc3NhZ2VUb1BhcmVudD8uKG1lc3NhZ2UpO1xuICAgICAgICBzZXRNZXNzYWdlcygocHJldikgPT4ge1xuICAgICAgICAgIHJldHVybiBrZWVwTGFzdE4obWVzc2FnZUhpc3RvcnlMaW1pdCwgcHJldi5jb25jYXQoW21lc3NhZ2VdKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2NoYXRfbWV0YWRhdGEnOlxuICAgICAgICBzZW5kTWVzc2FnZVRvUGFyZW50Py4obWVzc2FnZSk7XG4gICAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGtlZXBMYXN0TihtZXNzYWdlSGlzdG9yeUxpbWl0LCBwcmV2LmNvbmNhdChbbWVzc2FnZV0pKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNldENoYXRNZXRhZGF0YShtZXNzYWdlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBvblBsYXlBdWRpbyA9IHVzZUNhbGxiYWNrKFxuICAgIChpZDogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBtYXRjaGluZ1RyYW5zY3JpcHQgPSB2b2ljZU1lc3NhZ2VNYXBbaWRdO1xuICAgICAgaWYgKG1hdGNoaW5nVHJhbnNjcmlwdCkge1xuICAgICAgICBzZW5kTWVzc2FnZVRvUGFyZW50Py4obWF0Y2hpbmdUcmFuc2NyaXB0KTtcbiAgICAgICAgc2V0TGFzdFZvaWNlTWVzc2FnZShtYXRjaGluZ1RyYW5zY3JpcHQpO1xuICAgICAgICBzZXRNZXNzYWdlcygocHJldikgPT4ge1xuICAgICAgICAgIHJldHVybiBrZWVwTGFzdE4oXG4gICAgICAgICAgICBtZXNzYWdlSGlzdG9yeUxpbWl0LFxuICAgICAgICAgICAgcHJldi5jb25jYXQoW21hdGNoaW5nVHJhbnNjcmlwdF0pLFxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyByZW1vdmUgdGhlIG1lc3NhZ2UgZnJvbSB0aGUgbWFwIHRvIGVuc3VyZSB3ZSBkb24ndFxuICAgICAgICAvLyBhY2NpZGVudGFsbHkgcHVzaCBpdCB0byB0aGUgbWVzc2FnZXMgYXJyYXkgbW9yZSB0aGFuIG9uY2VcbiAgICAgICAgc2V0Vm9pY2VNZXNzYWdlTWFwKChwcmV2KSA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3TWFwID0geyAuLi5wcmV2IH07XG4gICAgICAgICAgZGVsZXRlIG5ld01hcFtpZF07XG4gICAgICAgICAgcmV0dXJuIG5ld01hcDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbdm9pY2VNZXNzYWdlTWFwLCBzZW5kTWVzc2FnZVRvUGFyZW50LCBtZXNzYWdlSGlzdG9yeUxpbWl0XSxcbiAgKTtcblxuICBjb25zdCBjbGVhck1lc3NhZ2VzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldE1lc3NhZ2VzKFtdKTtcbiAgICBzZXRMYXN0Vm9pY2VNZXNzYWdlKG51bGwpO1xuICAgIHNldExhc3RVc2VyTWVzc2FnZShudWxsKTtcbiAgICBzZXRWb2ljZU1lc3NhZ2VNYXAoe30pO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIHtcbiAgICBjcmVhdGVDb25uZWN0TWVzc2FnZSxcbiAgICBjcmVhdGVEaXNjb25uZWN0TWVzc2FnZSxcbiAgICBvbk1lc3NhZ2UsXG4gICAgb25QbGF5QXVkaW8sXG4gICAgY2xlYXJNZXNzYWdlcyxcbiAgICBtZXNzYWdlcyxcbiAgICBsYXN0Vm9pY2VNZXNzYWdlLFxuICAgIGxhc3RVc2VyTWVzc2FnZSxcbiAgICBjaGF0TWV0YWRhdGEsXG4gIH07XG59O1xuIiwiZXhwb3J0IGNvbnN0IGtlZXBMYXN0TiA9IDxUPihuOiBudW1iZXIsIGFycjogVFtdKTogVFtdID0+IHtcbiAgaWYgKGFyci5sZW5ndGggPD0gbikge1xuICAgIHJldHVybiBhcnI7XG4gIH1cbiAgcmV0dXJuIGFyci5zbGljZShhcnIubGVuZ3RoIC0gbik7XG59O1xuIiwiaW1wb3J0IHR5cGUgeyBUb29sQ2FsbCwgVG9vbEVycm9yLCBUb29sUmVzcG9uc2UgfSBmcm9tICdAaHVtZWFpL3ZvaWNlJztcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcblxuZXhwb3J0IGNvbnN0IHVzZVRvb2xTdGF0dXMgPSAoKSA9PiB7XG4gIGNvbnN0IFtzdG9yZSwgc2V0U3RvcmVdID0gdXNlU3RhdGU8XG4gICAgUmVjb3JkPHN0cmluZywgeyBjYWxsPzogVG9vbENhbGw7IHJlc29sdmVkPzogVG9vbFJlc3BvbnNlIHwgVG9vbEVycm9yIH0+XG4gID4oe30pO1xuXG4gIGNvbnN0IGFkZFRvU3RvcmUgPSB1c2VDYWxsYmFjayhcbiAgICAobWVzc2FnZTogVG9vbENhbGwgfCBUb29sUmVzcG9uc2UgfCBUb29sRXJyb3IpID0+IHtcbiAgICAgIHNldFN0b3JlKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0ge1xuICAgICAgICAgIC4uLnByZXZbbWVzc2FnZS50b29sX2NhbGxfaWRdLFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09ICd0b29sX2NhbGwnKSB7XG4gICAgICAgICAgZW50cnkuY2FsbCA9IG1lc3NhZ2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSAndG9vbF9yZXNwb25zZScgfHwgbWVzc2FnZS50eXBlID09PSAndG9vbF9lcnJvcicpIHtcbiAgICAgICAgICBlbnRyeS5yZXNvbHZlZCA9IG1lc3NhZ2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgW21lc3NhZ2UudG9vbF9jYWxsX2lkXTogZW50cnksXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtdLFxuICApO1xuXG4gIGNvbnN0IGNsZWFyU3RvcmUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U3RvcmUoe30pO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIHtcbiAgICBzdG9yZSxcbiAgICBhZGRUb1N0b3JlLFxuICAgIGNsZWFyU3RvcmUsXG4gIH07XG59O1xuIiwiaW1wb3J0IHR5cGUge1xuICBBc3Npc3RhbnRUcmFuc2NyaXB0TWVzc2FnZSxcbiAgQXVkaW9PdXRwdXRNZXNzYWdlLFxuICBDaGF0TWV0YWRhdGFNZXNzYWdlLFxuICBKU09ORXJyb3JNZXNzYWdlLFxuICBTZXNzaW9uU2V0dGluZ3MsXG4gIFNvY2tldENvbmZpZyxcbiAgVG9vbENhbGwsXG4gIFRvb2xFcnJvcixcbiAgVG9vbFJlc3BvbnNlLFxuICBVc2VySW50ZXJydXB0aW9uTWVzc2FnZSxcbiAgVXNlclRyYW5zY3JpcHRNZXNzYWdlLFxuICBWb2ljZUV2ZW50TWFwLFxufSBmcm9tICdAaHVtZWFpL3ZvaWNlJztcbmltcG9ydCB7XG4gIFRvb2xFcnJvclNjaGVtYSxcbiAgVG9vbFJlc3BvbnNlU2NoZW1hLFxuICBWb2ljZUNsaWVudCxcbn0gZnJvbSAnQGh1bWVhaS92b2ljZSc7XG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuXG5leHBvcnQgZW51bSBWb2ljZVJlYWR5U3RhdGUge1xuICBJRExFID0gJ2lkbGUnLFxuICBDT05ORUNUSU5HID0gJ2Nvbm5lY3RpbmcnLFxuICBPUEVOID0gJ29wZW4nLFxuICBDTE9TRUQgPSAnY2xvc2VkJyxcbn1cblxuZXhwb3J0IHR5cGUgVG9vbENhbGxIYW5kbGVyID0gKFxuICBtZXNzYWdlOiBUb29sQ2FsbCxcbiAgc2VuZDoge1xuICAgIHN1Y2Nlc3M6IChjb250ZW50OiB1bmtub3duKSA9PiBUb29sUmVzcG9uc2U7XG4gICAgZXJyb3I6IChlOiB7XG4gICAgICBlcnJvcjogc3RyaW5nO1xuICAgICAgY29kZTogc3RyaW5nO1xuICAgICAgbGV2ZWw6IHN0cmluZztcbiAgICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICB9KSA9PiBUb29sRXJyb3I7XG4gIH0sXG4pID0+IFByb21pc2U8VG9vbFJlc3BvbnNlIHwgVG9vbEVycm9yPjtcblxuZXhwb3J0IGNvbnN0IHVzZVZvaWNlQ2xpZW50ID0gKHByb3BzOiB7XG4gIG9uQXVkaW9NZXNzYWdlPzogKG1lc3NhZ2U6IEF1ZGlvT3V0cHV0TWVzc2FnZSkgPT4gdm9pZDtcbiAgb25NZXNzYWdlPzogKFxuICAgIG1lc3NhZ2U6XG4gICAgICB8IFVzZXJUcmFuc2NyaXB0TWVzc2FnZVxuICAgICAgfCBBc3Npc3RhbnRUcmFuc2NyaXB0TWVzc2FnZVxuICAgICAgfCBVc2VySW50ZXJydXB0aW9uTWVzc2FnZVxuICAgICAgfCBKU09ORXJyb3JNZXNzYWdlXG4gICAgICB8IFRvb2xDYWxsXG4gICAgICB8IFRvb2xSZXNwb25zZVxuICAgICAgfCBUb29sRXJyb3JcbiAgICAgIHwgQ2hhdE1ldGFkYXRhTWVzc2FnZSxcbiAgKSA9PiB2b2lkO1xuICBvblRvb2xDYWxsPzogVG9vbENhbGxIYW5kbGVyO1xuICBvbkVycm9yPzogKG1lc3NhZ2U6IHN0cmluZywgZXJyb3I/OiBFcnJvcikgPT4gdm9pZDtcbiAgb25PcGVuPzogKCkgPT4gdm9pZDtcbiAgb25DbG9zZT86IFZvaWNlRXZlbnRNYXBbJ2Nsb3NlJ107XG59KSA9PiB7XG4gIGNvbnN0IGNsaWVudCA9IHVzZVJlZjxWb2ljZUNsaWVudCB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IFtyZWFkeVN0YXRlLCBzZXRSZWFkeVN0YXRlXSA9IHVzZVN0YXRlPFZvaWNlUmVhZHlTdGF0ZT4oXG4gICAgVm9pY2VSZWFkeVN0YXRlLklETEUsXG4gICk7XG5cbiAgLy8gdGhpcyBwYXR0ZXJuIG1pZ2h0IGxvb2sgaGFja3kgYnV0IGl0IGFsbG93cyB1cyB0byB1c2UgdGhlIGxhdGVzdCBwcm9wc1xuICAvLyBpbiBjYWxsYmFja3Mgc2V0IHVwIGluc2lkZSB1c2VFZmZlY3Qgd2l0aG91dCByZS1yZW5kZXJpbmcgdGhlIHVzZUVmZmVjdFxuICBjb25zdCBvbkF1ZGlvTWVzc2FnZSA9IHVzZVJlZjx0eXBlb2YgcHJvcHMub25BdWRpb01lc3NhZ2U+KFxuICAgIHByb3BzLm9uQXVkaW9NZXNzYWdlLFxuICApO1xuICBvbkF1ZGlvTWVzc2FnZS5jdXJyZW50ID0gcHJvcHMub25BdWRpb01lc3NhZ2U7XG5cbiAgY29uc3Qgb25NZXNzYWdlID0gdXNlUmVmPHR5cGVvZiBwcm9wcy5vbk1lc3NhZ2U+KHByb3BzLm9uTWVzc2FnZSk7XG4gIG9uTWVzc2FnZS5jdXJyZW50ID0gcHJvcHMub25NZXNzYWdlO1xuXG4gIGNvbnN0IG9uVG9vbENhbGwgPSB1c2VSZWY8dHlwZW9mIHByb3BzLm9uVG9vbENhbGw+KHByb3BzLm9uVG9vbENhbGwpO1xuICBvblRvb2xDYWxsLmN1cnJlbnQgPSBwcm9wcy5vblRvb2xDYWxsO1xuXG4gIGNvbnN0IG9uRXJyb3IgPSB1c2VSZWY8dHlwZW9mIHByb3BzLm9uRXJyb3I+KHByb3BzLm9uRXJyb3IpO1xuICBvbkVycm9yLmN1cnJlbnQgPSBwcm9wcy5vbkVycm9yO1xuXG4gIGNvbnN0IG9uT3BlbiA9IHVzZVJlZjx0eXBlb2YgcHJvcHMub25PcGVuPihwcm9wcy5vbk9wZW4pO1xuICBvbk9wZW4uY3VycmVudCA9IHByb3BzLm9uT3BlbjtcblxuICBjb25zdCBvbkNsb3NlID0gdXNlUmVmPHR5cGVvZiBwcm9wcy5vbkNsb3NlPihwcm9wcy5vbkNsb3NlKTtcbiAgb25DbG9zZS5jdXJyZW50ID0gcHJvcHMub25DbG9zZTtcblxuICBjb25zdCBjb25uZWN0ID0gdXNlQ2FsbGJhY2soKGNvbmZpZzogU29ja2V0Q29uZmlnKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNsaWVudC5jdXJyZW50ID0gVm9pY2VDbGllbnQuY3JlYXRlKGNvbmZpZyk7XG5cbiAgICAgIGNsaWVudC5jdXJyZW50Lm9uKCdvcGVuJywgKCkgPT4ge1xuICAgICAgICBvbk9wZW4uY3VycmVudD8uKCk7XG4gICAgICAgIHNldFJlYWR5U3RhdGUoVm9pY2VSZWFkeVN0YXRlLk9QRU4pO1xuICAgICAgICByZXNvbHZlKFZvaWNlUmVhZHlTdGF0ZS5PUEVOKTtcbiAgICAgIH0pO1xuXG4gICAgICBjbGllbnQuY3VycmVudC5vbignbWVzc2FnZScsIChtZXNzYWdlKSA9PiB7XG4gICAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09ICdhdWRpb19vdXRwdXQnKSB7XG4gICAgICAgICAgb25BdWRpb01lc3NhZ2UuY3VycmVudD8uKG1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIG1lc3NhZ2UudHlwZSA9PT0gJ2Fzc2lzdGFudF9tZXNzYWdlJyB8fFxuICAgICAgICAgIG1lc3NhZ2UudHlwZSA9PT0gJ3VzZXJfbWVzc2FnZScgfHxcbiAgICAgICAgICBtZXNzYWdlLnR5cGUgPT09ICd1c2VyX2ludGVycnVwdGlvbicgfHxcbiAgICAgICAgICBtZXNzYWdlLnR5cGUgPT09ICdlcnJvcicgfHxcbiAgICAgICAgICBtZXNzYWdlLnR5cGUgPT09ICd0b29sX3Jlc3BvbnNlJyB8fFxuICAgICAgICAgIG1lc3NhZ2UudHlwZSA9PT0gJ3Rvb2xfZXJyb3InIHx8XG4gICAgICAgICAgbWVzc2FnZS50eXBlID09PSAnY2hhdF9tZXRhZGF0YSdcbiAgICAgICAgKSB7XG4gICAgICAgICAgb25NZXNzYWdlLmN1cnJlbnQ/LihtZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09ICd0b29sX2NhbGwnKSB7XG4gICAgICAgICAgb25NZXNzYWdlLmN1cnJlbnQ/LihtZXNzYWdlKTtcbiAgICAgICAgICB2b2lkIG9uVG9vbENhbGxcbiAgICAgICAgICAgIC5jdXJyZW50Py4obWVzc2FnZSwge1xuICAgICAgICAgICAgICBzdWNjZXNzOiAoY29udGVudDogdW5rbm93bikgPT4gKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAndG9vbF9yZXNwb25zZScsXG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsX2lkOiBtZXNzYWdlLnRvb2xfY2FsbF9pZCxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBKU09OLnN0cmluZ2lmeShjb250ZW50KSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIGVycm9yOiAoe1xuICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgIGNvZGUsXG4gICAgICAgICAgICAgICAgbGV2ZWwsXG4gICAgICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgICAgfToge1xuICAgICAgICAgICAgICAgIGVycm9yOiBzdHJpbmc7XG4gICAgICAgICAgICAgICAgY29kZTogc3RyaW5nO1xuICAgICAgICAgICAgICAgIGxldmVsOiBzdHJpbmc7XG4gICAgICAgICAgICAgICAgY29udGVudDogc3RyaW5nO1xuICAgICAgICAgICAgICB9KSA9PiAoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICd0b29sX2Vycm9yJyxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxfaWQ6IG1lc3NhZ2UudG9vbF9jYWxsX2lkLFxuICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgIGNvZGUsXG4gICAgICAgICAgICAgICAgbGV2ZWwsXG4gICAgICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgIC8vIGNoZWNrIHRoYXQgcmVzcG9uc2UgaXMgYSBjb3JyZWN0bHkgZm9ybWF0dGVkIHJlc3BvbnNlIG9yIGVycm9yIHBheWxvYWRcbiAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gelxuICAgICAgICAgICAgICAgIC51bmlvbihbVG9vbFJlc3BvbnNlU2NoZW1hLCBUb29sRXJyb3JTY2hlbWFdKVxuICAgICAgICAgICAgICAgIC5zYWZlUGFyc2UocmVzcG9uc2UpO1xuXG4gICAgICAgICAgICAgIC8vIGlmIHZhbGlkIHNlbmQgaXQgdG8gdGhlIHNvY2tldFxuICAgICAgICAgICAgICAvLyBvdGhlcndpc2UsIHJlcG9ydCBlcnJvclxuICAgICAgICAgICAgICBpZiAocGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBjbGllbnQuY3VycmVudD8uc2VuZFRvb2xNZXNzYWdlKHBhcnNlZC5kYXRhKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvbkVycm9yLmN1cnJlbnQ/LignSW52YWxpZCByZXNwb25zZSBmcm9tIHRvb2wgY2FsbCcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNsaWVudC5jdXJyZW50Lm9uKCdjbG9zZScsIChldmVudCkgPT4ge1xuICAgICAgICBvbkNsb3NlLmN1cnJlbnQ/LihldmVudCk7XG4gICAgICAgIHNldFJlYWR5U3RhdGUoVm9pY2VSZWFkeVN0YXRlLkNMT1NFRCk7XG4gICAgICB9KTtcblxuICAgICAgY2xpZW50LmN1cnJlbnQub24oJ2Vycm9yJywgKGUpID0+IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGUgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgICAgb25FcnJvci5jdXJyZW50Py4obWVzc2FnZSwgZSBpbnN0YW5jZW9mIEVycm9yID8gZSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH0pO1xuXG4gICAgICBzZXRSZWFkeVN0YXRlKFZvaWNlUmVhZHlTdGF0ZS5DT05ORUNUSU5HKTtcblxuICAgICAgY2xpZW50LmN1cnJlbnQuY29ubmVjdCgpO1xuICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgZGlzY29ubmVjdCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRSZWFkeVN0YXRlKFZvaWNlUmVhZHlTdGF0ZS5JRExFKTtcbiAgICBjbGllbnQuY3VycmVudD8uZGlzY29ubmVjdCgpO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgc2VuZFNlc3Npb25TZXR0aW5ncyA9IHVzZUNhbGxiYWNrKFxuICAgIChzZXNzaW9uU2V0dGluZ3M6IFNlc3Npb25TZXR0aW5ncykgPT4ge1xuICAgICAgY2xpZW50LmN1cnJlbnQ/LnNlbmRTZXNzaW9uU2V0dGluZ3Moc2Vzc2lvblNldHRpbmdzKTtcbiAgICB9LFxuICAgIFtdLFxuICApO1xuXG4gIGNvbnN0IHNlbmRBdWRpbyA9IHVzZUNhbGxiYWNrKChhcnJheUJ1ZmZlcjogQXJyYXlCdWZmZXJMaWtlKSA9PiB7XG4gICAgY2xpZW50LmN1cnJlbnQ/LnNlbmRBdWRpbyhhcnJheUJ1ZmZlcik7XG4gIH0sIFtdKTtcblxuICBjb25zdCBzZW5kVXNlcklucHV0ID0gdXNlQ2FsbGJhY2soKHRleHQ6IHN0cmluZykgPT4ge1xuICAgIGNsaWVudC5jdXJyZW50Py5zZW5kVXNlcklucHV0KHRleHQpO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgc2VuZEFzc2lzdGFudElucHV0ID0gdXNlQ2FsbGJhY2soKHRleHQ6IHN0cmluZykgPT4ge1xuICAgIGNsaWVudC5jdXJyZW50Py5zZW5kQXNzaXN0YW50SW5wdXQodGV4dCk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBzZW5kVG9vbE1lc3NhZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAodG9vbE1lc3NhZ2U6IFRvb2xSZXNwb25zZSB8IFRvb2xFcnJvcikgPT4ge1xuICAgICAgY2xpZW50LmN1cnJlbnQ/LnNlbmRUb29sTWVzc2FnZSh0b29sTWVzc2FnZSk7XG4gICAgfSxcbiAgICBbXSxcbiAgKTtcbiAgY29uc3Qgc2VuZFBhdXNlQXNzaXN0YW50TWVzc2FnZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjbGllbnQuY3VycmVudD8uc2VuZFBhdXNlQXNzaXN0YW50TWVzc2FnZSgpO1xuICB9LCBbXSk7XG4gIGNvbnN0IHNlbmRSZXN1bWVBc3Npc3RhbnRNZXNzYWdlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNsaWVudC5jdXJyZW50Py5zZW5kUmVzdW1lQXNzaXN0YW50TWVzc2FnZSgpO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIHtcbiAgICByZWFkeVN0YXRlLFxuICAgIHNlbmRTZXNzaW9uU2V0dGluZ3MsXG4gICAgc2VuZEF1ZGlvLFxuICAgIGNvbm5lY3QsXG4gICAgZGlzY29ubmVjdCxcbiAgICBzZW5kVXNlcklucHV0LFxuICAgIHNlbmRBc3Npc3RhbnRJbnB1dCxcbiAgICBzZW5kVG9vbE1lc3NhZ2UsXG4gICAgc2VuZFBhdXNlQXNzaXN0YW50TWVzc2FnZSxcbiAgICBzZW5kUmVzdW1lQXNzaXN0YW50TWVzc2FnZSxcbiAgfTtcbn07XG4iLCJleHBvcnQgKiBmcm9tICcuL2xpYi91c2VTb3VuZFBsYXllcic7XG5leHBvcnQgKiBmcm9tICcuL2xpYi91c2VNaWNyb3Bob25lJztcbmV4cG9ydCAqIGZyb20gJy4vbGliL1ZvaWNlUHJvdmlkZXInO1xuZXhwb3J0ICogZnJvbSAnLi9saWIvdXNlVm9pY2VDbGllbnQnO1xuZXhwb3J0ICogZnJvbSAnLi9saWIvY29ubmVjdGlvbi1tZXNzYWdlJztcblxuZXhwb3J0IHtcbiAgdHlwZSBTb2NrZXRDb25maWcsXG4gIENoYW5uZWxzLFxuICBUVFNTZXJ2aWNlLFxuICBBdWRpb0VuY29kaW5nLFxuICB0eXBlIEFzc2lzdGFudEVuZE1lc3NhZ2UsXG4gIHR5cGUgQXNzaXN0YW50VHJhbnNjcmlwdE1lc3NhZ2UsXG4gIHR5cGUgQXVkaW9NZXNzYWdlLFxuICB0eXBlIEF1ZGlvT3V0cHV0TWVzc2FnZSxcbiAgdHlwZSBKU09OTWVzc2FnZSxcbiAgdHlwZSBUaW1lU2xpY2UsXG4gIHR5cGUgVXNlckludGVycnVwdGlvbk1lc3NhZ2UsXG4gIHR5cGUgVXNlclRyYW5zY3JpcHRNZXNzYWdlLFxuICB0eXBlIFRvb2xDYWxsLFxuICB0eXBlIFRvb2xSZXNwb25zZSxcbiAgdHlwZSBUb29sRXJyb3IsXG4gIHR5cGUgQ2hhdE1ldGFkYXRhTWVzc2FnZSxcbiAgTGFuZ3VhZ2VNb2RlbE9wdGlvbixcbn0gZnJvbSAnQGh1bWVhaS92b2ljZSc7XG4iXSwibmFtZXMiOlsiYmFzZTY0VG9CbG9iIiwidXNlQ2FsbGJhY2siLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsImJhcmtDZW50ZXJGcmVxdWVuY2llcyIsIm1pblZhbHVlIiwibWF4VmFsdWUiLCJjb252ZXJ0TGluZWFyRnJlcXVlbmNpZXNUb0JhcmsiLCJsaW5lYXJEYXRhIiwic2FtcGxlUmF0ZSIsIm1heEZyZXF1ZW5jeSIsImZyZXF1ZW5jeVJlc29sdXRpb24iLCJsZW5ndGgiLCJiYXJrRnJlcXVlbmNpZXMiLCJtYXAiLCJiYXJrRnJlcSIsImxpbmVhckRhdGFJbmRleCIsIk1hdGgiLCJyb3VuZCIsImdlbmVyYXRlRW1wdHlGZnQiLCJBcnJheSIsImZyb20iLCJ1c2VTb3VuZFBsYXllciIsInByb3BzIiwiaXNQbGF5aW5nIiwic2V0SXNQbGF5aW5nIiwiaXNBdWRpb011dGVkIiwic2V0SXNBdWRpb011dGVkIiwiZmZ0Iiwic2V0RmZ0IiwiYXVkaW9Db250ZXh0IiwiYW5hbHlzZXJOb2RlIiwiZ2Fpbk5vZGUiLCJpc0luaXRpYWxpemVkIiwiY2xpcFF1ZXVlIiwiaXNQcm9jZXNzaW5nIiwiY3VycmVudGx5UGxheWluZ0F1ZGlvQnVmZmVyIiwiZnJlcXVlbmN5RGF0YUludGVydmFsSWQiLCJvblBsYXlBdWRpbyIsImN1cnJlbnQiLCJvbkVycm9yIiwicGxheU5leHRDbGlwIiwibmV4dENsaXAiLCJzaGlmdCIsImJ1ZmZlclNvdXJjZSIsImNyZWF0ZUJ1ZmZlclNvdXJjZSIsImJ1ZmZlciIsImNvbm5lY3QiLCJ1cGRhdGVGcmVxdWVuY3lEYXRhIiwiYnVmZmVyU2FtcGxlUmF0ZSIsImRhdGFBcnJheSIsIlVpbnQ4QXJyYXkiLCJmcmVxdWVuY3lCaW5Db3VudCIsImdldEJ5dGVGcmVxdWVuY3lEYXRhIiwiZSIsIndpbmRvdyIsInNldEludGVydmFsIiwic3RhcnQiLCJpZCIsIm9uZW5kZWQiLCJjbGVhckludGVydmFsIiwiZGlzY29ubmVjdCIsImluaXRQbGF5ZXIiLCJpbml0QXVkaW9Db250ZXh0IiwiQXVkaW9Db250ZXh0IiwiYW5hbHlzZXIiLCJjcmVhdGVBbmFseXNlciIsImdhaW4iLCJjcmVhdGVHYWluIiwiZmZ0U2l6ZSIsImRlc3RpbmF0aW9uIiwiYWRkVG9RdWV1ZSIsIm1lc3NhZ2UiLCJibG9iIiwiZGF0YSIsImFycmF5QnVmZmVyIiwiYXVkaW9CdWZmZXIiLCJkZWNvZGVBdWRpb0RhdGEiLCJwdXNoIiwiZU1lc3NhZ2UiLCJFcnJvciIsInN0b3BBbGwiLCJjbG9zZSIsInRoZW4iLCJjYXRjaCIsImNsZWFyUXVldWUiLCJzdG9wIiwibXV0ZUF1ZGlvIiwic2V0VmFsdWVBdFRpbWUiLCJjdXJyZW50VGltZSIsInVubXV0ZUF1ZGlvIiwiZ2V0U3VwcG9ydGVkTWltZVR5cGUiLCJNZXlkYSIsInVzZUVmZmVjdCIsInVzZU1pY3JvcGhvbmUiLCJzdHJlYW1SZWYiLCJvbkF1ZGlvQ2FwdHVyZWQiLCJpc011dGVkIiwic2V0SXNNdXRlZCIsImlzTXV0ZWRSZWYiLCJjdXJyZW50QW5hbHl6ZXIiLCJtaW1lVHlwZVJlZiIsInJlY29yZGVyIiwic2VuZEF1ZGlvIiwiZGF0YUhhbmRsZXIiLCJldmVudCIsImJ5dGVMZW5ndGgiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwic3RyZWFtIiwiY29udGV4dCIsImlucHV0IiwiY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UiLCJjcmVhdGVNZXlkYUFuYWx5emVyIiwic291cmNlIiwiZmVhdHVyZUV4dHJhY3RvcnMiLCJjYWxsYmFjayIsImZlYXR1cmVzIiwibmV3RmZ0IiwibG91ZG5lc3MiLCJzcGVjaWZpYyIsImVycm9yIiwibWltZVR5cGUiLCJNZWRpYVJlY29yZGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJnZXRUcmFja3MiLCJmb3JFYWNoIiwidHJhY2siLCJtdXRlIiwiZW5hYmxlZCIsInVubXV0ZSIsIm1pbWVUeXBlUmVzdWx0Iiwic3VjY2VzcyIsImNyZWF0ZVNvY2tldENvbmZpZyIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlTWVtbyIsIm5vb3AiLCJpbnRlcnZhbFRvRHVyYXRpb24iLCJ1c2VDYWxsRHVyYXRpb24iLCJpbnRlcnZhbCIsInN0YXJ0VGltZSIsInRpbWVzdGFtcCIsInNldFRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJkdXJhdGlvbiIsImVuZCIsImhvdXJzIiwidG9TdHJpbmciLCJwYWRTdGFydCIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwicmVzZXQiLCJjaGVja0ZvckF1ZGlvVHJhY2tzIiwiZ2V0QXVkaW9TdHJlYW0iLCJ1c2VFbmNvZGluZyIsInBlcm1pc3Npb24iLCJzZXRQZXJtaXNzaW9uIiwiZ2V0U3RyZWFtIiwia2VlcExhc3ROIiwibiIsImFyciIsInNsaWNlIiwidXNlTWVzc2FnZXMiLCJzZW5kTWVzc2FnZVRvUGFyZW50IiwibWVzc2FnZUhpc3RvcnlMaW1pdCIsInZvaWNlTWVzc2FnZU1hcCIsInNldFZvaWNlTWVzc2FnZU1hcCIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJsYXN0Vm9pY2VNZXNzYWdlIiwic2V0TGFzdFZvaWNlTWVzc2FnZSIsImxhc3RVc2VyTWVzc2FnZSIsInNldExhc3RVc2VyTWVzc2FnZSIsImNoYXRNZXRhZGF0YSIsInNldENoYXRNZXRhZGF0YSIsImNyZWF0ZUNvbm5lY3RNZXNzYWdlIiwicHJldiIsImNvbmNhdCIsInR5cGUiLCJyZWNlaXZlZEF0IiwiY3JlYXRlRGlzY29ubmVjdE1lc3NhZ2UiLCJvbk1lc3NhZ2UiLCJtYXRjaGluZ1RyYW5zY3JpcHQiLCJuZXdNYXAiLCJjbGVhck1lc3NhZ2VzIiwidXNlVG9vbFN0YXR1cyIsInN0b3JlIiwic2V0U3RvcmUiLCJhZGRUb1N0b3JlIiwiZW50cnkiLCJ0b29sX2NhbGxfaWQiLCJjYWxsIiwicmVzb2x2ZWQiLCJjbGVhclN0b3JlIiwiVG9vbEVycm9yU2NoZW1hIiwiVG9vbFJlc3BvbnNlU2NoZW1hIiwiVm9pY2VDbGllbnQiLCJ6IiwiVm9pY2VSZWFkeVN0YXRlIiwidXNlVm9pY2VDbGllbnQiLCJjbGllbnQiLCJyZWFkeVN0YXRlIiwic2V0UmVhZHlTdGF0ZSIsIm9uQXVkaW9NZXNzYWdlIiwib25Ub29sQ2FsbCIsIm9uT3BlbiIsIm9uQ2xvc2UiLCJjb25maWciLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImNyZWF0ZSIsIm9uIiwiY29udGVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb2RlIiwibGV2ZWwiLCJyZXNwb25zZSIsInBhcnNlZCIsInVuaW9uIiwic2FmZVBhcnNlIiwic2VuZFRvb2xNZXNzYWdlIiwic2VuZFNlc3Npb25TZXR0aW5ncyIsInNlc3Npb25TZXR0aW5ncyIsInNlbmRVc2VySW5wdXQiLCJ0ZXh0Iiwic2VuZEFzc2lzdGFudElucHV0IiwidG9vbE1lc3NhZ2UiLCJzZW5kUGF1c2VBc3Npc3RhbnRNZXNzYWdlIiwic2VuZFJlc3VtZUFzc2lzdGFudE1lc3NhZ2UiLCJqc3giLCJWb2ljZUNvbnRleHQiLCJ1c2VWb2ljZSIsImN0eCIsIlZvaWNlUHJvdmlkZXIiLCJjaGlsZHJlbiIsImNsZWFyTWVzc2FnZXNPbkRpc2Nvbm5lY3QiLCJjYWxsRHVyYXRpb25UaW1lc3RhbXAiLCJzdGFydFRpbWVyIiwic3RvcFRpbWVyIiwic3RhdHVzIiwic2V0U3RhdHVzIiwidmFsdWUiLCJzZXRFcnJvciIsImlzRXJyb3IiLCJpc01pY3JvcGhvbmVFcnJvciIsImlzU29ja2V0RXJyb3IiLCJpc0F1ZGlvRXJyb3IiLCJ0b29sU3RhdHVzIiwibWVzc2FnZVN0b3JlIiwidXBkYXRlRXJyb3IiLCJvbkNsaWVudEVycm9yIiwicGxheWVyIiwibWljUGVybWlzc2lvbiIsIm1pYyIsIk9iamVjdCIsImtleXMiLCJtaWNQcm9taXNlIiwicGxheWVyUHJvbWlzZSIsImFsbFNldHRsZWQiLCJkaXNjb25uZWN0RnJvbVZvaWNlIiwiZGlzY29ubmVjdE9uRXJyb3IiLCJyZWFzb24iLCJtaWNGZnQiLCJ0b29sU3RhdHVzU3RvcmUiLCJQcm92aWRlciIsIkNoYW5uZWxzIiwiVFRTU2VydmljZSIsIkF1ZGlvRW5jb2RpbmciLCJMYW5ndWFnZU1vZGVsT3B0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@humeai/voice-react/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@humeai/voice/dist/index.mjs":
/*!***************************************************!*\
  !*** ./node_modules/@humeai/voice/dist/index.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AssistantEndMessageSchema: () => (/* binding */ AssistantEndMessageSchema),\n/* harmony export */   AssistantTranscriptMessageSchema: () => (/* binding */ AssistantTranscriptMessageSchema),\n/* harmony export */   AudioEncoding: () => (/* binding */ AudioEncoding),\n/* harmony export */   AudioMessageSchema: () => (/* binding */ AudioMessageSchema),\n/* harmony export */   AudioOutputMessageSchema: () => (/* binding */ AudioOutputMessageSchema),\n/* harmony export */   AuthStrategySchema: () => (/* binding */ AuthStrategySchema),\n/* harmony export */   Channels: () => (/* binding */ Channels),\n/* harmony export */   ChatMetadataMessageSchema: () => (/* binding */ ChatMetadataMessageSchema),\n/* harmony export */   EmotionScoresSchema: () => (/* binding */ EmotionScoresSchema),\n/* harmony export */   JSONErrorMessageSchema: () => (/* binding */ JSONErrorMessageSchema),\n/* harmony export */   JSONMessageSchema: () => (/* binding */ JSONMessageSchema),\n/* harmony export */   LanguageModelOption: () => (/* binding */ LanguageModelOption),\n/* harmony export */   MimeType: () => (/* binding */ MimeType),\n/* harmony export */   SessionSettingsSchema: () => (/* binding */ SessionSettingsSchema),\n/* harmony export */   SocketConfigSchema: () => (/* binding */ SocketConfigSchema),\n/* harmony export */   SocketFailedToParseMessageError: () => (/* binding */ SocketFailedToParseMessageError),\n/* harmony export */   SocketUnknownMessageError: () => (/* binding */ SocketUnknownMessageError),\n/* harmony export */   TTSService: () => (/* binding */ TTSService),\n/* harmony export */   TimeSliceSchema: () => (/* binding */ TimeSliceSchema),\n/* harmony export */   ToolCallSchema: () => (/* binding */ ToolCallSchema),\n/* harmony export */   ToolErrorSchema: () => (/* binding */ ToolErrorSchema),\n/* harmony export */   ToolResponseContentSchema: () => (/* binding */ ToolResponseContentSchema),\n/* harmony export */   ToolResponseSchema: () => (/* binding */ ToolResponseSchema),\n/* harmony export */   TranscriptModelsSchema: () => (/* binding */ TranscriptModelsSchema),\n/* harmony export */   UserInterruptionMessageSchema: () => (/* binding */ UserInterruptionMessageSchema),\n/* harmony export */   UserTranscriptMessageSchema: () => (/* binding */ UserTranscriptMessageSchema),\n/* harmony export */   VoiceClient: () => (/* binding */ VoiceClient),\n/* harmony export */   WebSearchToolSchema: () => (/* binding */ WebSearchToolSchema),\n/* harmony export */   arrayBufferToBlob: () => (/* binding */ arrayBufferToBlob),\n/* harmony export */   base64ToBlob: () => (/* binding */ base64ToBlob),\n/* harmony export */   checkForAudioTracks: () => (/* binding */ checkForAudioTracks),\n/* harmony export */   createSocketConfig: () => (/* binding */ createSocketConfig),\n/* harmony export */   createSocketUrl: () => (/* binding */ createSocketUrl),\n/* harmony export */   defaultConfig: () => (/* binding */ defaultConfig),\n/* harmony export */   fetchAccessToken: () => (/* binding */ fetchAccessToken),\n/* harmony export */   getAudioStream: () => (/* binding */ getAudioStream),\n/* harmony export */   getSupportedMimeType: () => (/* binding */ getSupportedMimeType),\n/* harmony export */   isSocketFailedToParseMessageError: () => (/* binding */ isSocketFailedToParseMessageError),\n/* harmony export */   isSocketUnknownMessageError: () => (/* binding */ isSocketUnknownMessageError),\n/* harmony export */   parseAudioMessage: () => (/* binding */ parseAudioMessage),\n/* harmony export */   parseMessageData: () => (/* binding */ parseMessageData),\n/* harmony export */   parseMessageType: () => (/* binding */ parseMessageType)\n/* harmony export */ });\n/* harmony import */ var reconnecting_websocket__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! reconnecting-websocket */ \"(ssr)/./node_modules/reconnecting-websocket/dist/reconnecting-websocket-mjs.js\");\n/* harmony import */ var snakecase_keys__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! snakecase-keys */ \"(ssr)/./node_modules/snakecase-keys/index.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/zod/lib/index.mjs\");\n// src/lib/audio.ts\nvar MimeType = /* @__PURE__ */ ((MimeType2) => {\n  MimeType2[\"WEBM\"] = \"audio/webm\";\n  MimeType2[\"MP4\"] = \"audio/mp4\";\n  MimeType2[\"WAV\"] = \"audio/wav\";\n  return MimeType2;\n})(MimeType || {});\nfunction arrayBufferToBlob(arrayBuffer, mimeType) {\n  return new Blob([arrayBuffer], { type: mimeType });\n}\nfunction base64ToBlob(base64, contentType) {\n  const binaryString = window.atob(base64);\n  const bytes = new Array(binaryString.length);\n  for (let i = 0; i < binaryString.length; i++) {\n    bytes[i] = binaryString.charCodeAt(i);\n  }\n  const byteArray = new Uint8Array(bytes);\n  return new Blob([byteArray], { type: contentType });\n}\nfunction getSupportedMimeType() {\n  if (typeof MediaRecorder === \"undefined\") {\n    return {\n      success: false,\n      error: new Error(\"MediaRecorder is not supported\")\n    };\n  }\n  if (MediaRecorder.isTypeSupported(\"audio/webm\" /* WEBM */)) {\n    return { success: true, mimeType: \"audio/webm\" /* WEBM */ };\n  }\n  if (MediaRecorder.isTypeSupported(\"audio/mp4\" /* MP4 */)) {\n    return { success: true, mimeType: \"audio/mp4\" /* MP4 */ };\n  }\n  if (MediaRecorder.isTypeSupported(\"audio/wav\" /* WAV */)) {\n    return { success: true, mimeType: \"audio/wav\" /* WAV */ };\n  }\n  return {\n    success: false,\n    error: new Error(\"Browser does not support any compatible mime types\")\n  };\n}\n\n// src/lib/client.ts\n\n\n\n// src/lib/create-url.ts\nvar createSocketUrl = (config) => {\n  const url = new URL(`wss://${config.hostname}`);\n  url.pathname = \"/v0/evi/chat\";\n  if (config.auth.type === \"accessToken\") {\n    url.searchParams.set(\"accessToken\", config.auth.value);\n  } else if (config.auth.type === \"apiKey\") {\n    url.searchParams.set(\"apiKey\", config.auth.value);\n  }\n  if (config.configId) {\n    url.searchParams.set(\"config_id\", config.configId);\n  }\n  if (config.configVersion) {\n    url.searchParams.set(\"config_version\", String(config.configVersion));\n  }\n  if (config.resumedChatGroupId) {\n    url.searchParams.set(\n      \"resumed_chat_group_id\",\n      String(config.resumedChatGroupId)\n    );\n  }\n  return url.href;\n};\n\n// src/lib/errors.ts\nvar SocketUnknownMessageError = class extends Error {\n  constructor(message) {\n    super(`Unknown message type.${message ? \" \" + message : \"\"}`);\n    this.name = \"SocketUnknownMessageError\";\n  }\n};\nvar isSocketUnknownMessageError = (err) => {\n  return err instanceof SocketUnknownMessageError;\n};\nvar SocketFailedToParseMessageError = class extends Error {\n  constructor(message) {\n    super(\n      `Failed to parse message from socket.${message ? \" \" + message : \"\"}`\n    );\n    this.name = \"SocketFailedToParseMessageError\";\n  }\n};\nvar isSocketFailedToParseMessageError = (err) => {\n  return err instanceof SocketFailedToParseMessageError;\n};\n\n// src/models/audio-message.ts\n\nvar AudioMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"audio\"),\n  data: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"][\"instanceof\"](ArrayBuffer)\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\nvar parseAudioMessage = async (blob) => {\n  return blob.arrayBuffer().then((buffer) => {\n    return {\n      type: \"audio\",\n      data: buffer,\n      receivedAt: /* @__PURE__ */ new Date()\n    };\n  }).catch(() => {\n    return null;\n  });\n};\n\n// src/models/json-message.ts\n\n\n// src/models/assistant-end-message.ts\n\nvar AssistantEndMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"assistant_end\")\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\n\n// src/models/assistant-message.ts\n\n\n// src/models/transcript-models.ts\n\nvar EmotionScoresSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].record(zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(), zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].number());\nvar TranscriptModelsSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  // prosody scores are null when the message is not audio\n  // (e.g. text input from the user)\n  prosody: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n    scores: EmotionScoresSchema\n  }).nullish(),\n  time: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n    begin: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].number(),\n    end: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].number()\n  }).nullish()\n});\n\n// src/models/assistant-message.ts\nvar AssistantTranscriptMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"assistant_message\"),\n  id: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  message: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n    role: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"assistant\"),\n    content: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string()\n  }),\n  models: TranscriptModelsSchema,\n  from_text: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].boolean().catch(false)\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\n\n// src/models/audio-output-message.ts\n\nvar AudioOutputMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"audio_output\"),\n  id: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  data: zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\n\n// src/models/chat-metadata-message.ts\n\nvar ChatMetadataMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"chat_metadata\"),\n  chat_id: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  chat_group_id: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  request_id: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string()\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\n\n// src/models/error-message.ts\n\nvar JSONErrorMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"error\"),\n  code: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  slug: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  message: zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\n\n// src/models/tool-messages.ts\n\nvar literalSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].union([zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(), zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].number(), zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].boolean(), zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"][\"null\"]()]);\nvar jsonSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lazy(\n  () => zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].union([literalSchema, zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].array(jsonSchema), zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].record(jsonSchema)])\n);\nvar ToolCallSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"tool_call\"),\n  tool_type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"][\"enum\"]([\"builtin\", \"function\"]),\n  tool_call_id: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  response_required: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].boolean(),\n  name: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  parameters: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string()\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\nvar ToolResponseContentSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].union([zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(), jsonSchema]);\nvar ToolResponseSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"tool_response\"),\n  tool_call_id: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  content: ToolResponseContentSchema,\n  tool_name: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string().optional(),\n  tool_type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"][\"enum\"]([\"builtin\", \"function\"]).optional()\n});\nvar ToolErrorSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"tool_error\"),\n  tool_call_id: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string().nullish(),\n  error: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  code: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  level: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string()\n});\n\n// src/models/user-interruption-message.ts\n\n\n// src/models/time-slice.ts\n\nvar TimeSliceSchema = zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  begin: zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  end: zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n});\n\n// src/models/user-interruption-message.ts\nvar UserInterruptionMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"user_interruption\"),\n  time: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].union([TimeSliceSchema, zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].number(), zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"][\"null\"]()]).catch(null)\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\n\n// src/models/user-message.ts\n\nvar UserTranscriptMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"user_message\"),\n  message: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n    role: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"user\"),\n    content: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string()\n  }),\n  models: TranscriptModelsSchema,\n  from_text: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].boolean().nullish().catch(false)\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\n\n// src/models/json-message.ts\nvar JSONMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].union([\n  AudioOutputMessageSchema,\n  AssistantEndMessageSchema,\n  UserInterruptionMessageSchema,\n  UserTranscriptMessageSchema,\n  AssistantTranscriptMessageSchema,\n  JSONErrorMessageSchema,\n  ToolCallSchema,\n  ToolErrorSchema,\n  ToolResponseSchema,\n  ChatMetadataMessageSchema\n]);\n\n// src/utils/safeJson.ts\nvar safeJson = (input) => {\n  try {\n    return { success: true, data: JSON.parse(input) };\n  } catch (e) {\n    return { success: false };\n  }\n};\n\n// src/utils/unwrapJson.ts\nvar unwrapJson = (input, schema) => {\n  const json = safeJson(input);\n  if (!json.success) {\n    return null;\n  }\n  const message = schema.safeParse(json.data);\n  if (!message.success) {\n    return null;\n  }\n  return message.data;\n};\n\n// src/lib/message.ts\nvar parseMessageData = async (data) => {\n  if (data instanceof Blob) {\n    const message = await parseAudioMessage(data);\n    if (message) {\n      return {\n        success: true,\n        message\n      };\n    } else {\n      return {\n        success: false,\n        error: new SocketFailedToParseMessageError(\n          `Received blob was unable to be converted to ArrayBuffer.`\n        )\n      };\n    }\n  }\n  if (typeof data !== \"string\") {\n    return {\n      success: false,\n      error: new SocketFailedToParseMessageError(\n        `Expected a string but received ${typeof data}.`\n      )\n    };\n  }\n  const obj = unwrapJson(data, JSONMessageSchema);\n  if (obj === null) {\n    return {\n      success: false,\n      error: new SocketUnknownMessageError(\n        `Received JSON was not a known message type.`\n      )\n    };\n  }\n  return {\n    success: true,\n    message: obj\n  };\n};\nvar parseMessageType = async (event) => {\n  const data = event.data;\n  return parseMessageData(data);\n};\n\n// src/lib/client.ts\nvar VoiceClient = class _VoiceClient {\n  socket;\n  url;\n  eventHandlers = {};\n  constructor(config) {\n    this.url = createSocketUrl(config);\n    this.socket = new reconnecting_websocket__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.url, [], {\n      startClosed: true,\n      maxRetries: config.reconnectAttempts,\n      debug: config.debug\n    });\n  }\n  /**\n   * @name create\n   * @description\n   * Create a new VoiceClient.\n   * @param config - The configuration for the client.\n   * @returns\n   * A new VoiceClient instance.\n   * @example\n   * ```ts\n   * const client = VoiceClient.create(config);\n   * ```\n   */\n  static create(config) {\n    return new _VoiceClient(config);\n  }\n  /**\n   * @name on\n   * @description\n   * Attach events to the client.\n   * @param event - The event to attach to.\n   * @param callback - The callback to run when the event is triggered.\n   * @returns\n   * The VoiceClient instance.\n   * @example\n   * ```ts\n   * const client = VoiceClient.create(config);\n   * client.on('open', () => {\n   *  console.log('Socket opened');\n   * });\n   * ```\n   */\n  on(event, callback) {\n    this.eventHandlers[event] = callback;\n  }\n  handleOpen = () => {\n    this.eventHandlers.open?.();\n  };\n  handleMessage = (event) => {\n    void parseMessageType(event).then((result) => {\n      if (result.success) {\n        this.eventHandlers.message?.(result.message);\n      }\n    });\n  };\n  handleClose = (event) => {\n    this.eventHandlers.close?.(event);\n  };\n  handleError = (e) => {\n    const message = e.message ?? \"WebSocket error\";\n    this.eventHandlers.error?.(new Error(message));\n  };\n  /**\n   * @name connect\n   * @description\n   * Connect to the websocket.\n   */\n  connect() {\n    this.socket.reconnect();\n    this.socket.addEventListener(\"open\", this.handleOpen);\n    this.socket.addEventListener(\"message\", this.handleMessage);\n    this.socket.addEventListener(\"close\", this.handleClose);\n    this.socket.addEventListener(\"error\", this.handleError);\n    return this;\n  }\n  /**\n   * @name disconnect\n   * @description\n   * Disconnect from the websocket.\n   */\n  disconnect() {\n    this.socket?.close();\n    this.handleClose({ code: 1e3 });\n    this.socket.removeEventListener(\"open\", this.handleOpen);\n    this.socket.removeEventListener(\"message\", this.handleMessage);\n    this.socket.removeEventListener(\"close\", this.handleClose);\n    this.socket.removeEventListener(\"error\", this.handleError);\n  }\n  /**\n   * @name sendAudio\n   * @description\n   * Send audio data to the websocket.\n   */\n  sendAudio(audioBuffer) {\n    if (!this.socket) {\n      throw new Error(\"Socket is not connected.\");\n    }\n    if (this.socket.readyState !== WebSocket.OPEN) {\n      throw new Error(\"Socket is not open.\");\n    }\n    this.socket.send(audioBuffer);\n  }\n  /**\n   * @name sendUserInput\n   * @description\n   * Send text data to the websocket.\n   */\n  sendUserInput(text) {\n    if (!this.socket) {\n      throw new Error(\"Socket is not connected.\");\n    }\n    if (this.socket.readyState !== WebSocket.OPEN) {\n      throw new Error(\"Socket is not open.\");\n    }\n    const json = JSON.stringify({ text, type: \"user_input\" });\n    this.socket.send(json);\n  }\n  /**\n   * @name sendAssistantInput\n   * @description\n   * Send text data to the websocket for TTS.\n   */\n  sendAssistantInput(text) {\n    if (!this.socket) {\n      throw new Error(\"Socket is not connected.\");\n    }\n    if (this.socket.readyState !== WebSocket.OPEN) {\n      throw new Error(\"Socket is not open.\");\n    }\n    const json = JSON.stringify({ text, type: \"assistant_input\" });\n    this.socket.send(json);\n  }\n  /**\n   * @name sendSessionSettings\n   * @description\n   * Send session settings to the websocket\n   */\n  sendSessionSettings(sessionSettings) {\n    if (!this.socket) {\n      throw new Error(\"Socket is not connected.\");\n    }\n    if (this.socket.readyState !== WebSocket.OPEN) {\n      throw new Error(\"Socket is not open.\");\n    }\n    const snakeCaseSettings = snakecase_keys__WEBPACK_IMPORTED_MODULE_1__(sessionSettings);\n    const json = JSON.stringify({\n      ...snakeCaseSettings,\n      type: \"session_settings\"\n    });\n    this.socket.send(json);\n  }\n  /**\n   * @name sendToolMessage\n   * @description\n   * Send tool response to the websocket, e.g. for function calling\n   */\n  sendToolMessage(toolMessage) {\n    if (!this.socket) {\n      throw new Error(\"Socket is not connected.\");\n    }\n    if (this.socket.readyState !== WebSocket.OPEN) {\n      throw new Error(\"Socket is not open.\");\n    }\n    const json = JSON.stringify(toolMessage);\n    this.socket.send(json);\n  }\n  /**\n   * @name readyState\n   * @description\n   * The current ready state of the socket.\n   */\n  get readyState() {\n    return this.socket.readyState;\n  }\n  /**\n   * @name sendPauseAssistantMessage\n   * @description\n   * Send pause assistant message to the websocket. This pauses responses from EVI. Chat history is still saved and sent after resuming.\n   */\n  sendPauseAssistantMessage() {\n    if (!this.socket) {\n      throw new Error(\"Socket is not connected.\");\n    }\n    if (this.socket.readyState !== WebSocket.OPEN) {\n      throw new Error(\"Socket is not open.\");\n    }\n    const json = JSON.stringify({ type: \"pause_assistant_message\" });\n    this.socket.send(json);\n  }\n  /**\n   * @name sendResumeAssistantMessage\n   * @description\n   * Send resume assistant message to the websocket. This resumes responses from EVI. Chat history sent while paused will now be sent.\n   */\n  sendResumeAssistantMessage() {\n    if (!this.socket) {\n      throw new Error(\"Socket is not connected.\");\n    }\n    if (this.socket.readyState !== WebSocket.OPEN) {\n      throw new Error(\"Socket is not open.\");\n    }\n    const json = JSON.stringify({ type: \"resume_assistant_message\" });\n    this.socket.send(json);\n  }\n};\n\n// src/lib/create-socket-config.ts\n\n\n// src/models/auth.ts\n\nvar AuthStrategySchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].union([\n  zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n    type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"apiKey\"),\n    value: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string({\n      description: \"API key for the Hume API is required\"\n    })\n  }),\n  zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n    type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"accessToken\"),\n    value: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string({\n      description: \"Access token for the Hume API is required\"\n    })\n  })\n]);\n\n// src/lib/create-socket-config.ts\nvar SocketConfigSchema = zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  // Configs that are set at connection time\n  hostname: zod__WEBPACK_IMPORTED_MODULE_2__.z.string({\n    description: \"Hostname of the Hume API.\"\n  }),\n  reconnectAttempts: zod__WEBPACK_IMPORTED_MODULE_2__.z.number({\n    description: \"Number of times to attempt to reconnect to the API.\"\n  }).optional().default(30),\n  debug: zod__WEBPACK_IMPORTED_MODULE_2__.z.boolean({\n    description: \"Enable debug mode.\"\n  }).optional().default(false),\n  // Configs that are set as query params\n  auth: AuthStrategySchema,\n  configId: zod__WEBPACK_IMPORTED_MODULE_2__.z.string({\n    description: \"The ID of the configuration to use.\"\n  }).optional(),\n  configVersion: zod__WEBPACK_IMPORTED_MODULE_2__.z.number({\n    description: \"The version of the configuration to use.\"\n  }).optional(),\n  resumedChatGroupId: zod__WEBPACK_IMPORTED_MODULE_2__.z.string({\n    description: \"The ID of the chat group to resume.\"\n  }).optional()\n});\nvar defaultConfig = {\n  hostname: \"api.hume.ai\",\n  reconnectAttempts: 30,\n  debug: false\n};\nvar createSocketConfig = (config) => {\n  if (!config.auth)\n    throw new Error(\"Auth strategy is required.\");\n  return SocketConfigSchema.parse({\n    ...defaultConfig,\n    ...config,\n    auth: config.auth\n  });\n};\n\n// src/lib/tts.ts\nvar TTSService = /* @__PURE__ */ ((TTSService2) => {\n  TTSService2[\"DEFAULT\"] = \"hume_ai\";\n  TTSService2[\"ELEVEN_LABS\"] = \"eleven_labs\";\n  TTSService2[\"PLAY_HT\"] = \"play_ht\";\n  return TTSService2;\n})(TTSService || {});\n\n// src/lib/microphone.ts\nvar getAudioStream = async () => {\n  return navigator.mediaDevices.getUserMedia({\n    audio: {\n      echoCancellation: true,\n      noiseSuppression: true,\n      autoGainControl: true\n    },\n    video: false\n  });\n};\nvar checkForAudioTracks = (stream) => {\n  const tracks = stream.getAudioTracks();\n  if (tracks.length === 0) {\n    throw new Error(\"No audio tracks\");\n  }\n  if (tracks.length > 1) {\n    throw new Error(\"Multiple audio tracks\");\n  }\n  const track = tracks[0];\n  if (!track) {\n    throw new Error(\"No audio track\");\n  }\n};\n\n// src/lib/fetch-access-token.ts\nfunction base64Encode(str) {\n  if (typeof Buffer === \"function\") {\n    return Buffer.from(str).toString(\"base64\");\n  } else if (typeof btoa === \"function\") {\n    return btoa(str);\n  } else {\n    throw new Error(\n      \"Base64 encoding is not natively supported in this environment.\"\n    );\n  }\n}\nvar fetchAccessToken = async (args) => {\n  const { apiKey, secretKey, host = \"api.hume.ai\" } = args;\n  const authString = `${apiKey}:${secretKey}`;\n  const encoded = base64Encode(authString);\n  const res = await fetch(`https://${host}/oauth2-cc/token`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n      Authorization: `Basic ${encoded}`\n    },\n    body: new URLSearchParams({\n      grant_type: \"client_credentials\"\n    }).toString(),\n    cache: \"no-cache\"\n  });\n  const data = await res.json();\n  const accessToken = String(data[\"access_token\"]);\n  return accessToken;\n};\n\n// src/models/session-settings.ts\n\nvar Channels = /* @__PURE__ */ ((Channels2) => {\n  Channels2[Channels2[\"MONO\"] = 1] = \"MONO\";\n  Channels2[Channels2[\"STEREO\"] = 2] = \"STEREO\";\n  return Channels2;\n})(Channels || {});\nvar AudioEncoding = /* @__PURE__ */ ((AudioEncoding2) => {\n  AudioEncoding2[\"LINEAR16\"] = \"linear16\";\n  AudioEncoding2[\"OPUS\"] = \"opus\";\n  return AudioEncoding2;\n})(AudioEncoding || {});\nvar AudioConfigurationSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  channels: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].nativeEnum(Channels, {\n    description: \"Number of channels in the input audio.\"\n  }),\n  encoding: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].nativeEnum(AudioEncoding, {\n    description: \"Encoding of the input audio.\"\n  }),\n  sampleRate: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].number({\n    description: \"Sample rate of the input audio.\"\n  })\n});\nvar ContextConfigurationSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  text: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"][\"enum\"]([\"editable\", \"persistent\", \"temporary\"]).optional()\n});\nvar WebSearchToolSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  name: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"web_search\"),\n  fallback_content: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string().nullish().catch(null)\n});\nvar SessionSettingsSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  audio: AudioConfigurationSchema.optional(),\n  context: ContextConfigurationSchema.optional(),\n  languageModelApiKey: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string().optional(),\n  customSessionId: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string().optional(),\n  systemPrompt: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string().optional(),\n  builtin_tools: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].array(zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].union([WebSearchToolSchema, zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"][\"null\"]()])).optional()\n});\n\n// src/models/llm.ts\nvar LanguageModelOption = /* @__PURE__ */ ((LanguageModelOption2) => {\n  LanguageModelOption2[\"CLAUDE_3_OPUS\"] = \"CLAUDE_3_OPUS\";\n  LanguageModelOption2[\"CLAUDE_3_SONNET\"] = \"CLAUDE_3_SONNET\";\n  LanguageModelOption2[\"CLAUDE_3_HAIKU\"] = \"CLAUDE_3_HAIKU\";\n  LanguageModelOption2[\"CLAUDE_21\"] = \"CLAUDE_21\";\n  LanguageModelOption2[\"CLAUDE_INSTANT_12\"] = \"CLAUDE_INSTANT_12\";\n  LanguageModelOption2[\"GPT_4_TURBO_PREVIEW\"] = \"GPT_4_TURBO_PREVIEW\";\n  LanguageModelOption2[\"GPT_35_TURBO_0125\"] = \"GPT_35_TURBO_0125\";\n  LanguageModelOption2[\"GPT_35_TURBO\"] = \"GPT_35_TURBO\";\n  LanguageModelOption2[\"FIREWORKS_MIXTRAL_8X7B\"] = \"FIREWORKS_MIXTRAL_8X7B\";\n  return LanguageModelOption2;\n})(LanguageModelOption || {});\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1bWVhaS92b2ljZS9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdCQUFnQjtBQUNqQjtBQUNBLG1DQUFtQyxnQkFBZ0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IseUJBQXlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxtQkFBbUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMkQ7QUFDaEI7O0FBRTNDO0FBQ0E7QUFDQSwrQkFBK0IsZ0JBQWdCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsNkJBQTZCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyw2QkFBNkI7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDb0I7QUFDcEIseUJBQXlCLGtEQUFRO0FBQ2pDLFFBQVEsbURBQVM7QUFDakIsUUFBUSx5REFBWTtBQUNwQixDQUFDO0FBQ0Q7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDc0I7O0FBRXRCO0FBQ3FCO0FBQ3JCLGdD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Qzs7QUFFRDtBQUNBLHdCQUF3QixpREFBUztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixJQUFJO0FBQ0osYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsWUFBWTtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsOERBQXFCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVC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O0FBQ0EsR0FBRztBQUNILGNBQWMsa0RBQVU7QUFDeEI7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNELGlDQUFpQyxrREFBVTtBQUMzQyxRQUFRLGtEQUFVO0FBQ2xCLFFBQVEsbURBQVE7QUFDaEIsQ0FBQztBQUNELDBCQUEwQixrREFBVTtBQUNwQyxRQUFRLG1EQUFXO0FBQ25CLG9CQUFvQixrREFBVTtBQUM5QixDQUFDO0FBQ0QsNEJBQTRCLGtEQUFVO0FBQ3RDO0FBQ0E7QUFDQSx1QkFBdUIsa0RBQVU7QUFDakMsbUJBQW1CLGtEQUFVO0FBQzdCLGdCQUFnQixrREFBVTtBQUMxQixpQkFBaUIsaURBQVMsQ0FBQyxpREFBUyx1QkFBdUIsbURBQVE7QUFDbkUsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDJCQUEyQjtBQTRDMUI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXRoZXJhcGlzdC8uL25vZGVfbW9kdWxlcy9AaHVtZWFpL3ZvaWNlL2Rpc3QvaW5kZXgubWpzPzMzOTUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9hdWRpby50c1xudmFyIE1pbWVUeXBlID0gLyogQF9fUFVSRV9fICovICgoTWltZVR5cGUyKSA9PiB7XG4gIE1pbWVUeXBlMltcIldFQk1cIl0gPSBcImF1ZGlvL3dlYm1cIjtcbiAgTWltZVR5cGUyW1wiTVA0XCJdID0gXCJhdWRpby9tcDRcIjtcbiAgTWltZVR5cGUyW1wiV0FWXCJdID0gXCJhdWRpby93YXZcIjtcbiAgcmV0dXJuIE1pbWVUeXBlMjtcbn0pKE1pbWVUeXBlIHx8IHt9KTtcbmZ1bmN0aW9uIGFycmF5QnVmZmVyVG9CbG9iKGFycmF5QnVmZmVyLCBtaW1lVHlwZSkge1xuICByZXR1cm4gbmV3IEJsb2IoW2FycmF5QnVmZmVyXSwgeyB0eXBlOiBtaW1lVHlwZSB9KTtcbn1cbmZ1bmN0aW9uIGJhc2U2NFRvQmxvYihiYXNlNjQsIGNvbnRlbnRUeXBlKSB7XG4gIGNvbnN0IGJpbmFyeVN0cmluZyA9IHdpbmRvdy5hdG9iKGJhc2U2NCk7XG4gIGNvbnN0IGJ5dGVzID0gbmV3IEFycmF5KGJpbmFyeVN0cmluZy5sZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbmFyeVN0cmluZy5sZW5ndGg7IGkrKykge1xuICAgIGJ5dGVzW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gIH1cbiAgY29uc3QgYnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYnl0ZXMpO1xuICByZXR1cm4gbmV3IEJsb2IoW2J5dGVBcnJheV0sIHsgdHlwZTogY29udGVudFR5cGUgfSk7XG59XG5mdW5jdGlvbiBnZXRTdXBwb3J0ZWRNaW1lVHlwZSgpIHtcbiAgaWYgKHR5cGVvZiBNZWRpYVJlY29yZGVyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IG5ldyBFcnJvcihcIk1lZGlhUmVjb3JkZXIgaXMgbm90IHN1cHBvcnRlZFwiKVxuICAgIH07XG4gIH1cbiAgaWYgKE1lZGlhUmVjb3JkZXIuaXNUeXBlU3VwcG9ydGVkKFwiYXVkaW8vd2VibVwiIC8qIFdFQk0gKi8pKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWltZVR5cGU6IFwiYXVkaW8vd2VibVwiIC8qIFdFQk0gKi8gfTtcbiAgfVxuICBpZiAoTWVkaWFSZWNvcmRlci5pc1R5cGVTdXBwb3J0ZWQoXCJhdWRpby9tcDRcIiAvKiBNUDQgKi8pKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWltZVR5cGU6IFwiYXVkaW8vbXA0XCIgLyogTVA0ICovIH07XG4gIH1cbiAgaWYgKE1lZGlhUmVjb3JkZXIuaXNUeXBlU3VwcG9ydGVkKFwiYXVkaW8vd2F2XCIgLyogV0FWICovKSkge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1pbWVUeXBlOiBcImF1ZGlvL3dhdlwiIC8qIFdBViAqLyB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgc3VjY2VzczogZmFsc2UsXG4gICAgZXJyb3I6IG5ldyBFcnJvcihcIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBhbnkgY29tcGF0aWJsZSBtaW1lIHR5cGVzXCIpXG4gIH07XG59XG5cbi8vIHNyYy9saWIvY2xpZW50LnRzXG5pbXBvcnQgUmVjb25uZWN0aW5nV2Vic29ja2V0IGZyb20gXCJyZWNvbm5lY3Rpbmctd2Vic29ja2V0XCI7XG5pbXBvcnQgc25ha2VjYXNlS2V5cyBmcm9tIFwic25ha2VjYXNlLWtleXNcIjtcblxuLy8gc3JjL2xpYi9jcmVhdGUtdXJsLnRzXG52YXIgY3JlYXRlU29ja2V0VXJsID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCB1cmwgPSBuZXcgVVJMKGB3c3M6Ly8ke2NvbmZpZy5ob3N0bmFtZX1gKTtcbiAgdXJsLnBhdGhuYW1lID0gXCIvdjAvZXZpL2NoYXRcIjtcbiAgaWYgKGNvbmZpZy5hdXRoLnR5cGUgPT09IFwiYWNjZXNzVG9rZW5cIikge1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiYWNjZXNzVG9rZW5cIiwgY29uZmlnLmF1dGgudmFsdWUpO1xuICB9IGVsc2UgaWYgKGNvbmZpZy5hdXRoLnR5cGUgPT09IFwiYXBpS2V5XCIpIHtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImFwaUtleVwiLCBjb25maWcuYXV0aC52YWx1ZSk7XG4gIH1cbiAgaWYgKGNvbmZpZy5jb25maWdJZCkge1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiY29uZmlnX2lkXCIsIGNvbmZpZy5jb25maWdJZCk7XG4gIH1cbiAgaWYgKGNvbmZpZy5jb25maWdWZXJzaW9uKSB7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJjb25maWdfdmVyc2lvblwiLCBTdHJpbmcoY29uZmlnLmNvbmZpZ1ZlcnNpb24pKTtcbiAgfVxuICBpZiAoY29uZmlnLnJlc3VtZWRDaGF0R3JvdXBJZCkge1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFxuICAgICAgXCJyZXN1bWVkX2NoYXRfZ3JvdXBfaWRcIixcbiAgICAgIFN0cmluZyhjb25maWcucmVzdW1lZENoYXRHcm91cElkKVxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHVybC5ocmVmO1xufTtcblxuLy8gc3JjL2xpYi9lcnJvcnMudHNcbnZhciBTb2NrZXRVbmtub3duTWVzc2FnZUVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICBzdXBlcihgVW5rbm93biBtZXNzYWdlIHR5cGUuJHttZXNzYWdlID8gXCIgXCIgKyBtZXNzYWdlIDogXCJcIn1gKTtcbiAgICB0aGlzLm5hbWUgPSBcIlNvY2tldFVua25vd25NZXNzYWdlRXJyb3JcIjtcbiAgfVxufTtcbnZhciBpc1NvY2tldFVua25vd25NZXNzYWdlRXJyb3IgPSAoZXJyKSA9PiB7XG4gIHJldHVybiBlcnIgaW5zdGFuY2VvZiBTb2NrZXRVbmtub3duTWVzc2FnZUVycm9yO1xufTtcbnZhciBTb2NrZXRGYWlsZWRUb1BhcnNlTWVzc2FnZUVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICBzdXBlcihcbiAgICAgIGBGYWlsZWQgdG8gcGFyc2UgbWVzc2FnZSBmcm9tIHNvY2tldC4ke21lc3NhZ2UgPyBcIiBcIiArIG1lc3NhZ2UgOiBcIlwifWBcbiAgICApO1xuICAgIHRoaXMubmFtZSA9IFwiU29ja2V0RmFpbGVkVG9QYXJzZU1lc3NhZ2VFcnJvclwiO1xuICB9XG59O1xudmFyIGlzU29ja2V0RmFpbGVkVG9QYXJzZU1lc3NhZ2VFcnJvciA9IChlcnIpID0+IHtcbiAgcmV0dXJuIGVyciBpbnN0YW5jZW9mIFNvY2tldEZhaWxlZFRvUGFyc2VNZXNzYWdlRXJyb3I7XG59O1xuXG4vLyBzcmMvbW9kZWxzL2F1ZGlvLW1lc3NhZ2UudHNcbmltcG9ydCB6IGZyb20gXCJ6b2RcIjtcbnZhciBBdWRpb01lc3NhZ2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHR5cGU6IHoubGl0ZXJhbChcImF1ZGlvXCIpLFxuICBkYXRhOiB6Lmluc3RhbmNlb2YoQXJyYXlCdWZmZXIpXG59KS50cmFuc2Zvcm0oKG9iaikgPT4ge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIHtcbiAgICByZWNlaXZlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICB9KTtcbn0pO1xudmFyIHBhcnNlQXVkaW9NZXNzYWdlID0gYXN5bmMgKGJsb2IpID0+IHtcbiAgcmV0dXJuIGJsb2IuYXJyYXlCdWZmZXIoKS50aGVuKChidWZmZXIpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJhdWRpb1wiLFxuICAgICAgZGF0YTogYnVmZmVyLFxuICAgICAgcmVjZWl2ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICB9O1xuICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0pO1xufTtcblxuLy8gc3JjL21vZGVscy9qc29uLW1lc3NhZ2UudHNcbmltcG9ydCB6MTIgZnJvbSBcInpvZFwiO1xuXG4vLyBzcmMvbW9kZWxzL2Fzc2lzdGFudC1lbmQtbWVzc2FnZS50c1xuaW1wb3J0IHoyIGZyb20gXCJ6b2RcIjtcbnZhciBBc3Npc3RhbnRFbmRNZXNzYWdlU2NoZW1hID0gejIub2JqZWN0KHtcbiAgdHlwZTogejIubGl0ZXJhbChcImFzc2lzdGFudF9lbmRcIilcbn0pLnRyYW5zZm9ybSgob2JqKSA9PiB7XG4gIHJldHVybiBPYmplY3QuYXNzaWduKG9iaiwge1xuICAgIHJlY2VpdmVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gIH0pO1xufSk7XG5cbi8vIHNyYy9tb2RlbHMvYXNzaXN0YW50LW1lc3NhZ2UudHNcbmltcG9ydCB6NCBmcm9tIFwiem9kXCI7XG5cbi8vIHNyYy9tb2RlbHMvdHJhbnNjcmlwdC1tb2RlbHMudHNcbmltcG9ydCB6MyBmcm9tIFwiem9kXCI7XG52YXIgRW1vdGlvblNjb3Jlc1NjaGVtYSA9IHozLnJlY29yZCh6My5zdHJpbmcoKSwgejMubnVtYmVyKCkpO1xudmFyIFRyYW5zY3JpcHRNb2RlbHNTY2hlbWEgPSB6My5vYmplY3Qoe1xuICAvLyBwcm9zb2R5IHNjb3JlcyBhcmUgbnVsbCB3aGVuIHRoZSBtZXNzYWdlIGlzIG5vdCBhdWRpb1xuICAvLyAoZS5nLiB0ZXh0IGlucHV0IGZyb20gdGhlIHVzZXIpXG4gIHByb3NvZHk6IHozLm9iamVjdCh7XG4gICAgc2NvcmVzOiBFbW90aW9uU2NvcmVzU2NoZW1hXG4gIH0pLm51bGxpc2goKSxcbiAgdGltZTogejMub2JqZWN0KHtcbiAgICBiZWdpbjogejMubnVtYmVyKCksXG4gICAgZW5kOiB6My5udW1iZXIoKVxuICB9KS5udWxsaXNoKClcbn0pO1xuXG4vLyBzcmMvbW9kZWxzL2Fzc2lzdGFudC1tZXNzYWdlLnRzXG52YXIgQXNzaXN0YW50VHJhbnNjcmlwdE1lc3NhZ2VTY2hlbWEgPSB6NC5vYmplY3Qoe1xuICB0eXBlOiB6NC5saXRlcmFsKFwiYXNzaXN0YW50X21lc3NhZ2VcIiksXG4gIGlkOiB6NC5zdHJpbmcoKSxcbiAgbWVzc2FnZTogejQub2JqZWN0KHtcbiAgICByb2xlOiB6NC5saXRlcmFsKFwiYXNzaXN0YW50XCIpLFxuICAgIGNvbnRlbnQ6IHo0LnN0cmluZygpXG4gIH0pLFxuICBtb2RlbHM6IFRyYW5zY3JpcHRNb2RlbHNTY2hlbWEsXG4gIGZyb21fdGV4dDogejQuYm9vbGVhbigpLmNhdGNoKGZhbHNlKVxufSkudHJhbnNmb3JtKChvYmopID0+IHtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqLCB7XG4gICAgcmVjZWl2ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgfSk7XG59KTtcblxuLy8gc3JjL21vZGVscy9hdWRpby1vdXRwdXQtbWVzc2FnZS50c1xuaW1wb3J0IHsgeiBhcyB6NSB9IGZyb20gXCJ6b2RcIjtcbnZhciBBdWRpb091dHB1dE1lc3NhZ2VTY2hlbWEgPSB6NS5vYmplY3Qoe1xuICB0eXBlOiB6NS5saXRlcmFsKFwiYXVkaW9fb3V0cHV0XCIpLFxuICBpZDogejUuc3RyaW5nKCksXG4gIGRhdGE6IHo1LnN0cmluZygpXG59KS50cmFuc2Zvcm0oKG9iaikgPT4ge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIHtcbiAgICByZWNlaXZlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICB9KTtcbn0pO1xuXG4vLyBzcmMvbW9kZWxzL2NoYXQtbWV0YWRhdGEtbWVzc2FnZS50c1xuaW1wb3J0IHo2IGZyb20gXCJ6b2RcIjtcbnZhciBDaGF0TWV0YWRhdGFNZXNzYWdlU2NoZW1hID0gejYub2JqZWN0KHtcbiAgdHlwZTogejYubGl0ZXJhbChcImNoYXRfbWV0YWRhdGFcIiksXG4gIGNoYXRfaWQ6IHo2LnN0cmluZygpLFxuICBjaGF0X2dyb3VwX2lkOiB6Ni5zdHJpbmcoKSxcbiAgcmVxdWVzdF9pZDogejYuc3RyaW5nKClcbn0pLnRyYW5zZm9ybSgob2JqKSA9PiB7XG4gIHJldHVybiBPYmplY3QuYXNzaWduKG9iaiwge1xuICAgIHJlY2VpdmVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gIH0pO1xufSk7XG5cbi8vIHNyYy9tb2RlbHMvZXJyb3ItbWVzc2FnZS50c1xuaW1wb3J0IHsgeiBhcyB6NyB9IGZyb20gXCJ6b2RcIjtcbnZhciBKU09ORXJyb3JNZXNzYWdlU2NoZW1hID0gejcub2JqZWN0KHtcbiAgdHlwZTogejcubGl0ZXJhbChcImVycm9yXCIpLFxuICBjb2RlOiB6Ny5zdHJpbmcoKSxcbiAgc2x1Zzogejcuc3RyaW5nKCksXG4gIG1lc3NhZ2U6IHo3LnN0cmluZygpXG59KS50cmFuc2Zvcm0oKG9iaikgPT4ge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIHtcbiAgICByZWNlaXZlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICB9KTtcbn0pO1xuXG4vLyBzcmMvbW9kZWxzL3Rvb2wtbWVzc2FnZXMudHNcbmltcG9ydCB6OCBmcm9tIFwiem9kXCI7XG52YXIgbGl0ZXJhbFNjaGVtYSA9IHo4LnVuaW9uKFt6OC5zdHJpbmcoKSwgejgubnVtYmVyKCksIHo4LmJvb2xlYW4oKSwgejgubnVsbCgpXSk7XG52YXIganNvblNjaGVtYSA9IHo4LmxhenkoXG4gICgpID0+IHo4LnVuaW9uKFtsaXRlcmFsU2NoZW1hLCB6OC5hcnJheShqc29uU2NoZW1hKSwgejgucmVjb3JkKGpzb25TY2hlbWEpXSlcbik7XG52YXIgVG9vbENhbGxTY2hlbWEgPSB6OC5vYmplY3Qoe1xuICB0eXBlOiB6OC5saXRlcmFsKFwidG9vbF9jYWxsXCIpLFxuICB0b29sX3R5cGU6IHo4LmVudW0oW1wiYnVpbHRpblwiLCBcImZ1bmN0aW9uXCJdKSxcbiAgdG9vbF9jYWxsX2lkOiB6OC5zdHJpbmcoKSxcbiAgcmVzcG9uc2VfcmVxdWlyZWQ6IHo4LmJvb2xlYW4oKSxcbiAgbmFtZTogejguc3RyaW5nKCksXG4gIHBhcmFtZXRlcnM6IHo4LnN0cmluZygpXG59KS50cmFuc2Zvcm0oKG9iaikgPT4ge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIHtcbiAgICByZWNlaXZlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICB9KTtcbn0pO1xudmFyIFRvb2xSZXNwb25zZUNvbnRlbnRTY2hlbWEgPSB6OC51bmlvbihbejguc3RyaW5nKCksIGpzb25TY2hlbWFdKTtcbnZhciBUb29sUmVzcG9uc2VTY2hlbWEgPSB6OC5vYmplY3Qoe1xuICB0eXBlOiB6OC5saXRlcmFsKFwidG9vbF9yZXNwb25zZVwiKSxcbiAgdG9vbF9jYWxsX2lkOiB6OC5zdHJpbmcoKSxcbiAgY29udGVudDogVG9vbFJlc3BvbnNlQ29udGVudFNjaGVtYSxcbiAgdG9vbF9uYW1lOiB6OC5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB0b29sX3R5cGU6IHo4LmVudW0oW1wiYnVpbHRpblwiLCBcImZ1bmN0aW9uXCJdKS5vcHRpb25hbCgpXG59KTtcbnZhciBUb29sRXJyb3JTY2hlbWEgPSB6OC5vYmplY3Qoe1xuICB0eXBlOiB6OC5saXRlcmFsKFwidG9vbF9lcnJvclwiKSxcbiAgdG9vbF9jYWxsX2lkOiB6OC5zdHJpbmcoKSxcbiAgY29udGVudDogejguc3RyaW5nKCkubnVsbGlzaCgpLFxuICBlcnJvcjogejguc3RyaW5nKCksXG4gIGNvZGU6IHo4LnN0cmluZygpLFxuICBsZXZlbDogejguc3RyaW5nKClcbn0pO1xuXG4vLyBzcmMvbW9kZWxzL3VzZXItaW50ZXJydXB0aW9uLW1lc3NhZ2UudHNcbmltcG9ydCB6MTAgZnJvbSBcInpvZFwiO1xuXG4vLyBzcmMvbW9kZWxzL3RpbWUtc2xpY2UudHNcbmltcG9ydCB7IHogYXMgejkgfSBmcm9tIFwiem9kXCI7XG52YXIgVGltZVNsaWNlU2NoZW1hID0gejkub2JqZWN0KHtcbiAgYmVnaW46IHo5Lm51bWJlcigpLFxuICBlbmQ6IHo5Lm51bWJlcigpXG59KTtcblxuLy8gc3JjL21vZGVscy91c2VyLWludGVycnVwdGlvbi1tZXNzYWdlLnRzXG52YXIgVXNlckludGVycnVwdGlvbk1lc3NhZ2VTY2hlbWEgPSB6MTAub2JqZWN0KHtcbiAgdHlwZTogejEwLmxpdGVyYWwoXCJ1c2VyX2ludGVycnVwdGlvblwiKSxcbiAgdGltZTogejEwLnVuaW9uKFtUaW1lU2xpY2VTY2hlbWEsIHoxMC5udW1iZXIoKSwgejEwLm51bGwoKV0pLmNhdGNoKG51bGwpXG59KS50cmFuc2Zvcm0oKG9iaikgPT4ge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIHtcbiAgICByZWNlaXZlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICB9KTtcbn0pO1xuXG4vLyBzcmMvbW9kZWxzL3VzZXItbWVzc2FnZS50c1xuaW1wb3J0IHoxMSBmcm9tIFwiem9kXCI7XG52YXIgVXNlclRyYW5zY3JpcHRNZXNzYWdlU2NoZW1hID0gejExLm9iamVjdCh7XG4gIHR5cGU6IHoxMS5saXRlcmFsKFwidXNlcl9tZXNzYWdlXCIpLFxuICBtZXNzYWdlOiB6MTEub2JqZWN0KHtcbiAgICByb2xlOiB6MTEubGl0ZXJhbChcInVzZXJcIiksXG4gICAgY29udGVudDogejExLnN0cmluZygpXG4gIH0pLFxuICBtb2RlbHM6IFRyYW5zY3JpcHRNb2RlbHNTY2hlbWEsXG4gIGZyb21fdGV4dDogejExLmJvb2xlYW4oKS5udWxsaXNoKCkuY2F0Y2goZmFsc2UpXG59KS50cmFuc2Zvcm0oKG9iaikgPT4ge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIHtcbiAgICByZWNlaXZlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICB9KTtcbn0pO1xuXG4vLyBzcmMvbW9kZWxzL2pzb24tbWVzc2FnZS50c1xudmFyIEpTT05NZXNzYWdlU2NoZW1hID0gejEyLnVuaW9uKFtcbiAgQXVkaW9PdXRwdXRNZXNzYWdlU2NoZW1hLFxuICBBc3Npc3RhbnRFbmRNZXNzYWdlU2NoZW1hLFxuICBVc2VySW50ZXJydXB0aW9uTWVzc2FnZVNjaGVtYSxcbiAgVXNlclRyYW5zY3JpcHRNZXNzYWdlU2NoZW1hLFxuICBBc3Npc3RhbnRUcmFuc2NyaXB0TWVzc2FnZVNjaGVtYSxcbiAgSlNPTkVycm9yTWVzc2FnZVNjaGVtYSxcbiAgVG9vbENhbGxTY2hlbWEsXG4gIFRvb2xFcnJvclNjaGVtYSxcbiAgVG9vbFJlc3BvbnNlU2NoZW1hLFxuICBDaGF0TWV0YWRhdGFNZXNzYWdlU2NoZW1hXG5dKTtcblxuLy8gc3JjL3V0aWxzL3NhZmVKc29uLnRzXG52YXIgc2FmZUpzb24gPSAoaW5wdXQpID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBKU09OLnBhcnNlKGlucHV0KSB9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UgfTtcbiAgfVxufTtcblxuLy8gc3JjL3V0aWxzL3Vud3JhcEpzb24udHNcbnZhciB1bndyYXBKc29uID0gKGlucHV0LCBzY2hlbWEpID0+IHtcbiAgY29uc3QganNvbiA9IHNhZmVKc29uKGlucHV0KTtcbiAgaWYgKCFqc29uLnN1Y2Nlc3MpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBtZXNzYWdlID0gc2NoZW1hLnNhZmVQYXJzZShqc29uLmRhdGEpO1xuICBpZiAoIW1lc3NhZ2Uuc3VjY2Vzcykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBtZXNzYWdlLmRhdGE7XG59O1xuXG4vLyBzcmMvbGliL21lc3NhZ2UudHNcbnZhciBwYXJzZU1lc3NhZ2VEYXRhID0gYXN5bmMgKGRhdGEpID0+IHtcbiAgaWYgKGRhdGEgaW5zdGFuY2VvZiBCbG9iKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHBhcnNlQXVkaW9NZXNzYWdlKGRhdGEpO1xuICAgIGlmIChtZXNzYWdlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG5ldyBTb2NrZXRGYWlsZWRUb1BhcnNlTWVzc2FnZUVycm9yKFxuICAgICAgICAgIGBSZWNlaXZlZCBibG9iIHdhcyB1bmFibGUgdG8gYmUgY29udmVydGVkIHRvIEFycmF5QnVmZmVyLmBcbiAgICAgICAgKVxuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgaWYgKHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IG5ldyBTb2NrZXRGYWlsZWRUb1BhcnNlTWVzc2FnZUVycm9yKFxuICAgICAgICBgRXhwZWN0ZWQgYSBzdHJpbmcgYnV0IHJlY2VpdmVkICR7dHlwZW9mIGRhdGF9LmBcbiAgICAgIClcbiAgICB9O1xuICB9XG4gIGNvbnN0IG9iaiA9IHVud3JhcEpzb24oZGF0YSwgSlNPTk1lc3NhZ2VTY2hlbWEpO1xuICBpZiAob2JqID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IG5ldyBTb2NrZXRVbmtub3duTWVzc2FnZUVycm9yKFxuICAgICAgICBgUmVjZWl2ZWQgSlNPTiB3YXMgbm90IGEga25vd24gbWVzc2FnZSB0eXBlLmBcbiAgICAgIClcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgc3VjY2VzczogdHJ1ZSxcbiAgICBtZXNzYWdlOiBvYmpcbiAgfTtcbn07XG52YXIgcGFyc2VNZXNzYWdlVHlwZSA9IGFzeW5jIChldmVudCkgPT4ge1xuICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YTtcbiAgcmV0dXJuIHBhcnNlTWVzc2FnZURhdGEoZGF0YSk7XG59O1xuXG4vLyBzcmMvbGliL2NsaWVudC50c1xudmFyIFZvaWNlQ2xpZW50ID0gY2xhc3MgX1ZvaWNlQ2xpZW50IHtcbiAgc29ja2V0O1xuICB1cmw7XG4gIGV2ZW50SGFuZGxlcnMgPSB7fTtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy51cmwgPSBjcmVhdGVTb2NrZXRVcmwoY29uZmlnKTtcbiAgICB0aGlzLnNvY2tldCA9IG5ldyBSZWNvbm5lY3RpbmdXZWJzb2NrZXQodGhpcy51cmwsIFtdLCB7XG4gICAgICBzdGFydENsb3NlZDogdHJ1ZSxcbiAgICAgIG1heFJldHJpZXM6IGNvbmZpZy5yZWNvbm5lY3RBdHRlbXB0cyxcbiAgICAgIGRlYnVnOiBjb25maWcuZGVidWdcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQG5hbWUgY3JlYXRlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGUgYSBuZXcgVm9pY2VDbGllbnQuXG4gICAqIEBwYXJhbSBjb25maWcgLSBUaGUgY29uZmlndXJhdGlvbiBmb3IgdGhlIGNsaWVudC5cbiAgICogQHJldHVybnNcbiAgICogQSBuZXcgVm9pY2VDbGllbnQgaW5zdGFuY2UuXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IGNsaWVudCA9IFZvaWNlQ2xpZW50LmNyZWF0ZShjb25maWcpO1xuICAgKiBgYGBcbiAgICovXG4gIHN0YXRpYyBjcmVhdGUoY29uZmlnKSB7XG4gICAgcmV0dXJuIG5ldyBfVm9pY2VDbGllbnQoY29uZmlnKTtcbiAgfVxuICAvKipcbiAgICogQG5hbWUgb25cbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEF0dGFjaCBldmVudHMgdG8gdGhlIGNsaWVudC5cbiAgICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIGF0dGFjaCB0by5cbiAgICogQHBhcmFtIGNhbGxiYWNrIC0gVGhlIGNhbGxiYWNrIHRvIHJ1biB3aGVuIHRoZSBldmVudCBpcyB0cmlnZ2VyZWQuXG4gICAqIEByZXR1cm5zXG4gICAqIFRoZSBWb2ljZUNsaWVudCBpbnN0YW5jZS5cbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogY29uc3QgY2xpZW50ID0gVm9pY2VDbGllbnQuY3JlYXRlKGNvbmZpZyk7XG4gICAqIGNsaWVudC5vbignb3BlbicsICgpID0+IHtcbiAgICogIGNvbnNvbGUubG9nKCdTb2NrZXQgb3BlbmVkJyk7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICovXG4gIG9uKGV2ZW50LCBjYWxsYmFjaykge1xuICAgIHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudF0gPSBjYWxsYmFjaztcbiAgfVxuICBoYW5kbGVPcGVuID0gKCkgPT4ge1xuICAgIHRoaXMuZXZlbnRIYW5kbGVycy5vcGVuPy4oKTtcbiAgfTtcbiAgaGFuZGxlTWVzc2FnZSA9IChldmVudCkgPT4ge1xuICAgIHZvaWQgcGFyc2VNZXNzYWdlVHlwZShldmVudCkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgdGhpcy5ldmVudEhhbmRsZXJzLm1lc3NhZ2U/LihyZXN1bHQubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIGhhbmRsZUNsb3NlID0gKGV2ZW50KSA9PiB7XG4gICAgdGhpcy5ldmVudEhhbmRsZXJzLmNsb3NlPy4oZXZlbnQpO1xuICB9O1xuICBoYW5kbGVFcnJvciA9IChlKSA9PiB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGUubWVzc2FnZSA/PyBcIldlYlNvY2tldCBlcnJvclwiO1xuICAgIHRoaXMuZXZlbnRIYW5kbGVycy5lcnJvcj8uKG5ldyBFcnJvcihtZXNzYWdlKSk7XG4gIH07XG4gIC8qKlxuICAgKiBAbmFtZSBjb25uZWN0XG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDb25uZWN0IHRvIHRoZSB3ZWJzb2NrZXQuXG4gICAqL1xuICBjb25uZWN0KCkge1xuICAgIHRoaXMuc29ja2V0LnJlY29ubmVjdCgpO1xuICAgIHRoaXMuc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJvcGVuXCIsIHRoaXMuaGFuZGxlT3Blbik7XG4gICAgdGhpcy5zb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgdGhpcy5oYW5kbGVNZXNzYWdlKTtcbiAgICB0aGlzLnNvY2tldC5hZGRFdmVudExpc3RlbmVyKFwiY2xvc2VcIiwgdGhpcy5oYW5kbGVDbG9zZSk7XG4gICAgdGhpcy5zb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIHRoaXMuaGFuZGxlRXJyb3IpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBAbmFtZSBkaXNjb25uZWN0XG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBEaXNjb25uZWN0IGZyb20gdGhlIHdlYnNvY2tldC5cbiAgICovXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgdGhpcy5zb2NrZXQ/LmNsb3NlKCk7XG4gICAgdGhpcy5oYW5kbGVDbG9zZSh7IGNvZGU6IDFlMyB9KTtcbiAgICB0aGlzLnNvY2tldC5yZW1vdmVFdmVudExpc3RlbmVyKFwib3BlblwiLCB0aGlzLmhhbmRsZU9wZW4pO1xuICAgIHRoaXMuc29ja2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHRoaXMuaGFuZGxlTWVzc2FnZSk7XG4gICAgdGhpcy5zb2NrZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsb3NlXCIsIHRoaXMuaGFuZGxlQ2xvc2UpO1xuICAgIHRoaXMuc29ja2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCB0aGlzLmhhbmRsZUVycm9yKTtcbiAgfVxuICAvKipcbiAgICogQG5hbWUgc2VuZEF1ZGlvXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZW5kIGF1ZGlvIGRhdGEgdG8gdGhlIHdlYnNvY2tldC5cbiAgICovXG4gIHNlbmRBdWRpbyhhdWRpb0J1ZmZlcikge1xuICAgIGlmICghdGhpcy5zb2NrZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvY2tldCBpcyBub3QgY29ubmVjdGVkLlwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc29ja2V0LnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb2NrZXQgaXMgbm90IG9wZW4uXCIpO1xuICAgIH1cbiAgICB0aGlzLnNvY2tldC5zZW5kKGF1ZGlvQnVmZmVyKTtcbiAgfVxuICAvKipcbiAgICogQG5hbWUgc2VuZFVzZXJJbnB1dFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2VuZCB0ZXh0IGRhdGEgdG8gdGhlIHdlYnNvY2tldC5cbiAgICovXG4gIHNlbmRVc2VySW5wdXQodGV4dCkge1xuICAgIGlmICghdGhpcy5zb2NrZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvY2tldCBpcyBub3QgY29ubmVjdGVkLlwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc29ja2V0LnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb2NrZXQgaXMgbm90IG9wZW4uXCIpO1xuICAgIH1cbiAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkoeyB0ZXh0LCB0eXBlOiBcInVzZXJfaW5wdXRcIiB9KTtcbiAgICB0aGlzLnNvY2tldC5zZW5kKGpzb24pO1xuICB9XG4gIC8qKlxuICAgKiBAbmFtZSBzZW5kQXNzaXN0YW50SW5wdXRcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNlbmQgdGV4dCBkYXRhIHRvIHRoZSB3ZWJzb2NrZXQgZm9yIFRUUy5cbiAgICovXG4gIHNlbmRBc3Npc3RhbnRJbnB1dCh0ZXh0KSB7XG4gICAgaWYgKCF0aGlzLnNvY2tldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU29ja2V0IGlzIG5vdCBjb25uZWN0ZWQuXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zb2NrZXQucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvY2tldCBpcyBub3Qgb3Blbi5cIik7XG4gICAgfVxuICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeSh7IHRleHQsIHR5cGU6IFwiYXNzaXN0YW50X2lucHV0XCIgfSk7XG4gICAgdGhpcy5zb2NrZXQuc2VuZChqc29uKTtcbiAgfVxuICAvKipcbiAgICogQG5hbWUgc2VuZFNlc3Npb25TZXR0aW5nc1xuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2VuZCBzZXNzaW9uIHNldHRpbmdzIHRvIHRoZSB3ZWJzb2NrZXRcbiAgICovXG4gIHNlbmRTZXNzaW9uU2V0dGluZ3Moc2Vzc2lvblNldHRpbmdzKSB7XG4gICAgaWYgKCF0aGlzLnNvY2tldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU29ja2V0IGlzIG5vdCBjb25uZWN0ZWQuXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zb2NrZXQucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvY2tldCBpcyBub3Qgb3Blbi5cIik7XG4gICAgfVxuICAgIGNvbnN0IHNuYWtlQ2FzZVNldHRpbmdzID0gc25ha2VjYXNlS2V5cyhzZXNzaW9uU2V0dGluZ3MpO1xuICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAuLi5zbmFrZUNhc2VTZXR0aW5ncyxcbiAgICAgIHR5cGU6IFwic2Vzc2lvbl9zZXR0aW5nc1wiXG4gICAgfSk7XG4gICAgdGhpcy5zb2NrZXQuc2VuZChqc29uKTtcbiAgfVxuICAvKipcbiAgICogQG5hbWUgc2VuZFRvb2xNZXNzYWdlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZW5kIHRvb2wgcmVzcG9uc2UgdG8gdGhlIHdlYnNvY2tldCwgZS5nLiBmb3IgZnVuY3Rpb24gY2FsbGluZ1xuICAgKi9cbiAgc2VuZFRvb2xNZXNzYWdlKHRvb2xNZXNzYWdlKSB7XG4gICAgaWYgKCF0aGlzLnNvY2tldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU29ja2V0IGlzIG5vdCBjb25uZWN0ZWQuXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zb2NrZXQucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvY2tldCBpcyBub3Qgb3Blbi5cIik7XG4gICAgfVxuICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeSh0b29sTWVzc2FnZSk7XG4gICAgdGhpcy5zb2NrZXQuc2VuZChqc29uKTtcbiAgfVxuICAvKipcbiAgICogQG5hbWUgcmVhZHlTdGF0ZVxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhlIGN1cnJlbnQgcmVhZHkgc3RhdGUgb2YgdGhlIHNvY2tldC5cbiAgICovXG4gIGdldCByZWFkeVN0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLnNvY2tldC5yZWFkeVN0YXRlO1xuICB9XG4gIC8qKlxuICAgKiBAbmFtZSBzZW5kUGF1c2VBc3Npc3RhbnRNZXNzYWdlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZW5kIHBhdXNlIGFzc2lzdGFudCBtZXNzYWdlIHRvIHRoZSB3ZWJzb2NrZXQuIFRoaXMgcGF1c2VzIHJlc3BvbnNlcyBmcm9tIEVWSS4gQ2hhdCBoaXN0b3J5IGlzIHN0aWxsIHNhdmVkIGFuZCBzZW50IGFmdGVyIHJlc3VtaW5nLlxuICAgKi9cbiAgc2VuZFBhdXNlQXNzaXN0YW50TWVzc2FnZSgpIHtcbiAgICBpZiAoIXRoaXMuc29ja2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb2NrZXQgaXMgbm90IGNvbm5lY3RlZC5cIik7XG4gICAgfVxuICAgIGlmICh0aGlzLnNvY2tldC5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU29ja2V0IGlzIG5vdCBvcGVuLlwiKTtcbiAgICB9XG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJwYXVzZV9hc3Npc3RhbnRfbWVzc2FnZVwiIH0pO1xuICAgIHRoaXMuc29ja2V0LnNlbmQoanNvbik7XG4gIH1cbiAgLyoqXG4gICAqIEBuYW1lIHNlbmRSZXN1bWVBc3Npc3RhbnRNZXNzYWdlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZW5kIHJlc3VtZSBhc3Npc3RhbnQgbWVzc2FnZSB0byB0aGUgd2Vic29ja2V0LiBUaGlzIHJlc3VtZXMgcmVzcG9uc2VzIGZyb20gRVZJLiBDaGF0IGhpc3Rvcnkgc2VudCB3aGlsZSBwYXVzZWQgd2lsbCBub3cgYmUgc2VudC5cbiAgICovXG4gIHNlbmRSZXN1bWVBc3Npc3RhbnRNZXNzYWdlKCkge1xuICAgIGlmICghdGhpcy5zb2NrZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvY2tldCBpcyBub3QgY29ubmVjdGVkLlwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc29ja2V0LnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb2NrZXQgaXMgbm90IG9wZW4uXCIpO1xuICAgIH1cbiAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcInJlc3VtZV9hc3Npc3RhbnRfbWVzc2FnZVwiIH0pO1xuICAgIHRoaXMuc29ja2V0LnNlbmQoanNvbik7XG4gIH1cbn07XG5cbi8vIHNyYy9saWIvY3JlYXRlLXNvY2tldC1jb25maWcudHNcbmltcG9ydCB7IHogYXMgejE0IH0gZnJvbSBcInpvZFwiO1xuXG4vLyBzcmMvbW9kZWxzL2F1dGgudHNcbmltcG9ydCB6MTMgZnJvbSBcInpvZFwiO1xudmFyIEF1dGhTdHJhdGVneVNjaGVtYSA9IHoxMy51bmlvbihbXG4gIHoxMy5vYmplY3Qoe1xuICAgIHR5cGU6IHoxMy5saXRlcmFsKFwiYXBpS2V5XCIpLFxuICAgIHZhbHVlOiB6MTMuc3RyaW5nKHtcbiAgICAgIGRlc2NyaXB0aW9uOiBcIkFQSSBrZXkgZm9yIHRoZSBIdW1lIEFQSSBpcyByZXF1aXJlZFwiXG4gICAgfSlcbiAgfSksXG4gIHoxMy5vYmplY3Qoe1xuICAgIHR5cGU6IHoxMy5saXRlcmFsKFwiYWNjZXNzVG9rZW5cIiksXG4gICAgdmFsdWU6IHoxMy5zdHJpbmcoe1xuICAgICAgZGVzY3JpcHRpb246IFwiQWNjZXNzIHRva2VuIGZvciB0aGUgSHVtZSBBUEkgaXMgcmVxdWlyZWRcIlxuICAgIH0pXG4gIH0pXG5dKTtcblxuLy8gc3JjL2xpYi9jcmVhdGUtc29ja2V0LWNvbmZpZy50c1xudmFyIFNvY2tldENvbmZpZ1NjaGVtYSA9IHoxNC5vYmplY3Qoe1xuICAvLyBDb25maWdzIHRoYXQgYXJlIHNldCBhdCBjb25uZWN0aW9uIHRpbWVcbiAgaG9zdG5hbWU6IHoxNC5zdHJpbmcoe1xuICAgIGRlc2NyaXB0aW9uOiBcIkhvc3RuYW1lIG9mIHRoZSBIdW1lIEFQSS5cIlxuICB9KSxcbiAgcmVjb25uZWN0QXR0ZW1wdHM6IHoxNC5udW1iZXIoe1xuICAgIGRlc2NyaXB0aW9uOiBcIk51bWJlciBvZiB0aW1lcyB0byBhdHRlbXB0IHRvIHJlY29ubmVjdCB0byB0aGUgQVBJLlwiXG4gIH0pLm9wdGlvbmFsKCkuZGVmYXVsdCgzMCksXG4gIGRlYnVnOiB6MTQuYm9vbGVhbih7XG4gICAgZGVzY3JpcHRpb246IFwiRW5hYmxlIGRlYnVnIG1vZGUuXCJcbiAgfSkub3B0aW9uYWwoKS5kZWZhdWx0KGZhbHNlKSxcbiAgLy8gQ29uZmlncyB0aGF0IGFyZSBzZXQgYXMgcXVlcnkgcGFyYW1zXG4gIGF1dGg6IEF1dGhTdHJhdGVneVNjaGVtYSxcbiAgY29uZmlnSWQ6IHoxNC5zdHJpbmcoe1xuICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBJRCBvZiB0aGUgY29uZmlndXJhdGlvbiB0byB1c2UuXCJcbiAgfSkub3B0aW9uYWwoKSxcbiAgY29uZmlnVmVyc2lvbjogejE0Lm51bWJlcih7XG4gICAgZGVzY3JpcHRpb246IFwiVGhlIHZlcnNpb24gb2YgdGhlIGNvbmZpZ3VyYXRpb24gdG8gdXNlLlwiXG4gIH0pLm9wdGlvbmFsKCksXG4gIHJlc3VtZWRDaGF0R3JvdXBJZDogejE0LnN0cmluZyh7XG4gICAgZGVzY3JpcHRpb246IFwiVGhlIElEIG9mIHRoZSBjaGF0IGdyb3VwIHRvIHJlc3VtZS5cIlxuICB9KS5vcHRpb25hbCgpXG59KTtcbnZhciBkZWZhdWx0Q29uZmlnID0ge1xuICBob3N0bmFtZTogXCJhcGkuaHVtZS5haVwiLFxuICByZWNvbm5lY3RBdHRlbXB0czogMzAsXG4gIGRlYnVnOiBmYWxzZVxufTtcbnZhciBjcmVhdGVTb2NrZXRDb25maWcgPSAoY29uZmlnKSA9PiB7XG4gIGlmICghY29uZmlnLmF1dGgpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQXV0aCBzdHJhdGVneSBpcyByZXF1aXJlZC5cIik7XG4gIHJldHVybiBTb2NrZXRDb25maWdTY2hlbWEucGFyc2Uoe1xuICAgIC4uLmRlZmF1bHRDb25maWcsXG4gICAgLi4uY29uZmlnLFxuICAgIGF1dGg6IGNvbmZpZy5hdXRoXG4gIH0pO1xufTtcblxuLy8gc3JjL2xpYi90dHMudHNcbnZhciBUVFNTZXJ2aWNlID0gLyogQF9fUFVSRV9fICovICgoVFRTU2VydmljZTIpID0+IHtcbiAgVFRTU2VydmljZTJbXCJERUZBVUxUXCJdID0gXCJodW1lX2FpXCI7XG4gIFRUU1NlcnZpY2UyW1wiRUxFVkVOX0xBQlNcIl0gPSBcImVsZXZlbl9sYWJzXCI7XG4gIFRUU1NlcnZpY2UyW1wiUExBWV9IVFwiXSA9IFwicGxheV9odFwiO1xuICByZXR1cm4gVFRTU2VydmljZTI7XG59KShUVFNTZXJ2aWNlIHx8IHt9KTtcblxuLy8gc3JjL2xpYi9taWNyb3Bob25lLnRzXG52YXIgZ2V0QXVkaW9TdHJlYW0gPSBhc3luYyAoKSA9PiB7XG4gIHJldHVybiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XG4gICAgYXVkaW86IHtcbiAgICAgIGVjaG9DYW5jZWxsYXRpb246IHRydWUsXG4gICAgICBub2lzZVN1cHByZXNzaW9uOiB0cnVlLFxuICAgICAgYXV0b0dhaW5Db250cm9sOiB0cnVlXG4gICAgfSxcbiAgICB2aWRlbzogZmFsc2VcbiAgfSk7XG59O1xudmFyIGNoZWNrRm9yQXVkaW9UcmFja3MgPSAoc3RyZWFtKSA9PiB7XG4gIGNvbnN0IHRyYWNrcyA9IHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpO1xuICBpZiAodHJhY2tzLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGF1ZGlvIHRyYWNrc1wiKTtcbiAgfVxuICBpZiAodHJhY2tzLmxlbmd0aCA+IDEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdWx0aXBsZSBhdWRpbyB0cmFja3NcIik7XG4gIH1cbiAgY29uc3QgdHJhY2sgPSB0cmFja3NbMF07XG4gIGlmICghdHJhY2spIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhdWRpbyB0cmFja1wiKTtcbiAgfVxufTtcblxuLy8gc3JjL2xpYi9mZXRjaC1hY2Nlc3MtdG9rZW4udHNcbmZ1bmN0aW9uIGJhc2U2NEVuY29kZShzdHIpIHtcbiAgaWYgKHR5cGVvZiBCdWZmZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJldHVybiBCdWZmZXIuZnJvbShzdHIpLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4gYnRvYShzdHIpO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiQmFzZTY0IGVuY29kaW5nIGlzIG5vdCBuYXRpdmVseSBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudC5cIlxuICAgICk7XG4gIH1cbn1cbnZhciBmZXRjaEFjY2Vzc1Rva2VuID0gYXN5bmMgKGFyZ3MpID0+IHtcbiAgY29uc3QgeyBhcGlLZXksIHNlY3JldEtleSwgaG9zdCA9IFwiYXBpLmh1bWUuYWlcIiB9ID0gYXJncztcbiAgY29uc3QgYXV0aFN0cmluZyA9IGAke2FwaUtleX06JHtzZWNyZXRLZXl9YDtcbiAgY29uc3QgZW5jb2RlZCA9IGJhc2U2NEVuY29kZShhdXRoU3RyaW5nKTtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vJHtob3N0fS9vYXV0aDItY2MvdG9rZW5gLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBoZWFkZXJzOiB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLFxuICAgICAgQXV0aG9yaXphdGlvbjogYEJhc2ljICR7ZW5jb2RlZH1gXG4gICAgfSxcbiAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgIGdyYW50X3R5cGU6IFwiY2xpZW50X2NyZWRlbnRpYWxzXCJcbiAgICB9KS50b1N0cmluZygpLFxuICAgIGNhY2hlOiBcIm5vLWNhY2hlXCJcbiAgfSk7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICBjb25zdCBhY2Nlc3NUb2tlbiA9IFN0cmluZyhkYXRhW1wiYWNjZXNzX3Rva2VuXCJdKTtcbiAgcmV0dXJuIGFjY2Vzc1Rva2VuO1xufTtcblxuLy8gc3JjL21vZGVscy9zZXNzaW9uLXNldHRpbmdzLnRzXG5pbXBvcnQgejE1IGZyb20gXCJ6b2RcIjtcbnZhciBDaGFubmVscyA9IC8qIEBfX1BVUkVfXyAqLyAoKENoYW5uZWxzMikgPT4ge1xuICBDaGFubmVsczJbQ2hhbm5lbHMyW1wiTU9OT1wiXSA9IDFdID0gXCJNT05PXCI7XG4gIENoYW5uZWxzMltDaGFubmVsczJbXCJTVEVSRU9cIl0gPSAyXSA9IFwiU1RFUkVPXCI7XG4gIHJldHVybiBDaGFubmVsczI7XG59KShDaGFubmVscyB8fCB7fSk7XG52YXIgQXVkaW9FbmNvZGluZyA9IC8qIEBfX1BVUkVfXyAqLyAoKEF1ZGlvRW5jb2RpbmcyKSA9PiB7XG4gIEF1ZGlvRW5jb2RpbmcyW1wiTElORUFSMTZcIl0gPSBcImxpbmVhcjE2XCI7XG4gIEF1ZGlvRW5jb2RpbmcyW1wiT1BVU1wiXSA9IFwib3B1c1wiO1xuICByZXR1cm4gQXVkaW9FbmNvZGluZzI7XG59KShBdWRpb0VuY29kaW5nIHx8IHt9KTtcbnZhciBBdWRpb0NvbmZpZ3VyYXRpb25TY2hlbWEgPSB6MTUub2JqZWN0KHtcbiAgY2hhbm5lbHM6IHoxNS5uYXRpdmVFbnVtKENoYW5uZWxzLCB7XG4gICAgZGVzY3JpcHRpb246IFwiTnVtYmVyIG9mIGNoYW5uZWxzIGluIHRoZSBpbnB1dCBhdWRpby5cIlxuICB9KSxcbiAgZW5jb2Rpbmc6IHoxNS5uYXRpdmVFbnVtKEF1ZGlvRW5jb2RpbmcsIHtcbiAgICBkZXNjcmlwdGlvbjogXCJFbmNvZGluZyBvZiB0aGUgaW5wdXQgYXVkaW8uXCJcbiAgfSksXG4gIHNhbXBsZVJhdGU6IHoxNS5udW1iZXIoe1xuICAgIGRlc2NyaXB0aW9uOiBcIlNhbXBsZSByYXRlIG9mIHRoZSBpbnB1dCBhdWRpby5cIlxuICB9KVxufSk7XG52YXIgQ29udGV4dENvbmZpZ3VyYXRpb25TY2hlbWEgPSB6MTUub2JqZWN0KHtcbiAgdGV4dDogejE1LnN0cmluZygpLFxuICB0eXBlOiB6MTUuZW51bShbXCJlZGl0YWJsZVwiLCBcInBlcnNpc3RlbnRcIiwgXCJ0ZW1wb3JhcnlcIl0pLm9wdGlvbmFsKClcbn0pO1xudmFyIFdlYlNlYXJjaFRvb2xTY2hlbWEgPSB6MTUub2JqZWN0KHtcbiAgbmFtZTogejE1LmxpdGVyYWwoXCJ3ZWJfc2VhcmNoXCIpLFxuICBmYWxsYmFja19jb250ZW50OiB6MTUuc3RyaW5nKCkubnVsbGlzaCgpLmNhdGNoKG51bGwpXG59KTtcbnZhciBTZXNzaW9uU2V0dGluZ3NTY2hlbWEgPSB6MTUub2JqZWN0KHtcbiAgYXVkaW86IEF1ZGlvQ29uZmlndXJhdGlvblNjaGVtYS5vcHRpb25hbCgpLFxuICBjb250ZXh0OiBDb250ZXh0Q29uZmlndXJhdGlvblNjaGVtYS5vcHRpb25hbCgpLFxuICBsYW5ndWFnZU1vZGVsQXBpS2V5OiB6MTUuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgY3VzdG9tU2Vzc2lvbklkOiB6MTUuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgc3lzdGVtUHJvbXB0OiB6MTUuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgYnVpbHRpbl90b29sczogejE1LmFycmF5KHoxNS51bmlvbihbV2ViU2VhcmNoVG9vbFNjaGVtYSwgejE1Lm51bGwoKV0pKS5vcHRpb25hbCgpXG59KTtcblxuLy8gc3JjL21vZGVscy9sbG0udHNcbnZhciBMYW5ndWFnZU1vZGVsT3B0aW9uID0gLyogQF9fUFVSRV9fICovICgoTGFuZ3VhZ2VNb2RlbE9wdGlvbjIpID0+IHtcbiAgTGFuZ3VhZ2VNb2RlbE9wdGlvbjJbXCJDTEFVREVfM19PUFVTXCJdID0gXCJDTEFVREVfM19PUFVTXCI7XG4gIExhbmd1YWdlTW9kZWxPcHRpb24yW1wiQ0xBVURFXzNfU09OTkVUXCJdID0gXCJDTEFVREVfM19TT05ORVRcIjtcbiAgTGFuZ3VhZ2VNb2RlbE9wdGlvbjJbXCJDTEFVREVfM19IQUlLVVwiXSA9IFwiQ0xBVURFXzNfSEFJS1VcIjtcbiAgTGFuZ3VhZ2VNb2RlbE9wdGlvbjJbXCJDTEFVREVfMjFcIl0gPSBcIkNMQVVERV8yMVwiO1xuICBMYW5ndWFnZU1vZGVsT3B0aW9uMltcIkNMQVVERV9JTlNUQU5UXzEyXCJdID0gXCJDTEFVREVfSU5TVEFOVF8xMlwiO1xuICBMYW5ndWFnZU1vZGVsT3B0aW9uMltcIkdQVF80X1RVUkJPX1BSRVZJRVdcIl0gPSBcIkdQVF80X1RVUkJPX1BSRVZJRVdcIjtcbiAgTGFuZ3VhZ2VNb2RlbE9wdGlvbjJbXCJHUFRfMzVfVFVSQk9fMDEyNVwiXSA9IFwiR1BUXzM1X1RVUkJPXzAxMjVcIjtcbiAgTGFuZ3VhZ2VNb2RlbE9wdGlvbjJbXCJHUFRfMzVfVFVSQk9cIl0gPSBcIkdQVF8zNV9UVVJCT1wiO1xuICBMYW5ndWFnZU1vZGVsT3B0aW9uMltcIkZJUkVXT1JLU19NSVhUUkFMXzhYN0JcIl0gPSBcIkZJUkVXT1JLU19NSVhUUkFMXzhYN0JcIjtcbiAgcmV0dXJuIExhbmd1YWdlTW9kZWxPcHRpb24yO1xufSkoTGFuZ3VhZ2VNb2RlbE9wdGlvbiB8fCB7fSk7XG5leHBvcnQge1xuICBBc3Npc3RhbnRFbmRNZXNzYWdlU2NoZW1hLFxuICBBc3Npc3RhbnRUcmFuc2NyaXB0TWVzc2FnZVNjaGVtYSxcbiAgQXVkaW9FbmNvZGluZyxcbiAgQXVkaW9NZXNzYWdlU2NoZW1hLFxuICBBdWRpb091dHB1dE1lc3NhZ2VTY2hlbWEsXG4gIEF1dGhTdHJhdGVneVNjaGVtYSxcbiAgQ2hhbm5lbHMsXG4gIENoYXRNZXRhZGF0YU1lc3NhZ2VTY2hlbWEsXG4gIEVtb3Rpb25TY29yZXNTY2hlbWEsXG4gIEpTT05FcnJvck1lc3NhZ2VTY2hlbWEsXG4gIEpTT05NZXNzYWdlU2NoZW1hLFxuICBMYW5ndWFnZU1vZGVsT3B0aW9uLFxuICBNaW1lVHlwZSxcbiAgU2Vzc2lvblNldHRpbmdzU2NoZW1hLFxuICBTb2NrZXRDb25maWdTY2hlbWEsXG4gIFNvY2tldEZhaWxlZFRvUGFyc2VNZXNzYWdlRXJyb3IsXG4gIFNvY2tldFVua25vd25NZXNzYWdlRXJyb3IsXG4gIFRUU1NlcnZpY2UsXG4gIFRpbWVTbGljZVNjaGVtYSxcbiAgVG9vbENhbGxTY2hlbWEsXG4gIFRvb2xFcnJvclNjaGVtYSxcbiAgVG9vbFJlc3BvbnNlQ29udGVudFNjaGVtYSxcbiAgVG9vbFJlc3BvbnNlU2NoZW1hLFxuICBUcmFuc2NyaXB0TW9kZWxzU2NoZW1hLFxuICBVc2VySW50ZXJydXB0aW9uTWVzc2FnZVNjaGVtYSxcbiAgVXNlclRyYW5zY3JpcHRNZXNzYWdlU2NoZW1hLFxuICBWb2ljZUNsaWVudCxcbiAgV2ViU2VhcmNoVG9vbFNjaGVtYSxcbiAgYXJyYXlCdWZmZXJUb0Jsb2IsXG4gIGJhc2U2NFRvQmxvYixcbiAgY2hlY2tGb3JBdWRpb1RyYWNrcyxcbiAgY3JlYXRlU29ja2V0Q29uZmlnLFxuICBjcmVhdGVTb2NrZXRVcmwsXG4gIGRlZmF1bHRDb25maWcsXG4gIGZldGNoQWNjZXNzVG9rZW4sXG4gIGdldEF1ZGlvU3RyZWFtLFxuICBnZXRTdXBwb3J0ZWRNaW1lVHlwZSxcbiAgaXNTb2NrZXRGYWlsZWRUb1BhcnNlTWVzc2FnZUVycm9yLFxuICBpc1NvY2tldFVua25vd25NZXNzYWdlRXJyb3IsXG4gIHBhcnNlQXVkaW9NZXNzYWdlLFxuICBwYXJzZU1lc3NhZ2VEYXRhLFxuICBwYXJzZU1lc3NhZ2VUeXBlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@humeai/voice/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@humeai/voice/dist/index.mjs":
/*!***************************************************!*\
  !*** ./node_modules/@humeai/voice/dist/index.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AssistantEndMessageSchema: () => (/* binding */ AssistantEndMessageSchema),\n/* harmony export */   AssistantTranscriptMessageSchema: () => (/* binding */ AssistantTranscriptMessageSchema),\n/* harmony export */   AudioEncoding: () => (/* binding */ AudioEncoding),\n/* harmony export */   AudioMessageSchema: () => (/* binding */ AudioMessageSchema),\n/* harmony export */   AudioOutputMessageSchema: () => (/* binding */ AudioOutputMessageSchema),\n/* harmony export */   AuthStrategySchema: () => (/* binding */ AuthStrategySchema),\n/* harmony export */   Channels: () => (/* binding */ Channels),\n/* harmony export */   ChatMetadataMessageSchema: () => (/* binding */ ChatMetadataMessageSchema),\n/* harmony export */   EmotionScoresSchema: () => (/* binding */ EmotionScoresSchema),\n/* harmony export */   JSONErrorMessageSchema: () => (/* binding */ JSONErrorMessageSchema),\n/* harmony export */   JSONMessageSchema: () => (/* binding */ JSONMessageSchema),\n/* harmony export */   LanguageModelOption: () => (/* binding */ LanguageModelOption),\n/* harmony export */   MimeType: () => (/* binding */ MimeType),\n/* harmony export */   SessionSettingsSchema: () => (/* binding */ SessionSettingsSchema),\n/* harmony export */   SocketConfigSchema: () => (/* binding */ SocketConfigSchema),\n/* harmony export */   SocketFailedToParseMessageError: () => (/* binding */ SocketFailedToParseMessageError),\n/* harmony export */   SocketUnknownMessageError: () => (/* binding */ SocketUnknownMessageError),\n/* harmony export */   TTSService: () => (/* binding */ TTSService),\n/* harmony export */   TimeSliceSchema: () => (/* binding */ TimeSliceSchema),\n/* harmony export */   ToolCallSchema: () => (/* binding */ ToolCallSchema),\n/* harmony export */   ToolErrorSchema: () => (/* binding */ ToolErrorSchema),\n/* harmony export */   ToolResponseContentSchema: () => (/* binding */ ToolResponseContentSchema),\n/* harmony export */   ToolResponseSchema: () => (/* binding */ ToolResponseSchema),\n/* harmony export */   TranscriptModelsSchema: () => (/* binding */ TranscriptModelsSchema),\n/* harmony export */   UserInterruptionMessageSchema: () => (/* binding */ UserInterruptionMessageSchema),\n/* harmony export */   UserTranscriptMessageSchema: () => (/* binding */ UserTranscriptMessageSchema),\n/* harmony export */   VoiceClient: () => (/* binding */ VoiceClient),\n/* harmony export */   WebSearchToolSchema: () => (/* binding */ WebSearchToolSchema),\n/* harmony export */   arrayBufferToBlob: () => (/* binding */ arrayBufferToBlob),\n/* harmony export */   base64ToBlob: () => (/* binding */ base64ToBlob),\n/* harmony export */   checkForAudioTracks: () => (/* binding */ checkForAudioTracks),\n/* harmony export */   createSocketConfig: () => (/* binding */ createSocketConfig),\n/* harmony export */   createSocketUrl: () => (/* binding */ createSocketUrl),\n/* harmony export */   defaultConfig: () => (/* binding */ defaultConfig),\n/* harmony export */   fetchAccessToken: () => (/* binding */ fetchAccessToken),\n/* harmony export */   getAudioStream: () => (/* binding */ getAudioStream),\n/* harmony export */   getSupportedMimeType: () => (/* binding */ getSupportedMimeType),\n/* harmony export */   isSocketFailedToParseMessageError: () => (/* binding */ isSocketFailedToParseMessageError),\n/* harmony export */   isSocketUnknownMessageError: () => (/* binding */ isSocketUnknownMessageError),\n/* harmony export */   parseAudioMessage: () => (/* binding */ parseAudioMessage),\n/* harmony export */   parseMessageData: () => (/* binding */ parseMessageData),\n/* harmony export */   parseMessageType: () => (/* binding */ parseMessageType)\n/* harmony export */ });\n/* harmony import */ var reconnecting_websocket__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! reconnecting-websocket */ \"(rsc)/./node_modules/reconnecting-websocket/dist/reconnecting-websocket-mjs.js\");\n/* harmony import */ var snakecase_keys__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! snakecase-keys */ \"(rsc)/./node_modules/snakecase-keys/index.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n// src/lib/audio.ts\nvar MimeType = /* @__PURE__ */ ((MimeType2) => {\n  MimeType2[\"WEBM\"] = \"audio/webm\";\n  MimeType2[\"MP4\"] = \"audio/mp4\";\n  MimeType2[\"WAV\"] = \"audio/wav\";\n  return MimeType2;\n})(MimeType || {});\nfunction arrayBufferToBlob(arrayBuffer, mimeType) {\n  return new Blob([arrayBuffer], { type: mimeType });\n}\nfunction base64ToBlob(base64, contentType) {\n  const binaryString = window.atob(base64);\n  const bytes = new Array(binaryString.length);\n  for (let i = 0; i < binaryString.length; i++) {\n    bytes[i] = binaryString.charCodeAt(i);\n  }\n  const byteArray = new Uint8Array(bytes);\n  return new Blob([byteArray], { type: contentType });\n}\nfunction getSupportedMimeType() {\n  if (typeof MediaRecorder === \"undefined\") {\n    return {\n      success: false,\n      error: new Error(\"MediaRecorder is not supported\")\n    };\n  }\n  if (MediaRecorder.isTypeSupported(\"audio/webm\" /* WEBM */)) {\n    return { success: true, mimeType: \"audio/webm\" /* WEBM */ };\n  }\n  if (MediaRecorder.isTypeSupported(\"audio/mp4\" /* MP4 */)) {\n    return { success: true, mimeType: \"audio/mp4\" /* MP4 */ };\n  }\n  if (MediaRecorder.isTypeSupported(\"audio/wav\" /* WAV */)) {\n    return { success: true, mimeType: \"audio/wav\" /* WAV */ };\n  }\n  return {\n    success: false,\n    error: new Error(\"Browser does not support any compatible mime types\")\n  };\n}\n\n// src/lib/client.ts\n\n\n\n// src/lib/create-url.ts\nvar createSocketUrl = (config) => {\n  const url = new URL(`wss://${config.hostname}`);\n  url.pathname = \"/v0/evi/chat\";\n  if (config.auth.type === \"accessToken\") {\n    url.searchParams.set(\"accessToken\", config.auth.value);\n  } else if (config.auth.type === \"apiKey\") {\n    url.searchParams.set(\"apiKey\", config.auth.value);\n  }\n  if (config.configId) {\n    url.searchParams.set(\"config_id\", config.configId);\n  }\n  if (config.configVersion) {\n    url.searchParams.set(\"config_version\", String(config.configVersion));\n  }\n  if (config.resumedChatGroupId) {\n    url.searchParams.set(\n      \"resumed_chat_group_id\",\n      String(config.resumedChatGroupId)\n    );\n  }\n  return url.href;\n};\n\n// src/lib/errors.ts\nvar SocketUnknownMessageError = class extends Error {\n  constructor(message) {\n    super(`Unknown message type.${message ? \" \" + message : \"\"}`);\n    this.name = \"SocketUnknownMessageError\";\n  }\n};\nvar isSocketUnknownMessageError = (err) => {\n  return err instanceof SocketUnknownMessageError;\n};\nvar SocketFailedToParseMessageError = class extends Error {\n  constructor(message) {\n    super(\n      `Failed to parse message from socket.${message ? \" \" + message : \"\"}`\n    );\n    this.name = \"SocketFailedToParseMessageError\";\n  }\n};\nvar isSocketFailedToParseMessageError = (err) => {\n  return err instanceof SocketFailedToParseMessageError;\n};\n\n// src/models/audio-message.ts\n\nvar AudioMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"audio\"),\n  data: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"][\"instanceof\"](ArrayBuffer)\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\nvar parseAudioMessage = async (blob) => {\n  return blob.arrayBuffer().then((buffer) => {\n    return {\n      type: \"audio\",\n      data: buffer,\n      receivedAt: /* @__PURE__ */ new Date()\n    };\n  }).catch(() => {\n    return null;\n  });\n};\n\n// src/models/json-message.ts\n\n\n// src/models/assistant-end-message.ts\n\nvar AssistantEndMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"assistant_end\")\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\n\n// src/models/assistant-message.ts\n\n\n// src/models/transcript-models.ts\n\nvar EmotionScoresSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].record(zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(), zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].number());\nvar TranscriptModelsSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  // prosody scores are null when the message is not audio\n  // (e.g. text input from the user)\n  prosody: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n    scores: EmotionScoresSchema\n  }).nullish(),\n  time: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n    begin: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].number(),\n    end: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].number()\n  }).nullish()\n});\n\n// src/models/assistant-message.ts\nvar AssistantTranscriptMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"assistant_message\"),\n  id: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  message: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n    role: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"assistant\"),\n    content: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string()\n  }),\n  models: TranscriptModelsSchema,\n  from_text: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].boolean().catch(false)\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\n\n// src/models/audio-output-message.ts\n\nvar AudioOutputMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"audio_output\"),\n  id: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  data: zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\n\n// src/models/chat-metadata-message.ts\n\nvar ChatMetadataMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"chat_metadata\"),\n  chat_id: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  chat_group_id: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  request_id: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string()\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\n\n// src/models/error-message.ts\n\nvar JSONErrorMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"error\"),\n  code: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  slug: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  message: zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\n\n// src/models/tool-messages.ts\n\nvar literalSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].union([zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(), zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].number(), zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].boolean(), zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"][\"null\"]()]);\nvar jsonSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lazy(\n  () => zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].union([literalSchema, zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].array(jsonSchema), zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].record(jsonSchema)])\n);\nvar ToolCallSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"tool_call\"),\n  tool_type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"][\"enum\"]([\"builtin\", \"function\"]),\n  tool_call_id: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  response_required: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].boolean(),\n  name: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  parameters: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string()\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\nvar ToolResponseContentSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].union([zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(), jsonSchema]);\nvar ToolResponseSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"tool_response\"),\n  tool_call_id: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  content: ToolResponseContentSchema,\n  tool_name: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string().optional(),\n  tool_type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"][\"enum\"]([\"builtin\", \"function\"]).optional()\n});\nvar ToolErrorSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"tool_error\"),\n  tool_call_id: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string().nullish(),\n  error: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  code: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  level: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string()\n});\n\n// src/models/user-interruption-message.ts\n\n\n// src/models/time-slice.ts\n\nvar TimeSliceSchema = zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  begin: zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  end: zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n});\n\n// src/models/user-interruption-message.ts\nvar UserInterruptionMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"user_interruption\"),\n  time: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].union([TimeSliceSchema, zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].number(), zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"][\"null\"]()]).catch(null)\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\n\n// src/models/user-message.ts\n\nvar UserTranscriptMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"user_message\"),\n  message: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n    role: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"user\"),\n    content: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string()\n  }),\n  models: TranscriptModelsSchema,\n  from_text: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].boolean().nullish().catch(false)\n}).transform((obj) => {\n  return Object.assign(obj, {\n    receivedAt: /* @__PURE__ */ new Date()\n  });\n});\n\n// src/models/json-message.ts\nvar JSONMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].union([\n  AudioOutputMessageSchema,\n  AssistantEndMessageSchema,\n  UserInterruptionMessageSchema,\n  UserTranscriptMessageSchema,\n  AssistantTranscriptMessageSchema,\n  JSONErrorMessageSchema,\n  ToolCallSchema,\n  ToolErrorSchema,\n  ToolResponseSchema,\n  ChatMetadataMessageSchema\n]);\n\n// src/utils/safeJson.ts\nvar safeJson = (input) => {\n  try {\n    return { success: true, data: JSON.parse(input) };\n  } catch (e) {\n    return { success: false };\n  }\n};\n\n// src/utils/unwrapJson.ts\nvar unwrapJson = (input, schema) => {\n  const json = safeJson(input);\n  if (!json.success) {\n    return null;\n  }\n  const message = schema.safeParse(json.data);\n  if (!message.success) {\n    return null;\n  }\n  return message.data;\n};\n\n// src/lib/message.ts\nvar parseMessageData = async (data) => {\n  if (data instanceof Blob) {\n    const message = await parseAudioMessage(data);\n    if (message) {\n      return {\n        success: true,\n        message\n      };\n    } else {\n      return {\n        success: false,\n        error: new SocketFailedToParseMessageError(\n          `Received blob was unable to be converted to ArrayBuffer.`\n        )\n      };\n    }\n  }\n  if (typeof data !== \"string\") {\n    return {\n      success: false,\n      error: new SocketFailedToParseMessageError(\n        `Expected a string but received ${typeof data}.`\n      )\n    };\n  }\n  const obj = unwrapJson(data, JSONMessageSchema);\n  if (obj === null) {\n    return {\n      success: false,\n      error: new SocketUnknownMessageError(\n        `Received JSON was not a known message type.`\n      )\n    };\n  }\n  return {\n    success: true,\n    message: obj\n  };\n};\nvar parseMessageType = async (event) => {\n  const data = event.data;\n  return parseMessageData(data);\n};\n\n// src/lib/client.ts\nvar VoiceClient = class _VoiceClient {\n  socket;\n  url;\n  eventHandlers = {};\n  constructor(config) {\n    this.url = createSocketUrl(config);\n    this.socket = new reconnecting_websocket__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.url, [], {\n      startClosed: true,\n      maxRetries: config.reconnectAttempts,\n      debug: config.debug\n    });\n  }\n  /**\n   * @name create\n   * @description\n   * Create a new VoiceClient.\n   * @param config - The configuration for the client.\n   * @returns\n   * A new VoiceClient instance.\n   * @example\n   * ```ts\n   * const client = VoiceClient.create(config);\n   * ```\n   */\n  static create(config) {\n    return new _VoiceClient(config);\n  }\n  /**\n   * @name on\n   * @description\n   * Attach events to the client.\n   * @param event - The event to attach to.\n   * @param callback - The callback to run when the event is triggered.\n   * @returns\n   * The VoiceClient instance.\n   * @example\n   * ```ts\n   * const client = VoiceClient.create(config);\n   * client.on('open', () => {\n   *  console.log('Socket opened');\n   * });\n   * ```\n   */\n  on(event, callback) {\n    this.eventHandlers[event] = callback;\n  }\n  handleOpen = () => {\n    this.eventHandlers.open?.();\n  };\n  handleMessage = (event) => {\n    void parseMessageType(event).then((result) => {\n      if (result.success) {\n        this.eventHandlers.message?.(result.message);\n      }\n    });\n  };\n  handleClose = (event) => {\n    this.eventHandlers.close?.(event);\n  };\n  handleError = (e) => {\n    const message = e.message ?? \"WebSocket error\";\n    this.eventHandlers.error?.(new Error(message));\n  };\n  /**\n   * @name connect\n   * @description\n   * Connect to the websocket.\n   */\n  connect() {\n    this.socket.reconnect();\n    this.socket.addEventListener(\"open\", this.handleOpen);\n    this.socket.addEventListener(\"message\", this.handleMessage);\n    this.socket.addEventListener(\"close\", this.handleClose);\n    this.socket.addEventListener(\"error\", this.handleError);\n    return this;\n  }\n  /**\n   * @name disconnect\n   * @description\n   * Disconnect from the websocket.\n   */\n  disconnect() {\n    this.socket?.close();\n    this.handleClose({ code: 1e3 });\n    this.socket.removeEventListener(\"open\", this.handleOpen);\n    this.socket.removeEventListener(\"message\", this.handleMessage);\n    this.socket.removeEventListener(\"close\", this.handleClose);\n    this.socket.removeEventListener(\"error\", this.handleError);\n  }\n  /**\n   * @name sendAudio\n   * @description\n   * Send audio data to the websocket.\n   */\n  sendAudio(audioBuffer) {\n    if (!this.socket) {\n      throw new Error(\"Socket is not connected.\");\n    }\n    if (this.socket.readyState !== WebSocket.OPEN) {\n      throw new Error(\"Socket is not open.\");\n    }\n    this.socket.send(audioBuffer);\n  }\n  /**\n   * @name sendUserInput\n   * @description\n   * Send text data to the websocket.\n   */\n  sendUserInput(text) {\n    if (!this.socket) {\n      throw new Error(\"Socket is not connected.\");\n    }\n    if (this.socket.readyState !== WebSocket.OPEN) {\n      throw new Error(\"Socket is not open.\");\n    }\n    const json = JSON.stringify({ text, type: \"user_input\" });\n    this.socket.send(json);\n  }\n  /**\n   * @name sendAssistantInput\n   * @description\n   * Send text data to the websocket for TTS.\n   */\n  sendAssistantInput(text) {\n    if (!this.socket) {\n      throw new Error(\"Socket is not connected.\");\n    }\n    if (this.socket.readyState !== WebSocket.OPEN) {\n      throw new Error(\"Socket is not open.\");\n    }\n    const json = JSON.stringify({ text, type: \"assistant_input\" });\n    this.socket.send(json);\n  }\n  /**\n   * @name sendSessionSettings\n   * @description\n   * Send session settings to the websocket\n   */\n  sendSessionSettings(sessionSettings) {\n    if (!this.socket) {\n      throw new Error(\"Socket is not connected.\");\n    }\n    if (this.socket.readyState !== WebSocket.OPEN) {\n      throw new Error(\"Socket is not open.\");\n    }\n    const snakeCaseSettings = snakecase_keys__WEBPACK_IMPORTED_MODULE_1__(sessionSettings);\n    const json = JSON.stringify({\n      ...snakeCaseSettings,\n      type: \"session_settings\"\n    });\n    this.socket.send(json);\n  }\n  /**\n   * @name sendToolMessage\n   * @description\n   * Send tool response to the websocket, e.g. for function calling\n   */\n  sendToolMessage(toolMessage) {\n    if (!this.socket) {\n      throw new Error(\"Socket is not connected.\");\n    }\n    if (this.socket.readyState !== WebSocket.OPEN) {\n      throw new Error(\"Socket is not open.\");\n    }\n    const json = JSON.stringify(toolMessage);\n    this.socket.send(json);\n  }\n  /**\n   * @name readyState\n   * @description\n   * The current ready state of the socket.\n   */\n  get readyState() {\n    return this.socket.readyState;\n  }\n  /**\n   * @name sendPauseAssistantMessage\n   * @description\n   * Send pause assistant message to the websocket. This pauses responses from EVI. Chat history is still saved and sent after resuming.\n   */\n  sendPauseAssistantMessage() {\n    if (!this.socket) {\n      throw new Error(\"Socket is not connected.\");\n    }\n    if (this.socket.readyState !== WebSocket.OPEN) {\n      throw new Error(\"Socket is not open.\");\n    }\n    const json = JSON.stringify({ type: \"pause_assistant_message\" });\n    this.socket.send(json);\n  }\n  /**\n   * @name sendResumeAssistantMessage\n   * @description\n   * Send resume assistant message to the websocket. This resumes responses from EVI. Chat history sent while paused will now be sent.\n   */\n  sendResumeAssistantMessage() {\n    if (!this.socket) {\n      throw new Error(\"Socket is not connected.\");\n    }\n    if (this.socket.readyState !== WebSocket.OPEN) {\n      throw new Error(\"Socket is not open.\");\n    }\n    const json = JSON.stringify({ type: \"resume_assistant_message\" });\n    this.socket.send(json);\n  }\n};\n\n// src/lib/create-socket-config.ts\n\n\n// src/models/auth.ts\n\nvar AuthStrategySchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].union([\n  zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n    type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"apiKey\"),\n    value: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string({\n      description: \"API key for the Hume API is required\"\n    })\n  }),\n  zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n    type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"accessToken\"),\n    value: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string({\n      description: \"Access token for the Hume API is required\"\n    })\n  })\n]);\n\n// src/lib/create-socket-config.ts\nvar SocketConfigSchema = zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  // Configs that are set at connection time\n  hostname: zod__WEBPACK_IMPORTED_MODULE_2__.z.string({\n    description: \"Hostname of the Hume API.\"\n  }),\n  reconnectAttempts: zod__WEBPACK_IMPORTED_MODULE_2__.z.number({\n    description: \"Number of times to attempt to reconnect to the API.\"\n  }).optional().default(30),\n  debug: zod__WEBPACK_IMPORTED_MODULE_2__.z.boolean({\n    description: \"Enable debug mode.\"\n  }).optional().default(false),\n  // Configs that are set as query params\n  auth: AuthStrategySchema,\n  configId: zod__WEBPACK_IMPORTED_MODULE_2__.z.string({\n    description: \"The ID of the configuration to use.\"\n  }).optional(),\n  configVersion: zod__WEBPACK_IMPORTED_MODULE_2__.z.number({\n    description: \"The version of the configuration to use.\"\n  }).optional(),\n  resumedChatGroupId: zod__WEBPACK_IMPORTED_MODULE_2__.z.string({\n    description: \"The ID of the chat group to resume.\"\n  }).optional()\n});\nvar defaultConfig = {\n  hostname: \"api.hume.ai\",\n  reconnectAttempts: 30,\n  debug: false\n};\nvar createSocketConfig = (config) => {\n  if (!config.auth)\n    throw new Error(\"Auth strategy is required.\");\n  return SocketConfigSchema.parse({\n    ...defaultConfig,\n    ...config,\n    auth: config.auth\n  });\n};\n\n// src/lib/tts.ts\nvar TTSService = /* @__PURE__ */ ((TTSService2) => {\n  TTSService2[\"DEFAULT\"] = \"hume_ai\";\n  TTSService2[\"ELEVEN_LABS\"] = \"eleven_labs\";\n  TTSService2[\"PLAY_HT\"] = \"play_ht\";\n  return TTSService2;\n})(TTSService || {});\n\n// src/lib/microphone.ts\nvar getAudioStream = async () => {\n  return navigator.mediaDevices.getUserMedia({\n    audio: {\n      echoCancellation: true,\n      noiseSuppression: true,\n      autoGainControl: true\n    },\n    video: false\n  });\n};\nvar checkForAudioTracks = (stream) => {\n  const tracks = stream.getAudioTracks();\n  if (tracks.length === 0) {\n    throw new Error(\"No audio tracks\");\n  }\n  if (tracks.length > 1) {\n    throw new Error(\"Multiple audio tracks\");\n  }\n  const track = tracks[0];\n  if (!track) {\n    throw new Error(\"No audio track\");\n  }\n};\n\n// src/lib/fetch-access-token.ts\nfunction base64Encode(str) {\n  if (typeof Buffer === \"function\") {\n    return Buffer.from(str).toString(\"base64\");\n  } else if (typeof btoa === \"function\") {\n    return btoa(str);\n  } else {\n    throw new Error(\n      \"Base64 encoding is not natively supported in this environment.\"\n    );\n  }\n}\nvar fetchAccessToken = async (args) => {\n  const { apiKey, secretKey, host = \"api.hume.ai\" } = args;\n  const authString = `${apiKey}:${secretKey}`;\n  const encoded = base64Encode(authString);\n  const res = await fetch(`https://${host}/oauth2-cc/token`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n      Authorization: `Basic ${encoded}`\n    },\n    body: new URLSearchParams({\n      grant_type: \"client_credentials\"\n    }).toString(),\n    cache: \"no-cache\"\n  });\n  const data = await res.json();\n  const accessToken = String(data[\"access_token\"]);\n  return accessToken;\n};\n\n// src/models/session-settings.ts\n\nvar Channels = /* @__PURE__ */ ((Channels2) => {\n  Channels2[Channels2[\"MONO\"] = 1] = \"MONO\";\n  Channels2[Channels2[\"STEREO\"] = 2] = \"STEREO\";\n  return Channels2;\n})(Channels || {});\nvar AudioEncoding = /* @__PURE__ */ ((AudioEncoding2) => {\n  AudioEncoding2[\"LINEAR16\"] = \"linear16\";\n  AudioEncoding2[\"OPUS\"] = \"opus\";\n  return AudioEncoding2;\n})(AudioEncoding || {});\nvar AudioConfigurationSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  channels: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].nativeEnum(Channels, {\n    description: \"Number of channels in the input audio.\"\n  }),\n  encoding: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].nativeEnum(AudioEncoding, {\n    description: \"Encoding of the input audio.\"\n  }),\n  sampleRate: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].number({\n    description: \"Sample rate of the input audio.\"\n  })\n});\nvar ContextConfigurationSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  text: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string(),\n  type: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"][\"enum\"]([\"editable\", \"persistent\", \"temporary\"]).optional()\n});\nvar WebSearchToolSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  name: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].literal(\"web_search\"),\n  fallback_content: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string().nullish().catch(null)\n});\nvar SessionSettingsSchema = zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].object({\n  audio: AudioConfigurationSchema.optional(),\n  context: ContextConfigurationSchema.optional(),\n  languageModelApiKey: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string().optional(),\n  customSessionId: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string().optional(),\n  systemPrompt: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].string().optional(),\n  builtin_tools: zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].array(zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"].union([WebSearchToolSchema, zod__WEBPACK_IMPORTED_MODULE_2__[\"default\"][\"null\"]()])).optional()\n});\n\n// src/models/llm.ts\nvar LanguageModelOption = /* @__PURE__ */ ((LanguageModelOption2) => {\n  LanguageModelOption2[\"CLAUDE_3_OPUS\"] = \"CLAUDE_3_OPUS\";\n  LanguageModelOption2[\"CLAUDE_3_SONNET\"] = \"CLAUDE_3_SONNET\";\n  LanguageModelOption2[\"CLAUDE_3_HAIKU\"] = \"CLAUDE_3_HAIKU\";\n  LanguageModelOption2[\"CLAUDE_21\"] = \"CLAUDE_21\";\n  LanguageModelOption2[\"CLAUDE_INSTANT_12\"] = \"CLAUDE_INSTANT_12\";\n  LanguageModelOption2[\"GPT_4_TURBO_PREVIEW\"] = \"GPT_4_TURBO_PREVIEW\";\n  LanguageModelOption2[\"GPT_35_TURBO_0125\"] = \"GPT_35_TURBO_0125\";\n  LanguageModelOption2[\"GPT_35_TURBO\"] = \"GPT_35_TURBO\";\n  LanguageModelOption2[\"FIREWORKS_MIXTRAL_8X7B\"] = \"FIREWORKS_MIXTRAL_8X7B\";\n  return LanguageModelOption2;\n})(LanguageModelOption || {});\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGh1bWVhaS92b2ljZS9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdCQUFnQjtBQUNqQjtBQUNBLG1DQUFtQyxnQkFBZ0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IseUJBQXlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxtQkFBbUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMkQ7QUFDaEI7O0FBRTNDO0FBQ0E7QUFDQSwrQkFBK0IsZ0JBQWdCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsNkJBQTZCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyw2QkFBNkI7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDb0I7QUFDcEIseUJBQXlCLGtEQUFRO0FBQ2pDLFFBQVEsbURBQVM7QUFDakIsUUFBUSx5REFBWTtBQUNwQixDQUFDO0FBQ0Q7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDc0I7O0FBRXRCO0FBQ3FCO0FBQ3JCLGdD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Qzs7QUFFRDtBQUNBLHdCQUF3QixpREFBUztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixJQUFJO0FBQ0osYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsWUFBWTtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsOERBQXFCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVC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O0FBQ0EsR0FBRztBQUNILGNBQWMsa0RBQVU7QUFDeEI7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNELGlDQUFpQyxrREFBVTtBQUMzQyxRQUFRLGtEQUFVO0FBQ2xCLFFBQVEsbURBQVE7QUFDaEIsQ0FBQztBQUNELDBCQUEwQixrREFBVTtBQUNwQyxRQUFRLG1EQUFXO0FBQ25CLG9CQUFvQixrREFBVTtBQUM5QixDQUFDO0FBQ0QsNEJBQTRCLGtEQUFVO0FBQ3RDO0FBQ0E7QUFDQSx1QkFBdUIsa0RBQVU7QUFDakMsbUJBQW1CLGtEQUFVO0FBQzdCLGdCQUFnQixrREFBVTtBQUMxQixpQkFBaUIsaURBQVMsQ0FBQyxpREFBUyx1QkFBdUIsbURBQVE7QUFDbkUsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDJCQUEyQjtBQTRDMUI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXRoZXJhcGlzdC8uL25vZGVfbW9kdWxlcy9AaHVtZWFpL3ZvaWNlL2Rpc3QvaW5kZXgubWpzPzAyYTMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9hdWRpby50c1xudmFyIE1pbWVUeXBlID0gLyogQF9fUFVSRV9fICovICgoTWltZVR5cGUyKSA9PiB7XG4gIE1pbWVUeXBlMltcIldFQk1cIl0gPSBcImF1ZGlvL3dlYm1cIjtcbiAgTWltZVR5cGUyW1wiTVA0XCJdID0gXCJhdWRpby9tcDRcIjtcbiAgTWltZVR5cGUyW1wiV0FWXCJdID0gXCJhdWRpby93YXZcIjtcbiAgcmV0dXJuIE1pbWVUeXBlMjtcbn0pKE1pbWVUeXBlIHx8IHt9KTtcbmZ1bmN0aW9uIGFycmF5QnVmZmVyVG9CbG9iKGFycmF5QnVmZmVyLCBtaW1lVHlwZSkge1xuICByZXR1cm4gbmV3IEJsb2IoW2FycmF5QnVmZmVyXSwgeyB0eXBlOiBtaW1lVHlwZSB9KTtcbn1cbmZ1bmN0aW9uIGJhc2U2NFRvQmxvYihiYXNlNjQsIGNvbnRlbnRUeXBlKSB7XG4gIGNvbnN0IGJpbmFyeVN0cmluZyA9IHdpbmRvdy5hdG9iKGJhc2U2NCk7XG4gIGNvbnN0IGJ5dGVzID0gbmV3IEFycmF5KGJpbmFyeVN0cmluZy5sZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbmFyeVN0cmluZy5sZW5ndGg7IGkrKykge1xuICAgIGJ5dGVzW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gIH1cbiAgY29uc3QgYnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYnl0ZXMpO1xuICByZXR1cm4gbmV3IEJsb2IoW2J5dGVBcnJheV0sIHsgdHlwZTogY29udGVudFR5cGUgfSk7XG59XG5mdW5jdGlvbiBnZXRTdXBwb3J0ZWRNaW1lVHlwZSgpIHtcbiAgaWYgKHR5cGVvZiBNZWRpYVJlY29yZGVyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IG5ldyBFcnJvcihcIk1lZGlhUmVjb3JkZXIgaXMgbm90IHN1cHBvcnRlZFwiKVxuICAgIH07XG4gIH1cbiAgaWYgKE1lZGlhUmVjb3JkZXIuaXNUeXBlU3VwcG9ydGVkKFwiYXVkaW8vd2VibVwiIC8qIFdFQk0gKi8pKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWltZVR5cGU6IFwiYXVkaW8vd2VibVwiIC8qIFdFQk0gKi8gfTtcbiAgfVxuICBpZiAoTWVkaWFSZWNvcmRlci5pc1R5cGVTdXBwb3J0ZWQoXCJhdWRpby9tcDRcIiAvKiBNUDQgKi8pKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWltZVR5cGU6IFwiYXVkaW8vbXA0XCIgLyogTVA0ICovIH07XG4gIH1cbiAgaWYgKE1lZGlhUmVjb3JkZXIuaXNUeXBlU3VwcG9ydGVkKFwiYXVkaW8vd2F2XCIgLyogV0FWICovKSkge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1pbWVUeXBlOiBcImF1ZGlvL3dhdlwiIC8qIFdBViAqLyB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgc3VjY2VzczogZmFsc2UsXG4gICAgZXJyb3I6IG5ldyBFcnJvcihcIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBhbnkgY29tcGF0aWJsZSBtaW1lIHR5cGVzXCIpXG4gIH07XG59XG5cbi8vIHNyYy9saWIvY2xpZW50LnRzXG5pbXBvcnQgUmVjb25uZWN0aW5nV2Vic29ja2V0IGZyb20gXCJyZWNvbm5lY3Rpbmctd2Vic29ja2V0XCI7XG5pbXBvcnQgc25ha2VjYXNlS2V5cyBmcm9tIFwic25ha2VjYXNlLWtleXNcIjtcblxuLy8gc3JjL2xpYi9jcmVhdGUtdXJsLnRzXG52YXIgY3JlYXRlU29ja2V0VXJsID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCB1cmwgPSBuZXcgVVJMKGB3c3M6Ly8ke2NvbmZpZy5ob3N0bmFtZX1gKTtcbiAgdXJsLnBhdGhuYW1lID0gXCIvdjAvZXZpL2NoYXRcIjtcbiAgaWYgKGNvbmZpZy5hdXRoLnR5cGUgPT09IFwiYWNjZXNzVG9rZW5cIikge1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiYWNjZXNzVG9rZW5cIiwgY29uZmlnLmF1dGgudmFsdWUpO1xuICB9IGVsc2UgaWYgKGNvbmZpZy5hdXRoLnR5cGUgPT09IFwiYXBpS2V5XCIpIHtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImFwaUtleVwiLCBjb25maWcuYXV0aC52YWx1ZSk7XG4gIH1cbiAgaWYgKGNvbmZpZy5jb25maWdJZCkge1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiY29uZmlnX2lkXCIsIGNvbmZpZy5jb25maWdJZCk7XG4gIH1cbiAgaWYgKGNvbmZpZy5jb25maWdWZXJzaW9uKSB7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJjb25maWdfdmVyc2lvblwiLCBTdHJpbmcoY29uZmlnLmNvbmZpZ1ZlcnNpb24pKTtcbiAgfVxuICBpZiAoY29uZmlnLnJlc3VtZWRDaGF0R3JvdXBJZCkge1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFxuICAgICAgXCJyZXN1bWVkX2NoYXRfZ3JvdXBfaWRcIixcbiAgICAgIFN0cmluZyhjb25maWcucmVzdW1lZENoYXRHcm91cElkKVxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHVybC5ocmVmO1xufTtcblxuLy8gc3JjL2xpYi9lcnJvcnMudHNcbnZhciBTb2NrZXRVbmtub3duTWVzc2FnZUVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICBzdXBlcihgVW5rbm93biBtZXNzYWdlIHR5cGUuJHttZXNzYWdlID8gXCIgXCIgKyBtZXNzYWdlIDogXCJcIn1gKTtcbiAgICB0aGlzLm5hbWUgPSBcIlNvY2tldFVua25vd25NZXNzYWdlRXJyb3JcIjtcbiAgfVxufTtcbnZhciBpc1NvY2tldFVua25vd25NZXNzYWdlRXJyb3IgPSAoZXJyKSA9PiB7XG4gIHJldHVybiBlcnIgaW5zdGFuY2VvZiBTb2NrZXRVbmtub3duTWVzc2FnZUVycm9yO1xufTtcbnZhciBTb2NrZXRGYWlsZWRUb1BhcnNlTWVzc2FnZUVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICBzdXBlcihcbiAgICAgIGBGYWlsZWQgdG8gcGFyc2UgbWVzc2FnZSBmcm9tIHNvY2tldC4ke21lc3NhZ2UgPyBcIiBcIiArIG1lc3NhZ2UgOiBcIlwifWBcbiAgICApO1xuICAgIHRoaXMubmFtZSA9IFwiU29ja2V0RmFpbGVkVG9QYXJzZU1lc3NhZ2VFcnJvclwiO1xuICB9XG59O1xudmFyIGlzU29ja2V0RmFpbGVkVG9QYXJzZU1lc3NhZ2VFcnJvciA9IChlcnIpID0+IHtcbiAgcmV0dXJuIGVyciBpbnN0YW5jZW9mIFNvY2tldEZhaWxlZFRvUGFyc2VNZXNzYWdlRXJyb3I7XG59O1xuXG4vLyBzcmMvbW9kZWxzL2F1ZGlvLW1lc3NhZ2UudHNcbmltcG9ydCB6IGZyb20gXCJ6b2RcIjtcbnZhciBBdWRpb01lc3NhZ2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHR5cGU6IHoubGl0ZXJhbChcImF1ZGlvXCIpLFxuICBkYXRhOiB6Lmluc3RhbmNlb2YoQXJyYXlCdWZmZXIpXG59KS50cmFuc2Zvcm0oKG9iaikgPT4ge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIHtcbiAgICByZWNlaXZlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICB9KTtcbn0pO1xudmFyIHBhcnNlQXVkaW9NZXNzYWdlID0gYXN5bmMgKGJsb2IpID0+IHtcbiAgcmV0dXJuIGJsb2IuYXJyYXlCdWZmZXIoKS50aGVuKChidWZmZXIpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJhdWRpb1wiLFxuICAgICAgZGF0YTogYnVmZmVyLFxuICAgICAgcmVjZWl2ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICB9O1xuICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0pO1xufTtcblxuLy8gc3JjL21vZGVscy9qc29uLW1lc3NhZ2UudHNcbmltcG9ydCB6MTIgZnJvbSBcInpvZFwiO1xuXG4vLyBzcmMvbW9kZWxzL2Fzc2lzdGFudC1lbmQtbWVzc2FnZS50c1xuaW1wb3J0IHoyIGZyb20gXCJ6b2RcIjtcbnZhciBBc3Npc3RhbnRFbmRNZXNzYWdlU2NoZW1hID0gejIub2JqZWN0KHtcbiAgdHlwZTogejIubGl0ZXJhbChcImFzc2lzdGFudF9lbmRcIilcbn0pLnRyYW5zZm9ybSgob2JqKSA9PiB7XG4gIHJldHVybiBPYmplY3QuYXNzaWduKG9iaiwge1xuICAgIHJlY2VpdmVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gIH0pO1xufSk7XG5cbi8vIHNyYy9tb2RlbHMvYXNzaXN0YW50LW1lc3NhZ2UudHNcbmltcG9ydCB6NCBmcm9tIFwiem9kXCI7XG5cbi8vIHNyYy9tb2RlbHMvdHJhbnNjcmlwdC1tb2RlbHMudHNcbmltcG9ydCB6MyBmcm9tIFwiem9kXCI7XG52YXIgRW1vdGlvblNjb3Jlc1NjaGVtYSA9IHozLnJlY29yZCh6My5zdHJpbmcoKSwgejMubnVtYmVyKCkpO1xudmFyIFRyYW5zY3JpcHRNb2RlbHNTY2hlbWEgPSB6My5vYmplY3Qoe1xuICAvLyBwcm9zb2R5IHNjb3JlcyBhcmUgbnVsbCB3aGVuIHRoZSBtZXNzYWdlIGlzIG5vdCBhdWRpb1xuICAvLyAoZS5nLiB0ZXh0IGlucHV0IGZyb20gdGhlIHVzZXIpXG4gIHByb3NvZHk6IHozLm9iamVjdCh7XG4gICAgc2NvcmVzOiBFbW90aW9uU2NvcmVzU2NoZW1hXG4gIH0pLm51bGxpc2goKSxcbiAgdGltZTogejMub2JqZWN0KHtcbiAgICBiZWdpbjogejMubnVtYmVyKCksXG4gICAgZW5kOiB6My5udW1iZXIoKVxuICB9KS5udWxsaXNoKClcbn0pO1xuXG4vLyBzcmMvbW9kZWxzL2Fzc2lzdGFudC1tZXNzYWdlLnRzXG52YXIgQXNzaXN0YW50VHJhbnNjcmlwdE1lc3NhZ2VTY2hlbWEgPSB6NC5vYmplY3Qoe1xuICB0eXBlOiB6NC5saXRlcmFsKFwiYXNzaXN0YW50X21lc3NhZ2VcIiksXG4gIGlkOiB6NC5zdHJpbmcoKSxcbiAgbWVzc2FnZTogejQub2JqZWN0KHtcbiAgICByb2xlOiB6NC5saXRlcmFsKFwiYXNzaXN0YW50XCIpLFxuICAgIGNvbnRlbnQ6IHo0LnN0cmluZygpXG4gIH0pLFxuICBtb2RlbHM6IFRyYW5zY3JpcHRNb2RlbHNTY2hlbWEsXG4gIGZyb21fdGV4dDogejQuYm9vbGVhbigpLmNhdGNoKGZhbHNlKVxufSkudHJhbnNmb3JtKChvYmopID0+IHtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqLCB7XG4gICAgcmVjZWl2ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgfSk7XG59KTtcblxuLy8gc3JjL21vZGVscy9hdWRpby1vdXRwdXQtbWVzc2FnZS50c1xuaW1wb3J0IHsgeiBhcyB6NSB9IGZyb20gXCJ6b2RcIjtcbnZhciBBdWRpb091dHB1dE1lc3NhZ2VTY2hlbWEgPSB6NS5vYmplY3Qoe1xuICB0eXBlOiB6NS5saXRlcmFsKFwiYXVkaW9fb3V0cHV0XCIpLFxuICBpZDogejUuc3RyaW5nKCksXG4gIGRhdGE6IHo1LnN0cmluZygpXG59KS50cmFuc2Zvcm0oKG9iaikgPT4ge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIHtcbiAgICByZWNlaXZlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICB9KTtcbn0pO1xuXG4vLyBzcmMvbW9kZWxzL2NoYXQtbWV0YWRhdGEtbWVzc2FnZS50c1xuaW1wb3J0IHo2IGZyb20gXCJ6b2RcIjtcbnZhciBDaGF0TWV0YWRhdGFNZXNzYWdlU2NoZW1hID0gejYub2JqZWN0KHtcbiAgdHlwZTogejYubGl0ZXJhbChcImNoYXRfbWV0YWRhdGFcIiksXG4gIGNoYXRfaWQ6IHo2LnN0cmluZygpLFxuICBjaGF0X2dyb3VwX2lkOiB6Ni5zdHJpbmcoKSxcbiAgcmVxdWVzdF9pZDogejYuc3RyaW5nKClcbn0pLnRyYW5zZm9ybSgob2JqKSA9PiB7XG4gIHJldHVybiBPYmplY3QuYXNzaWduKG9iaiwge1xuICAgIHJlY2VpdmVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gIH0pO1xufSk7XG5cbi8vIHNyYy9tb2RlbHMvZXJyb3ItbWVzc2FnZS50c1xuaW1wb3J0IHsgeiBhcyB6NyB9IGZyb20gXCJ6b2RcIjtcbnZhciBKU09ORXJyb3JNZXNzYWdlU2NoZW1hID0gejcub2JqZWN0KHtcbiAgdHlwZTogejcubGl0ZXJhbChcImVycm9yXCIpLFxuICBjb2RlOiB6Ny5zdHJpbmcoKSxcbiAgc2x1Zzogejcuc3RyaW5nKCksXG4gIG1lc3NhZ2U6IHo3LnN0cmluZygpXG59KS50cmFuc2Zvcm0oKG9iaikgPT4ge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIHtcbiAgICByZWNlaXZlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICB9KTtcbn0pO1xuXG4vLyBzcmMvbW9kZWxzL3Rvb2wtbWVzc2FnZXMudHNcbmltcG9ydCB6OCBmcm9tIFwiem9kXCI7XG52YXIgbGl0ZXJhbFNjaGVtYSA9IHo4LnVuaW9uKFt6OC5zdHJpbmcoKSwgejgubnVtYmVyKCksIHo4LmJvb2xlYW4oKSwgejgubnVsbCgpXSk7XG52YXIganNvblNjaGVtYSA9IHo4LmxhenkoXG4gICgpID0+IHo4LnVuaW9uKFtsaXRlcmFsU2NoZW1hLCB6OC5hcnJheShqc29uU2NoZW1hKSwgejgucmVjb3JkKGpzb25TY2hlbWEpXSlcbik7XG52YXIgVG9vbENhbGxTY2hlbWEgPSB6OC5vYmplY3Qoe1xuICB0eXBlOiB6OC5saXRlcmFsKFwidG9vbF9jYWxsXCIpLFxuICB0b29sX3R5cGU6IHo4LmVudW0oW1wiYnVpbHRpblwiLCBcImZ1bmN0aW9uXCJdKSxcbiAgdG9vbF9jYWxsX2lkOiB6OC5zdHJpbmcoKSxcbiAgcmVzcG9uc2VfcmVxdWlyZWQ6IHo4LmJvb2xlYW4oKSxcbiAgbmFtZTogejguc3RyaW5nKCksXG4gIHBhcmFtZXRlcnM6IHo4LnN0cmluZygpXG59KS50cmFuc2Zvcm0oKG9iaikgPT4ge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIHtcbiAgICByZWNlaXZlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICB9KTtcbn0pO1xudmFyIFRvb2xSZXNwb25zZUNvbnRlbnRTY2hlbWEgPSB6OC51bmlvbihbejguc3RyaW5nKCksIGpzb25TY2hlbWFdKTtcbnZhciBUb29sUmVzcG9uc2VTY2hlbWEgPSB6OC5vYmplY3Qoe1xuICB0eXBlOiB6OC5saXRlcmFsKFwidG9vbF9yZXNwb25zZVwiKSxcbiAgdG9vbF9jYWxsX2lkOiB6OC5zdHJpbmcoKSxcbiAgY29udGVudDogVG9vbFJlc3BvbnNlQ29udGVudFNjaGVtYSxcbiAgdG9vbF9uYW1lOiB6OC5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB0b29sX3R5cGU6IHo4LmVudW0oW1wiYnVpbHRpblwiLCBcImZ1bmN0aW9uXCJdKS5vcHRpb25hbCgpXG59KTtcbnZhciBUb29sRXJyb3JTY2hlbWEgPSB6OC5vYmplY3Qoe1xuICB0eXBlOiB6OC5saXRlcmFsKFwidG9vbF9lcnJvclwiKSxcbiAgdG9vbF9jYWxsX2lkOiB6OC5zdHJpbmcoKSxcbiAgY29udGVudDogejguc3RyaW5nKCkubnVsbGlzaCgpLFxuICBlcnJvcjogejguc3RyaW5nKCksXG4gIGNvZGU6IHo4LnN0cmluZygpLFxuICBsZXZlbDogejguc3RyaW5nKClcbn0pO1xuXG4vLyBzcmMvbW9kZWxzL3VzZXItaW50ZXJydXB0aW9uLW1lc3NhZ2UudHNcbmltcG9ydCB6MTAgZnJvbSBcInpvZFwiO1xuXG4vLyBzcmMvbW9kZWxzL3RpbWUtc2xpY2UudHNcbmltcG9ydCB7IHogYXMgejkgfSBmcm9tIFwiem9kXCI7XG52YXIgVGltZVNsaWNlU2NoZW1hID0gejkub2JqZWN0KHtcbiAgYmVnaW46IHo5Lm51bWJlcigpLFxuICBlbmQ6IHo5Lm51bWJlcigpXG59KTtcblxuLy8gc3JjL21vZGVscy91c2VyLWludGVycnVwdGlvbi1tZXNzYWdlLnRzXG52YXIgVXNlckludGVycnVwdGlvbk1lc3NhZ2VTY2hlbWEgPSB6MTAub2JqZWN0KHtcbiAgdHlwZTogejEwLmxpdGVyYWwoXCJ1c2VyX2ludGVycnVwdGlvblwiKSxcbiAgdGltZTogejEwLnVuaW9uKFtUaW1lU2xpY2VTY2hlbWEsIHoxMC5udW1iZXIoKSwgejEwLm51bGwoKV0pLmNhdGNoKG51bGwpXG59KS50cmFuc2Zvcm0oKG9iaikgPT4ge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIHtcbiAgICByZWNlaXZlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICB9KTtcbn0pO1xuXG4vLyBzcmMvbW9kZWxzL3VzZXItbWVzc2FnZS50c1xuaW1wb3J0IHoxMSBmcm9tIFwiem9kXCI7XG52YXIgVXNlclRyYW5zY3JpcHRNZXNzYWdlU2NoZW1hID0gejExLm9iamVjdCh7XG4gIHR5cGU6IHoxMS5saXRlcmFsKFwidXNlcl9tZXNzYWdlXCIpLFxuICBtZXNzYWdlOiB6MTEub2JqZWN0KHtcbiAgICByb2xlOiB6MTEubGl0ZXJhbChcInVzZXJcIiksXG4gICAgY29udGVudDogejExLnN0cmluZygpXG4gIH0pLFxuICBtb2RlbHM6IFRyYW5zY3JpcHRNb2RlbHNTY2hlbWEsXG4gIGZyb21fdGV4dDogejExLmJvb2xlYW4oKS5udWxsaXNoKCkuY2F0Y2goZmFsc2UpXG59KS50cmFuc2Zvcm0oKG9iaikgPT4ge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIHtcbiAgICByZWNlaXZlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICB9KTtcbn0pO1xuXG4vLyBzcmMvbW9kZWxzL2pzb24tbWVzc2FnZS50c1xudmFyIEpTT05NZXNzYWdlU2NoZW1hID0gejEyLnVuaW9uKFtcbiAgQXVkaW9PdXRwdXRNZXNzYWdlU2NoZW1hLFxuICBBc3Npc3RhbnRFbmRNZXNzYWdlU2NoZW1hLFxuICBVc2VySW50ZXJydXB0aW9uTWVzc2FnZVNjaGVtYSxcbiAgVXNlclRyYW5zY3JpcHRNZXNzYWdlU2NoZW1hLFxuICBBc3Npc3RhbnRUcmFuc2NyaXB0TWVzc2FnZVNjaGVtYSxcbiAgSlNPTkVycm9yTWVzc2FnZVNjaGVtYSxcbiAgVG9vbENhbGxTY2hlbWEsXG4gIFRvb2xFcnJvclNjaGVtYSxcbiAgVG9vbFJlc3BvbnNlU2NoZW1hLFxuICBDaGF0TWV0YWRhdGFNZXNzYWdlU2NoZW1hXG5dKTtcblxuLy8gc3JjL3V0aWxzL3NhZmVKc29uLnRzXG52YXIgc2FmZUpzb24gPSAoaW5wdXQpID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBKU09OLnBhcnNlKGlucHV0KSB9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UgfTtcbiAgfVxufTtcblxuLy8gc3JjL3V0aWxzL3Vud3JhcEpzb24udHNcbnZhciB1bndyYXBKc29uID0gKGlucHV0LCBzY2hlbWEpID0+IHtcbiAgY29uc3QganNvbiA9IHNhZmVKc29uKGlucHV0KTtcbiAgaWYgKCFqc29uLnN1Y2Nlc3MpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBtZXNzYWdlID0gc2NoZW1hLnNhZmVQYXJzZShqc29uLmRhdGEpO1xuICBpZiAoIW1lc3NhZ2Uuc3VjY2Vzcykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBtZXNzYWdlLmRhdGE7XG59O1xuXG4vLyBzcmMvbGliL21lc3NhZ2UudHNcbnZhciBwYXJzZU1lc3NhZ2VEYXRhID0gYXN5bmMgKGRhdGEpID0+IHtcbiAgaWYgKGRhdGEgaW5zdGFuY2VvZiBCbG9iKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHBhcnNlQXVkaW9NZXNzYWdlKGRhdGEpO1xuICAgIGlmIChtZXNzYWdlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG5ldyBTb2NrZXRGYWlsZWRUb1BhcnNlTWVzc2FnZUVycm9yKFxuICAgICAgICAgIGBSZWNlaXZlZCBibG9iIHdhcyB1bmFibGUgdG8gYmUgY29udmVydGVkIHRvIEFycmF5QnVmZmVyLmBcbiAgICAgICAgKVxuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgaWYgKHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IG5ldyBTb2NrZXRGYWlsZWRUb1BhcnNlTWVzc2FnZUVycm9yKFxuICAgICAgICBgRXhwZWN0ZWQgYSBzdHJpbmcgYnV0IHJlY2VpdmVkICR7dHlwZW9mIGRhdGF9LmBcbiAgICAgIClcbiAgICB9O1xuICB9XG4gIGNvbnN0IG9iaiA9IHVud3JhcEpzb24oZGF0YSwgSlNPTk1lc3NhZ2VTY2hlbWEpO1xuICBpZiAob2JqID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IG5ldyBTb2NrZXRVbmtub3duTWVzc2FnZUVycm9yKFxuICAgICAgICBgUmVjZWl2ZWQgSlNPTiB3YXMgbm90IGEga25vd24gbWVzc2FnZSB0eXBlLmBcbiAgICAgIClcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgc3VjY2VzczogdHJ1ZSxcbiAgICBtZXNzYWdlOiBvYmpcbiAgfTtcbn07XG52YXIgcGFyc2VNZXNzYWdlVHlwZSA9IGFzeW5jIChldmVudCkgPT4ge1xuICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YTtcbiAgcmV0dXJuIHBhcnNlTWVzc2FnZURhdGEoZGF0YSk7XG59O1xuXG4vLyBzcmMvbGliL2NsaWVudC50c1xudmFyIFZvaWNlQ2xpZW50ID0gY2xhc3MgX1ZvaWNlQ2xpZW50IHtcbiAgc29ja2V0O1xuICB1cmw7XG4gIGV2ZW50SGFuZGxlcnMgPSB7fTtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy51cmwgPSBjcmVhdGVTb2NrZXRVcmwoY29uZmlnKTtcbiAgICB0aGlzLnNvY2tldCA9IG5ldyBSZWNvbm5lY3RpbmdXZWJzb2NrZXQodGhpcy51cmwsIFtdLCB7XG4gICAgICBzdGFydENsb3NlZDogdHJ1ZSxcbiAgICAgIG1heFJldHJpZXM6IGNvbmZpZy5yZWNvbm5lY3RBdHRlbXB0cyxcbiAgICAgIGRlYnVnOiBjb25maWcuZGVidWdcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQG5hbWUgY3JlYXRlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGUgYSBuZXcgVm9pY2VDbGllbnQuXG4gICAqIEBwYXJhbSBjb25maWcgLSBUaGUgY29uZmlndXJhdGlvbiBmb3IgdGhlIGNsaWVudC5cbiAgICogQHJldHVybnNcbiAgICogQSBuZXcgVm9pY2VDbGllbnQgaW5zdGFuY2UuXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IGNsaWVudCA9IFZvaWNlQ2xpZW50LmNyZWF0ZShjb25maWcpO1xuICAgKiBgYGBcbiAgICovXG4gIHN0YXRpYyBjcmVhdGUoY29uZmlnKSB7XG4gICAgcmV0dXJuIG5ldyBfVm9pY2VDbGllbnQoY29uZmlnKTtcbiAgfVxuICAvKipcbiAgICogQG5hbWUgb25cbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEF0dGFjaCBldmVudHMgdG8gdGhlIGNsaWVudC5cbiAgICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIGF0dGFjaCB0by5cbiAgICogQHBhcmFtIGNhbGxiYWNrIC0gVGhlIGNhbGxiYWNrIHRvIHJ1biB3aGVuIHRoZSBldmVudCBpcyB0cmlnZ2VyZWQuXG4gICAqIEByZXR1cm5zXG4gICAqIFRoZSBWb2ljZUNsaWVudCBpbnN0YW5jZS5cbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogY29uc3QgY2xpZW50ID0gVm9pY2VDbGllbnQuY3JlYXRlKGNvbmZpZyk7XG4gICAqIGNsaWVudC5vbignb3BlbicsICgpID0+IHtcbiAgICogIGNvbnNvbGUubG9nKCdTb2NrZXQgb3BlbmVkJyk7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICovXG4gIG9uKGV2ZW50LCBjYWxsYmFjaykge1xuICAgIHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudF0gPSBjYWxsYmFjaztcbiAgfVxuICBoYW5kbGVPcGVuID0gKCkgPT4ge1xuICAgIHRoaXMuZXZlbnRIYW5kbGVycy5vcGVuPy4oKTtcbiAgfTtcbiAgaGFuZGxlTWVzc2FnZSA9IChldmVudCkgPT4ge1xuICAgIHZvaWQgcGFyc2VNZXNzYWdlVHlwZShldmVudCkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgdGhpcy5ldmVudEhhbmRsZXJzLm1lc3NhZ2U/LihyZXN1bHQubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIGhhbmRsZUNsb3NlID0gKGV2ZW50KSA9PiB7XG4gICAgdGhpcy5ldmVudEhhbmRsZXJzLmNsb3NlPy4oZXZlbnQpO1xuICB9O1xuICBoYW5kbGVFcnJvciA9IChlKSA9PiB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGUubWVzc2FnZSA/PyBcIldlYlNvY2tldCBlcnJvclwiO1xuICAgIHRoaXMuZXZlbnRIYW5kbGVycy5lcnJvcj8uKG5ldyBFcnJvcihtZXNzYWdlKSk7XG4gIH07XG4gIC8qKlxuICAgKiBAbmFtZSBjb25uZWN0XG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDb25uZWN0IHRvIHRoZSB3ZWJzb2NrZXQuXG4gICAqL1xuICBjb25uZWN0KCkge1xuICAgIHRoaXMuc29ja2V0LnJlY29ubmVjdCgpO1xuICAgIHRoaXMuc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJvcGVuXCIsIHRoaXMuaGFuZGxlT3Blbik7XG4gICAgdGhpcy5zb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgdGhpcy5oYW5kbGVNZXNzYWdlKTtcbiAgICB0aGlzLnNvY2tldC5hZGRFdmVudExpc3RlbmVyKFwiY2xvc2VcIiwgdGhpcy5oYW5kbGVDbG9zZSk7XG4gICAgdGhpcy5zb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIHRoaXMuaGFuZGxlRXJyb3IpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBAbmFtZSBkaXNjb25uZWN0XG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBEaXNjb25uZWN0IGZyb20gdGhlIHdlYnNvY2tldC5cbiAgICovXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgdGhpcy5zb2NrZXQ/LmNsb3NlKCk7XG4gICAgdGhpcy5oYW5kbGVDbG9zZSh7IGNvZGU6IDFlMyB9KTtcbiAgICB0aGlzLnNvY2tldC5yZW1vdmVFdmVudExpc3RlbmVyKFwib3BlblwiLCB0aGlzLmhhbmRsZU9wZW4pO1xuICAgIHRoaXMuc29ja2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHRoaXMuaGFuZGxlTWVzc2FnZSk7XG4gICAgdGhpcy5zb2NrZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsb3NlXCIsIHRoaXMuaGFuZGxlQ2xvc2UpO1xuICAgIHRoaXMuc29ja2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCB0aGlzLmhhbmRsZUVycm9yKTtcbiAgfVxuICAvKipcbiAgICogQG5hbWUgc2VuZEF1ZGlvXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZW5kIGF1ZGlvIGRhdGEgdG8gdGhlIHdlYnNvY2tldC5cbiAgICovXG4gIHNlbmRBdWRpbyhhdWRpb0J1ZmZlcikge1xuICAgIGlmICghdGhpcy5zb2NrZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvY2tldCBpcyBub3QgY29ubmVjdGVkLlwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc29ja2V0LnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb2NrZXQgaXMgbm90IG9wZW4uXCIpO1xuICAgIH1cbiAgICB0aGlzLnNvY2tldC5zZW5kKGF1ZGlvQnVmZmVyKTtcbiAgfVxuICAvKipcbiAgICogQG5hbWUgc2VuZFVzZXJJbnB1dFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2VuZCB0ZXh0IGRhdGEgdG8gdGhlIHdlYnNvY2tldC5cbiAgICovXG4gIHNlbmRVc2VySW5wdXQodGV4dCkge1xuICAgIGlmICghdGhpcy5zb2NrZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvY2tldCBpcyBub3QgY29ubmVjdGVkLlwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc29ja2V0LnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb2NrZXQgaXMgbm90IG9wZW4uXCIpO1xuICAgIH1cbiAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkoeyB0ZXh0LCB0eXBlOiBcInVzZXJfaW5wdXRcIiB9KTtcbiAgICB0aGlzLnNvY2tldC5zZW5kKGpzb24pO1xuICB9XG4gIC8qKlxuICAgKiBAbmFtZSBzZW5kQXNzaXN0YW50SW5wdXRcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNlbmQgdGV4dCBkYXRhIHRvIHRoZSB3ZWJzb2NrZXQgZm9yIFRUUy5cbiAgICovXG4gIHNlbmRBc3Npc3RhbnRJbnB1dCh0ZXh0KSB7XG4gICAgaWYgKCF0aGlzLnNvY2tldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU29ja2V0IGlzIG5vdCBjb25uZWN0ZWQuXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zb2NrZXQucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvY2tldCBpcyBub3Qgb3Blbi5cIik7XG4gICAgfVxuICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeSh7IHRleHQsIHR5cGU6IFwiYXNzaXN0YW50X2lucHV0XCIgfSk7XG4gICAgdGhpcy5zb2NrZXQuc2VuZChqc29uKTtcbiAgfVxuICAvKipcbiAgICogQG5hbWUgc2VuZFNlc3Npb25TZXR0aW5nc1xuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2VuZCBzZXNzaW9uIHNldHRpbmdzIHRvIHRoZSB3ZWJzb2NrZXRcbiAgICovXG4gIHNlbmRTZXNzaW9uU2V0dGluZ3Moc2Vzc2lvblNldHRpbmdzKSB7XG4gICAgaWYgKCF0aGlzLnNvY2tldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU29ja2V0IGlzIG5vdCBjb25uZWN0ZWQuXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zb2NrZXQucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvY2tldCBpcyBub3Qgb3Blbi5cIik7XG4gICAgfVxuICAgIGNvbnN0IHNuYWtlQ2FzZVNldHRpbmdzID0gc25ha2VjYXNlS2V5cyhzZXNzaW9uU2V0dGluZ3MpO1xuICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAuLi5zbmFrZUNhc2VTZXR0aW5ncyxcbiAgICAgIHR5cGU6IFwic2Vzc2lvbl9zZXR0aW5nc1wiXG4gICAgfSk7XG4gICAgdGhpcy5zb2NrZXQuc2VuZChqc29uKTtcbiAgfVxuICAvKipcbiAgICogQG5hbWUgc2VuZFRvb2xNZXNzYWdlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZW5kIHRvb2wgcmVzcG9uc2UgdG8gdGhlIHdlYnNvY2tldCwgZS5nLiBmb3IgZnVuY3Rpb24gY2FsbGluZ1xuICAgKi9cbiAgc2VuZFRvb2xNZXNzYWdlKHRvb2xNZXNzYWdlKSB7XG4gICAgaWYgKCF0aGlzLnNvY2tldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU29ja2V0IGlzIG5vdCBjb25uZWN0ZWQuXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zb2NrZXQucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvY2tldCBpcyBub3Qgb3Blbi5cIik7XG4gICAgfVxuICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeSh0b29sTWVzc2FnZSk7XG4gICAgdGhpcy5zb2NrZXQuc2VuZChqc29uKTtcbiAgfVxuICAvKipcbiAgICogQG5hbWUgcmVhZHlTdGF0ZVxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhlIGN1cnJlbnQgcmVhZHkgc3RhdGUgb2YgdGhlIHNvY2tldC5cbiAgICovXG4gIGdldCByZWFkeVN0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLnNvY2tldC5yZWFkeVN0YXRlO1xuICB9XG4gIC8qKlxuICAgKiBAbmFtZSBzZW5kUGF1c2VBc3Npc3RhbnRNZXNzYWdlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZW5kIHBhdXNlIGFzc2lzdGFudCBtZXNzYWdlIHRvIHRoZSB3ZWJzb2NrZXQuIFRoaXMgcGF1c2VzIHJlc3BvbnNlcyBmcm9tIEVWSS4gQ2hhdCBoaXN0b3J5IGlzIHN0aWxsIHNhdmVkIGFuZCBzZW50IGFmdGVyIHJlc3VtaW5nLlxuICAgKi9cbiAgc2VuZFBhdXNlQXNzaXN0YW50TWVzc2FnZSgpIHtcbiAgICBpZiAoIXRoaXMuc29ja2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb2NrZXQgaXMgbm90IGNvbm5lY3RlZC5cIik7XG4gICAgfVxuICAgIGlmICh0aGlzLnNvY2tldC5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU29ja2V0IGlzIG5vdCBvcGVuLlwiKTtcbiAgICB9XG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJwYXVzZV9hc3Npc3RhbnRfbWVzc2FnZVwiIH0pO1xuICAgIHRoaXMuc29ja2V0LnNlbmQoanNvbik7XG4gIH1cbiAgLyoqXG4gICAqIEBuYW1lIHNlbmRSZXN1bWVBc3Npc3RhbnRNZXNzYWdlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZW5kIHJlc3VtZSBhc3Npc3RhbnQgbWVzc2FnZSB0byB0aGUgd2Vic29ja2V0LiBUaGlzIHJlc3VtZXMgcmVzcG9uc2VzIGZyb20gRVZJLiBDaGF0IGhpc3Rvcnkgc2VudCB3aGlsZSBwYXVzZWQgd2lsbCBub3cgYmUgc2VudC5cbiAgICovXG4gIHNlbmRSZXN1bWVBc3Npc3RhbnRNZXNzYWdlKCkge1xuICAgIGlmICghdGhpcy5zb2NrZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvY2tldCBpcyBub3QgY29ubmVjdGVkLlwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc29ja2V0LnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb2NrZXQgaXMgbm90IG9wZW4uXCIpO1xuICAgIH1cbiAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcInJlc3VtZV9hc3Npc3RhbnRfbWVzc2FnZVwiIH0pO1xuICAgIHRoaXMuc29ja2V0LnNlbmQoanNvbik7XG4gIH1cbn07XG5cbi8vIHNyYy9saWIvY3JlYXRlLXNvY2tldC1jb25maWcudHNcbmltcG9ydCB7IHogYXMgejE0IH0gZnJvbSBcInpvZFwiO1xuXG4vLyBzcmMvbW9kZWxzL2F1dGgudHNcbmltcG9ydCB6MTMgZnJvbSBcInpvZFwiO1xudmFyIEF1dGhTdHJhdGVneVNjaGVtYSA9IHoxMy51bmlvbihbXG4gIHoxMy5vYmplY3Qoe1xuICAgIHR5cGU6IHoxMy5saXRlcmFsKFwiYXBpS2V5XCIpLFxuICAgIHZhbHVlOiB6MTMuc3RyaW5nKHtcbiAgICAgIGRlc2NyaXB0aW9uOiBcIkFQSSBrZXkgZm9yIHRoZSBIdW1lIEFQSSBpcyByZXF1aXJlZFwiXG4gICAgfSlcbiAgfSksXG4gIHoxMy5vYmplY3Qoe1xuICAgIHR5cGU6IHoxMy5saXRlcmFsKFwiYWNjZXNzVG9rZW5cIiksXG4gICAgdmFsdWU6IHoxMy5zdHJpbmcoe1xuICAgICAgZGVzY3JpcHRpb246IFwiQWNjZXNzIHRva2VuIGZvciB0aGUgSHVtZSBBUEkgaXMgcmVxdWlyZWRcIlxuICAgIH0pXG4gIH0pXG5dKTtcblxuLy8gc3JjL2xpYi9jcmVhdGUtc29ja2V0LWNvbmZpZy50c1xudmFyIFNvY2tldENvbmZpZ1NjaGVtYSA9IHoxNC5vYmplY3Qoe1xuICAvLyBDb25maWdzIHRoYXQgYXJlIHNldCBhdCBjb25uZWN0aW9uIHRpbWVcbiAgaG9zdG5hbWU6IHoxNC5zdHJpbmcoe1xuICAgIGRlc2NyaXB0aW9uOiBcIkhvc3RuYW1lIG9mIHRoZSBIdW1lIEFQSS5cIlxuICB9KSxcbiAgcmVjb25uZWN0QXR0ZW1wdHM6IHoxNC5udW1iZXIoe1xuICAgIGRlc2NyaXB0aW9uOiBcIk51bWJlciBvZiB0aW1lcyB0byBhdHRlbXB0IHRvIHJlY29ubmVjdCB0byB0aGUgQVBJLlwiXG4gIH0pLm9wdGlvbmFsKCkuZGVmYXVsdCgzMCksXG4gIGRlYnVnOiB6MTQuYm9vbGVhbih7XG4gICAgZGVzY3JpcHRpb246IFwiRW5hYmxlIGRlYnVnIG1vZGUuXCJcbiAgfSkub3B0aW9uYWwoKS5kZWZhdWx0KGZhbHNlKSxcbiAgLy8gQ29uZmlncyB0aGF0IGFyZSBzZXQgYXMgcXVlcnkgcGFyYW1zXG4gIGF1dGg6IEF1dGhTdHJhdGVneVNjaGVtYSxcbiAgY29uZmlnSWQ6IHoxNC5zdHJpbmcoe1xuICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBJRCBvZiB0aGUgY29uZmlndXJhdGlvbiB0byB1c2UuXCJcbiAgfSkub3B0aW9uYWwoKSxcbiAgY29uZmlnVmVyc2lvbjogejE0Lm51bWJlcih7XG4gICAgZGVzY3JpcHRpb246IFwiVGhlIHZlcnNpb24gb2YgdGhlIGNvbmZpZ3VyYXRpb24gdG8gdXNlLlwiXG4gIH0pLm9wdGlvbmFsKCksXG4gIHJlc3VtZWRDaGF0R3JvdXBJZDogejE0LnN0cmluZyh7XG4gICAgZGVzY3JpcHRpb246IFwiVGhlIElEIG9mIHRoZSBjaGF0IGdyb3VwIHRvIHJlc3VtZS5cIlxuICB9KS5vcHRpb25hbCgpXG59KTtcbnZhciBkZWZhdWx0Q29uZmlnID0ge1xuICBob3N0bmFtZTogXCJhcGkuaHVtZS5haVwiLFxuICByZWNvbm5lY3RBdHRlbXB0czogMzAsXG4gIGRlYnVnOiBmYWxzZVxufTtcbnZhciBjcmVhdGVTb2NrZXRDb25maWcgPSAoY29uZmlnKSA9PiB7XG4gIGlmICghY29uZmlnLmF1dGgpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQXV0aCBzdHJhdGVneSBpcyByZXF1aXJlZC5cIik7XG4gIHJldHVybiBTb2NrZXRDb25maWdTY2hlbWEucGFyc2Uoe1xuICAgIC4uLmRlZmF1bHRDb25maWcsXG4gICAgLi4uY29uZmlnLFxuICAgIGF1dGg6IGNvbmZpZy5hdXRoXG4gIH0pO1xufTtcblxuLy8gc3JjL2xpYi90dHMudHNcbnZhciBUVFNTZXJ2aWNlID0gLyogQF9fUFVSRV9fICovICgoVFRTU2VydmljZTIpID0+IHtcbiAgVFRTU2VydmljZTJbXCJERUZBVUxUXCJdID0gXCJodW1lX2FpXCI7XG4gIFRUU1NlcnZpY2UyW1wiRUxFVkVOX0xBQlNcIl0gPSBcImVsZXZlbl9sYWJzXCI7XG4gIFRUU1NlcnZpY2UyW1wiUExBWV9IVFwiXSA9IFwicGxheV9odFwiO1xuICByZXR1cm4gVFRTU2VydmljZTI7XG59KShUVFNTZXJ2aWNlIHx8IHt9KTtcblxuLy8gc3JjL2xpYi9taWNyb3Bob25lLnRzXG52YXIgZ2V0QXVkaW9TdHJlYW0gPSBhc3luYyAoKSA9PiB7XG4gIHJldHVybiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XG4gICAgYXVkaW86IHtcbiAgICAgIGVjaG9DYW5jZWxsYXRpb246IHRydWUsXG4gICAgICBub2lzZVN1cHByZXNzaW9uOiB0cnVlLFxuICAgICAgYXV0b0dhaW5Db250cm9sOiB0cnVlXG4gICAgfSxcbiAgICB2aWRlbzogZmFsc2VcbiAgfSk7XG59O1xudmFyIGNoZWNrRm9yQXVkaW9UcmFja3MgPSAoc3RyZWFtKSA9PiB7XG4gIGNvbnN0IHRyYWNrcyA9IHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpO1xuICBpZiAodHJhY2tzLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGF1ZGlvIHRyYWNrc1wiKTtcbiAgfVxuICBpZiAodHJhY2tzLmxlbmd0aCA+IDEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdWx0aXBsZSBhdWRpbyB0cmFja3NcIik7XG4gIH1cbiAgY29uc3QgdHJhY2sgPSB0cmFja3NbMF07XG4gIGlmICghdHJhY2spIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhdWRpbyB0cmFja1wiKTtcbiAgfVxufTtcblxuLy8gc3JjL2xpYi9mZXRjaC1hY2Nlc3MtdG9rZW4udHNcbmZ1bmN0aW9uIGJhc2U2NEVuY29kZShzdHIpIHtcbiAgaWYgKHR5cGVvZiBCdWZmZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJldHVybiBCdWZmZXIuZnJvbShzdHIpLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4gYnRvYShzdHIpO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiQmFzZTY0IGVuY29kaW5nIGlzIG5vdCBuYXRpdmVseSBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudC5cIlxuICAgICk7XG4gIH1cbn1cbnZhciBmZXRjaEFjY2Vzc1Rva2VuID0gYXN5bmMgKGFyZ3MpID0+IHtcbiAgY29uc3QgeyBhcGlLZXksIHNlY3JldEtleSwgaG9zdCA9IFwiYXBpLmh1bWUuYWlcIiB9ID0gYXJncztcbiAgY29uc3QgYXV0aFN0cmluZyA9IGAke2FwaUtleX06JHtzZWNyZXRLZXl9YDtcbiAgY29uc3QgZW5jb2RlZCA9IGJhc2U2NEVuY29kZShhdXRoU3RyaW5nKTtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vJHtob3N0fS9vYXV0aDItY2MvdG9rZW5gLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBoZWFkZXJzOiB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLFxuICAgICAgQXV0aG9yaXphdGlvbjogYEJhc2ljICR7ZW5jb2RlZH1gXG4gICAgfSxcbiAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgIGdyYW50X3R5cGU6IFwiY2xpZW50X2NyZWRlbnRpYWxzXCJcbiAgICB9KS50b1N0cmluZygpLFxuICAgIGNhY2hlOiBcIm5vLWNhY2hlXCJcbiAgfSk7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICBjb25zdCBhY2Nlc3NUb2tlbiA9IFN0cmluZyhkYXRhW1wiYWNjZXNzX3Rva2VuXCJdKTtcbiAgcmV0dXJuIGFjY2Vzc1Rva2VuO1xufTtcblxuLy8gc3JjL21vZGVscy9zZXNzaW9uLXNldHRpbmdzLnRzXG5pbXBvcnQgejE1IGZyb20gXCJ6b2RcIjtcbnZhciBDaGFubmVscyA9IC8qIEBfX1BVUkVfXyAqLyAoKENoYW5uZWxzMikgPT4ge1xuICBDaGFubmVsczJbQ2hhbm5lbHMyW1wiTU9OT1wiXSA9IDFdID0gXCJNT05PXCI7XG4gIENoYW5uZWxzMltDaGFubmVsczJbXCJTVEVSRU9cIl0gPSAyXSA9IFwiU1RFUkVPXCI7XG4gIHJldHVybiBDaGFubmVsczI7XG59KShDaGFubmVscyB8fCB7fSk7XG52YXIgQXVkaW9FbmNvZGluZyA9IC8qIEBfX1BVUkVfXyAqLyAoKEF1ZGlvRW5jb2RpbmcyKSA9PiB7XG4gIEF1ZGlvRW5jb2RpbmcyW1wiTElORUFSMTZcIl0gPSBcImxpbmVhcjE2XCI7XG4gIEF1ZGlvRW5jb2RpbmcyW1wiT1BVU1wiXSA9IFwib3B1c1wiO1xuICByZXR1cm4gQXVkaW9FbmNvZGluZzI7XG59KShBdWRpb0VuY29kaW5nIHx8IHt9KTtcbnZhciBBdWRpb0NvbmZpZ3VyYXRpb25TY2hlbWEgPSB6MTUub2JqZWN0KHtcbiAgY2hhbm5lbHM6IHoxNS5uYXRpdmVFbnVtKENoYW5uZWxzLCB7XG4gICAgZGVzY3JpcHRpb246IFwiTnVtYmVyIG9mIGNoYW5uZWxzIGluIHRoZSBpbnB1dCBhdWRpby5cIlxuICB9KSxcbiAgZW5jb2Rpbmc6IHoxNS5uYXRpdmVFbnVtKEF1ZGlvRW5jb2RpbmcsIHtcbiAgICBkZXNjcmlwdGlvbjogXCJFbmNvZGluZyBvZiB0aGUgaW5wdXQgYXVkaW8uXCJcbiAgfSksXG4gIHNhbXBsZVJhdGU6IHoxNS5udW1iZXIoe1xuICAgIGRlc2NyaXB0aW9uOiBcIlNhbXBsZSByYXRlIG9mIHRoZSBpbnB1dCBhdWRpby5cIlxuICB9KVxufSk7XG52YXIgQ29udGV4dENvbmZpZ3VyYXRpb25TY2hlbWEgPSB6MTUub2JqZWN0KHtcbiAgdGV4dDogejE1LnN0cmluZygpLFxuICB0eXBlOiB6MTUuZW51bShbXCJlZGl0YWJsZVwiLCBcInBlcnNpc3RlbnRcIiwgXCJ0ZW1wb3JhcnlcIl0pLm9wdGlvbmFsKClcbn0pO1xudmFyIFdlYlNlYXJjaFRvb2xTY2hlbWEgPSB6MTUub2JqZWN0KHtcbiAgbmFtZTogejE1LmxpdGVyYWwoXCJ3ZWJfc2VhcmNoXCIpLFxuICBmYWxsYmFja19jb250ZW50OiB6MTUuc3RyaW5nKCkubnVsbGlzaCgpLmNhdGNoKG51bGwpXG59KTtcbnZhciBTZXNzaW9uU2V0dGluZ3NTY2hlbWEgPSB6MTUub2JqZWN0KHtcbiAgYXVkaW86IEF1ZGlvQ29uZmlndXJhdGlvblNjaGVtYS5vcHRpb25hbCgpLFxuICBjb250ZXh0OiBDb250ZXh0Q29uZmlndXJhdGlvblNjaGVtYS5vcHRpb25hbCgpLFxuICBsYW5ndWFnZU1vZGVsQXBpS2V5OiB6MTUuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgY3VzdG9tU2Vzc2lvbklkOiB6MTUuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgc3lzdGVtUHJvbXB0OiB6MTUuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgYnVpbHRpbl90b29sczogejE1LmFycmF5KHoxNS51bmlvbihbV2ViU2VhcmNoVG9vbFNjaGVtYSwgejE1Lm51bGwoKV0pKS5vcHRpb25hbCgpXG59KTtcblxuLy8gc3JjL21vZGVscy9sbG0udHNcbnZhciBMYW5ndWFnZU1vZGVsT3B0aW9uID0gLyogQF9fUFVSRV9fICovICgoTGFuZ3VhZ2VNb2RlbE9wdGlvbjIpID0+IHtcbiAgTGFuZ3VhZ2VNb2RlbE9wdGlvbjJbXCJDTEFVREVfM19PUFVTXCJdID0gXCJDTEFVREVfM19PUFVTXCI7XG4gIExhbmd1YWdlTW9kZWxPcHRpb24yW1wiQ0xBVURFXzNfU09OTkVUXCJdID0gXCJDTEFVREVfM19TT05ORVRcIjtcbiAgTGFuZ3VhZ2VNb2RlbE9wdGlvbjJbXCJDTEFVREVfM19IQUlLVVwiXSA9IFwiQ0xBVURFXzNfSEFJS1VcIjtcbiAgTGFuZ3VhZ2VNb2RlbE9wdGlvbjJbXCJDTEFVREVfMjFcIl0gPSBcIkNMQVVERV8yMVwiO1xuICBMYW5ndWFnZU1vZGVsT3B0aW9uMltcIkNMQVVERV9JTlNUQU5UXzEyXCJdID0gXCJDTEFVREVfSU5TVEFOVF8xMlwiO1xuICBMYW5ndWFnZU1vZGVsT3B0aW9uMltcIkdQVF80X1RVUkJPX1BSRVZJRVdcIl0gPSBcIkdQVF80X1RVUkJPX1BSRVZJRVdcIjtcbiAgTGFuZ3VhZ2VNb2RlbE9wdGlvbjJbXCJHUFRfMzVfVFVSQk9fMDEyNVwiXSA9IFwiR1BUXzM1X1RVUkJPXzAxMjVcIjtcbiAgTGFuZ3VhZ2VNb2RlbE9wdGlvbjJbXCJHUFRfMzVfVFVSQk9cIl0gPSBcIkdQVF8zNV9UVVJCT1wiO1xuICBMYW5ndWFnZU1vZGVsT3B0aW9uMltcIkZJUkVXT1JLU19NSVhUUkFMXzhYN0JcIl0gPSBcIkZJUkVXT1JLU19NSVhUUkFMXzhYN0JcIjtcbiAgcmV0dXJuIExhbmd1YWdlTW9kZWxPcHRpb24yO1xufSkoTGFuZ3VhZ2VNb2RlbE9wdGlvbiB8fCB7fSk7XG5leHBvcnQge1xuICBBc3Npc3RhbnRFbmRNZXNzYWdlU2NoZW1hLFxuICBBc3Npc3RhbnRUcmFuc2NyaXB0TWVzc2FnZVNjaGVtYSxcbiAgQXVkaW9FbmNvZGluZyxcbiAgQXVkaW9NZXNzYWdlU2NoZW1hLFxuICBBdWRpb091dHB1dE1lc3NhZ2VTY2hlbWEsXG4gIEF1dGhTdHJhdGVneVNjaGVtYSxcbiAgQ2hhbm5lbHMsXG4gIENoYXRNZXRhZGF0YU1lc3NhZ2VTY2hlbWEsXG4gIEVtb3Rpb25TY29yZXNTY2hlbWEsXG4gIEpTT05FcnJvck1lc3NhZ2VTY2hlbWEsXG4gIEpTT05NZXNzYWdlU2NoZW1hLFxuICBMYW5ndWFnZU1vZGVsT3B0aW9uLFxuICBNaW1lVHlwZSxcbiAgU2Vzc2lvblNldHRpbmdzU2NoZW1hLFxuICBTb2NrZXRDb25maWdTY2hlbWEsXG4gIFNvY2tldEZhaWxlZFRvUGFyc2VNZXNzYWdlRXJyb3IsXG4gIFNvY2tldFVua25vd25NZXNzYWdlRXJyb3IsXG4gIFRUU1NlcnZpY2UsXG4gIFRpbWVTbGljZVNjaGVtYSxcbiAgVG9vbENhbGxTY2hlbWEsXG4gIFRvb2xFcnJvclNjaGVtYSxcbiAgVG9vbFJlc3BvbnNlQ29udGVudFNjaGVtYSxcbiAgVG9vbFJlc3BvbnNlU2NoZW1hLFxuICBUcmFuc2NyaXB0TW9kZWxzU2NoZW1hLFxuICBVc2VySW50ZXJydXB0aW9uTWVzc2FnZVNjaGVtYSxcbiAgVXNlclRyYW5zY3JpcHRNZXNzYWdlU2NoZW1hLFxuICBWb2ljZUNsaWVudCxcbiAgV2ViU2VhcmNoVG9vbFNjaGVtYSxcbiAgYXJyYXlCdWZmZXJUb0Jsb2IsXG4gIGJhc2U2NFRvQmxvYixcbiAgY2hlY2tGb3JBdWRpb1RyYWNrcyxcbiAgY3JlYXRlU29ja2V0Q29uZmlnLFxuICBjcmVhdGVTb2NrZXRVcmwsXG4gIGRlZmF1bHRDb25maWcsXG4gIGZldGNoQWNjZXNzVG9rZW4sXG4gIGdldEF1ZGlvU3RyZWFtLFxuICBnZXRTdXBwb3J0ZWRNaW1lVHlwZSxcbiAgaXNTb2NrZXRGYWlsZWRUb1BhcnNlTWVzc2FnZUVycm9yLFxuICBpc1NvY2tldFVua25vd25NZXNzYWdlRXJyb3IsXG4gIHBhcnNlQXVkaW9NZXNzYWdlLFxuICBwYXJzZU1lc3NhZ2VEYXRhLFxuICBwYXJzZU1lc3NhZ2VUeXBlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@humeai/voice/dist/index.mjs\n");

/***/ })

};
;